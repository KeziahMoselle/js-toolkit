{"version":3,"file":"full.modern.js","sources":["../node_modules/nanoid/non-secure/index.js","../src/utils/object/getAllProperties.js","../src/utils/object/autoBind.js","../src/abstracts/EventManager.js","../src/abstracts/Base/utils.js","../src/abstracts/Base/children.js","../node_modules/deepmerge/dist/cjs.js","../node_modules/lower-case/dist.es2015/index.js","../node_modules/no-case/dist.es2015/index.js","../src/utils/object/isObject.js","../src/abstracts/Base/classes/Options.js","../src/abstracts/Base/options.js","../src/abstracts/Base/refs.js","../src/abstracts/Base/components.js","../src/abstracts/Service.js","../src/utils/throttle.js","../src/utils/debounce.js","../src/utils/nextFrame.js","../src/services/raf.js","../src/services/pointer.js","../src/services/resize.js","../src/services/scroll.js","../src/utils/keyCodes.js","../src/services/key.js","../src/abstracts/Base/services.js","../src/abstracts/Base/events.js","../src/abstracts/Base/index.js","../src/index.js","../src/utils/css/styles.js","../src/utils/css/classes.js","../src/utils/css/transition.js","../src/components/Accordion/AccordionItem.js","../src/components/Accordion/index.js","../src/utils/focusTrap.js","../src/components/Modal.js","../src/components/Tabs.js","../src/decorators/withBreakpointManager.js","../src/decorators/withBreakpointObserver.js","../src/decorators/withIntersectionObserver.js","../src/utils/css/matrix.js","../src/utils/math/damp.js","../src/utils/math/lerp.js","../src/utils/math/map.js","../src/utils/math/round.js"],"sourcesContent":["// This alphabet uses a-z A-Z 0-9 _- symbols.\n// Symbols are generated for smaller size.\n// -_zyxwvutsrqponmlkjihgfedcba9876543210ZYXWVUTSRQPONMLKJIHGFEDCBA\nvar url = '-_'\n// Loop from 36 to 0 (from z to a and 9 to 0 in Base36).\nvar i = 36\nwhile (i--) {\n  // 36 is radix. Number.prototype.toString(36) returns number\n  // in Base36 representation. Base36 is like hex, but it uses 0–9 and a-z.\n  url += i.toString(36)\n}\n// Loop from 36 to 10 (from Z to A in Base36).\ni = 36\nwhile (i-- - 10) {\n  url += i.toString(36).toUpperCase()\n}\n\n/**\n * Generate URL-friendly unique ID. This method use non-secure predictable\n * random generator with bigger collision probability.\n *\n * @param {number} [size=21] The number of symbols in ID.\n *\n * @return {string} Random string.\n *\n * @example\n * const nanoid = require('nanoid/non-secure')\n * model.id = nanoid() //=> \"Uakgb_J5m9g-0JDMbcJqL\"\n *\n * @name nonSecure\n * @function\n */\nmodule.exports = function (size) {\n  var id = ''\n  i = size || 21\n  // Compact alternative for `for (var i = 0; i < size; i++)`\n  while (i--) {\n    // `| 0` is compact and faster alternative for `Math.floor()`\n    id += url[Math.random() * 64 | 0]\n  }\n  return id\n}\n","/**\n * Gets all non-builtin properties up the prototype chain.\n *\n * @param  {Object} object The object to get the propeties from.\n * @param  {Array}  props  The already existing properties.\n * @return {Array}         An array of properties and their value.\n */\nexport default function getAllProperties(object, props = []) {\n  const proto = Object.getPrototypeOf(object);\n\n  if (proto === Object.prototype) {\n    return props;\n  }\n\n  return getAllProperties(\n    proto,\n    Object.getOwnPropertyNames(proto)\n      .map((name) => [name, proto])\n      .reduce((acc, val) => [...acc, val], props)\n  );\n}\n","import getAllProperties from './getAllProperties';\n\n/**\n * Auto-bind methods to an instance.\n *\n * @param  {Object}               instance          The instance.\n * @param  {Object}               options           Specify methods to include or exlude.\n * @param  {Array<String|RegExp>} [options.include] Methods to include.\n * @param  {Array<String|RegExp>} [options.exclude] Methods to exclude.\n * @return {Object}                                 The instance.\n */\nexport default function autoBind(instance, options) {\n  const { exclude, include } = options || {};\n  const filter = (key) => {\n    const match = (pattern) => (typeof pattern === 'string' ? key === pattern : pattern.test(key));\n\n    if (include) {\n      return include.some(match);\n    }\n\n    if (exclude) {\n      return !exclude.some(match);\n    }\n\n    return true;\n  };\n\n  getAllProperties(instance)\n    .filter(([key]) => key !== 'constructor' && filter(key))\n    .forEach(([key, object]) => {\n      const descriptor = Object.getOwnPropertyDescriptor(object, key);\n      if (descriptor && typeof descriptor.value === 'function') {\n        instance[key] = instance[key].bind(instance);\n      }\n    });\n\n  return instance;\n}\n","/* eslint no-underscore-dangle: [\"error\", { \"allow\": [\"_events\"] }] */\n/**\n * Event management class.\n */\nexport default class EventManager {\n  /** @type {{[eventName:string]: Array<Function>}} An object to store the events */\n  _events = {};\n\n  /**\n   * Bind a listener function to an event.\n   *\n   * @param  {String}   event    Name of the event.\n   * @param  {Function} listener Function to be called.\n   * @return {Function}          A function to unbind the listener.\n   */\n  $on(event, listener) {\n    if (!Array.isArray(this._events[event])) {\n      this._events[event] = [];\n    }\n    this._events[event].push(listener);\n\n    return () => {\n      this.$off(event, listener);\n    };\n  }\n\n  /**\n   * Unbind a listener function from an event.\n   *\n   * @param  {String}       event    Name of the event.\n   * @param  {Function}     listener Function to be removed.\n   * @return {EventManager}          The current instance.\n   */\n  $off(event, listener) {\n    // If no event specified, we remove them all.\n    if (!event) {\n      this._events = {};\n      return this;\n    }\n    // If no listener have been specified, we remove all\n    // the listeners for the given event.\n    if (!listener) {\n      this._events[event] = [];\n      return this;\n    }\n\n    const index = this._events[event].indexOf(listener);\n\n    if (index > -1) {\n      this._events[event].splice(index, 1);\n    }\n\n    return this;\n  }\n\n  /**\n   * Emits an event.\n   *\n   * @param  {String}       event Name of the event.\n   * @param  {Array}        args  The arguments to apply to the functions bound to this event.\n   * @return {EventManager}       The current instance.\n   */\n  $emit(event, ...args) {\n    if (!Array.isArray(this._events[event])) {\n      return this;\n    }\n\n    this._events[event].forEach((listener) => {\n      listener.apply(this, args);\n    });\n    return this;\n  }\n\n  /**\n   * Bind a listener function to an event for one execution only.\n   *\n   * @param  {String}       event    Name of the event.\n   * @param  {Function}     listener Function to be called.\n   * @return {EventManager}          The current instance.\n   */\n  $once(event, listener) {\n    const instance = this;\n    this.$on(\n      event,\n      /**\n       * @param {...any} args\n       */\n      function handler(...args) {\n        instance.$off(event, handler);\n        listener.apply(instance, args);\n      }\n    );\n    return this;\n  }\n}\n","/**\n * @typedef {import('./index').default} Base\n * @typedef {import('./index').BaseConfig} BaseConfig\n */\n\n/**\n * Get the config from a Base instance, either the new static one or the old getter one.\n *\n * @param  {Base}       instance The instance to get the config from.\n * @return {BaseConfig}         A Base class configuration object.\n */\nexport function getConfig(instance) {\n  // @ts-ignore\n  const config = instance.constructor.config || instance.config;\n\n  if (!config) {\n    throw new Error('The `config` property must be defined.');\n  }\n\n  if (!config.name) {\n    throw new Error('The `config.name` property is required.');\n  }\n\n  // @ts-ignore\n  if (instance.config && !instance.constructor.config) {\n    console.warn(\n      `[${config.name}]`,\n      'Defining the `config` as a getter is deprecated, replace it with a static property.'\n    );\n  }\n\n  return config;\n}\n\n/**\n * Display a console warning for the given instance.\n *\n * @param {Base}      instance A Base instance.\n * @param {...String} msg   Values to display in the console.\n */\nexport function warn(instance, ...msg) {\n  const { name } = getConfig(instance);\n  console.warn(`[${name}]`, ...msg);\n}\n\n/**\n * Display a console log for the given instance.\n *\n * @param {Base}   instance The instance to log information from.\n * @param {...any} msg      The data to print to the console.\n */\nexport function log(instance, ...msg) {\n  const { name } = getConfig(instance);\n  console.log(`[${name}]`, ...msg);\n}\n\n/**\n * Verbose debug for the component.\n *\n * @param {Base}   instance The instance to debug.\n * @param {...any} args     The data to print.\n */\nexport function debug(instance, ...args) {\n  if (instance.$options.debug) {\n    log(instance, ...args);\n  }\n}\n\n/**\n * Test if an object has a method.\n *\n * @param  {Object}  obj  The object to test\n * @param  {String}  name The method's name\n * @return {Boolean}\n */\nexport function hasMethod(obj, name) {\n  return typeof obj[name] === 'function';\n}\n\n/**\n * Call the given method while applying the given arguments.\n *\n * @param {Base}   instance The Base instance on which to trigger the method.\n * @param {String} method   The method to call.\n * @param {...any} args     The arguments to pass to the method.\n */\nexport function callMethod(instance, method, ...args) {\n  debug(instance, 'callMethod', method, ...args);\n\n  // Prevent duplicate call of `mounted` and `destroyed`\n  // methods based on the component status\n  if (\n    (method === 'destroyed' && !instance.$isMounted) ||\n    (method === 'mounted' && instance.$isMounted)\n  ) {\n    debug(instance, 'not', method, 'because the method has already been triggered once.');\n    return instance;\n  }\n\n  instance.$emit(method, ...args);\n\n  // We always emit an event, but we do not call the method if it does not exist\n  if (!hasMethod(instance, method)) {\n    return instance;\n  }\n\n  instance[method].call(instance, ...args);\n  debug(instance, method, instance, ...args);\n\n  return instance;\n}\n","/**\n * @typedef {import('./index.js').default} Base\n * @typedef {import('./index.js').BaseComponent} BaseComponent\n * @typedef {import('./index.js').BaseAsyncComponent} BaseAsyncComponent\n * @typedef {import('./index.js').BaseHTMLElement} BaseHTMLElement\n * @typedef {import('./index.js').BaseConfigComponents} BaseConfigComponents\n */\n\n/**\n * Get a child component.\n *\n * @param  {BaseHTMLElement}                  el             The root element of the child component.\n * @param  {BaseComponent|BaseAsyncComponent} ComponentClass A Base class or a Promise for async components.\n * @param  {Base}                             parent         The parent component instance.\n * @return {Base|Promise|'terminated'}                       A Base instance or a Promise resolving to a Base instance.\n */\nfunction getChild(el, ComponentClass, parent) {\n  // Return existing instance if it exists\n  if (el.__base__) {\n    return el.__base__;\n  }\n\n  // Return a new instance if the component class is a child of the Base class\n  if ('$isBase' in ComponentClass) {\n    const child = new ComponentClass(el);\n    Object.defineProperty(child, '$parent', { get: () => parent });\n    return child;\n  }\n\n  // Resolve async components\n  return ComponentClass().then((module) => {\n    // @ts-ignore\n    return getChild(el, module.default ?? module, parent);\n  });\n}\n\n/**\n * Get a list of elements based on the name of a component.\n * @param  {String}                   nameOrSelector The name or selector to used for this component.\n * @param  {BaseHTMLElement|Document} element        The root element on which to query the selector, defaults to `document`.\n * @return {Array<HTMLElement>}                      A list of elements on which the component should be mounted.\n */\nexport function getComponentElements(nameOrSelector, element = document) {\n  const selector = `[data-component=\"${nameOrSelector}\"]`;\n  let elements = [];\n\n  try {\n    elements = Array.from(element.querySelectorAll(selector));\n    // eslint-disable-next-line no-empty\n  } catch {}\n\n  // If no child component found with the default selector, try a classic DOM selector\n  if (elements.length === 0) {\n    elements = Array.from(element.querySelectorAll(nameOrSelector));\n  }\n\n  return elements;\n}\n\n/**\n * Get child components.\n * @param  {Base}                 instance   The component's instance.\n * @param  {BaseHTMLElement}      element    The component's root element\n * @param  {BaseConfigComponents} components The children components' classes\n * @return {null|Object}                     Returns `null` if no child components are defined or an object of all child component instances\n */\nexport function getChildren(instance, element, components) {\n  const children = Object.entries(components).reduce((acc, [name, ComponentClass]) => {\n    const elements = getComponentElements(name, element);\n\n    if (elements.length === 0) {\n      return acc;\n    }\n\n    acc[name] = elements\n      .map((el) => getChild(el, ComponentClass, instance))\n      // Filter out terminated children\n      // @ts-ignore\n      .filter((el) => el !== 'terminated');\n\n    if (acc[name].length === 0) {\n      delete acc[name];\n    }\n\n    return acc;\n  }, {});\n\n  instance.$emit('get:children', children);\n  return children;\n}\n\nexport default {\n  getChildren,\n};\n","'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn target.propertyIsEnumerable(symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n","/**\n * Source: ftp://ftp.unicode.org/Public/UCD/latest/ucd/SpecialCasing.txt\n */\nvar SUPPORTED_LOCALE = {\n    tr: {\n        regexp: /\\u0130|\\u0049|\\u0049\\u0307/g,\n        map: {\n            İ: \"\\u0069\",\n            I: \"\\u0131\",\n            İ: \"\\u0069\",\n        },\n    },\n    az: {\n        regexp: /\\u0130/g,\n        map: {\n            İ: \"\\u0069\",\n            I: \"\\u0131\",\n            İ: \"\\u0069\",\n        },\n    },\n    lt: {\n        regexp: /\\u0049|\\u004A|\\u012E|\\u00CC|\\u00CD|\\u0128/g,\n        map: {\n            I: \"\\u0069\\u0307\",\n            J: \"\\u006A\\u0307\",\n            Į: \"\\u012F\\u0307\",\n            Ì: \"\\u0069\\u0307\\u0300\",\n            Í: \"\\u0069\\u0307\\u0301\",\n            Ĩ: \"\\u0069\\u0307\\u0303\",\n        },\n    },\n};\n/**\n * Localized lower case.\n */\nexport function localeLowerCase(str, locale) {\n    var lang = SUPPORTED_LOCALE[locale.toLowerCase()];\n    if (lang)\n        return lowerCase(str.replace(lang.regexp, function (m) { return lang.map[m]; }));\n    return lowerCase(str);\n}\n/**\n * Lower case as a function.\n */\nexport function lowerCase(str) {\n    return str.toLowerCase();\n}\n//# sourceMappingURL=index.js.map","import { lowerCase } from \"lower-case\";\n// Support camel case (\"camelCase\" -> \"camel Case\" and \"CAMELCase\" -> \"CAMEL Case\").\nvar DEFAULT_SPLIT_REGEXP = [/([a-z0-9])([A-Z])/g, /([A-Z])([A-Z][a-z])/g];\n// Remove all non-word characters.\nvar DEFAULT_STRIP_REGEXP = /[^A-Z0-9]+/gi;\n/**\n * Normalize the string into something other libraries can manipulate easier.\n */\nexport function noCase(input, options) {\n    if (options === void 0) { options = {}; }\n    var _a = options.splitRegexp, splitRegexp = _a === void 0 ? DEFAULT_SPLIT_REGEXP : _a, _b = options.stripRegexp, stripRegexp = _b === void 0 ? DEFAULT_STRIP_REGEXP : _b, _c = options.transform, transform = _c === void 0 ? lowerCase : _c, _d = options.delimiter, delimiter = _d === void 0 ? \" \" : _d;\n    var result = replace(replace(input, splitRegexp, \"$1\\0$2\"), stripRegexp, \"\\0\");\n    var start = 0;\n    var end = result.length;\n    // Trim the delimiter from around the output string.\n    while (result.charAt(start) === \"\\0\")\n        start++;\n    while (result.charAt(end - 1) === \"\\0\")\n        end--;\n    // Transform each token independently.\n    return result.slice(start, end).split(\"\\0\").map(transform).join(delimiter);\n}\n/**\n * Replace `re` in the input string with the replacement value.\n */\nfunction replace(input, re, value) {\n    if (re instanceof RegExp)\n        return input.replace(re, value);\n    return re.reduce(function (input, re) { return input.replace(re, value); }, input);\n}\n//# sourceMappingURL=index.js.map","/**\n * Test if the given value is an object.\n *\n * @param  {*}       value The value to test.\n * @return {Boolean}       Whether or not the value is an object.\n */\nexport default function isObject(value) {\n  return typeof value === 'object' && !!value && value.toString() === '[object Object]';\n}\n","import deepmerge from 'deepmerge';\nimport { noCase } from 'no-case';\nimport isObject from '../../../utils/object/isObject';\n\n/**\n * @typedef {StringConstructor|NumberConstructor|BooleanConstructor|ArrayConstructor|ObjectConstructor} OptionType\n * @typedef {{ [name:string]: OptionType | { type: OptionType, default: String|Number|Boolean|(() => Array|Object)} }} OptionsSchema\n */\n\n/**\n * Get the attribute name based on the given option name.\n * @param {String} name The option name.\n */\nfunction getAttributeName(name) {\n  return `data-option-${noCase(name, { delimiter: '-' })}`;\n}\n\n/**\n * Class options to manage options as data attributes on an HTML element.\n */\nexport default class Options {\n  /** @type {HTMLElement} The HTML element holding the options attributes. */\n  #element;\n\n  /** @type {Object} An object to store Array and Object values for reference. */\n  #values = {};\n\n  /** @type {Array} List of allowed types. */\n  static types = [String, Number, Boolean, Array, Object];\n\n  /**\n   * The default values to return for each available type.\n   * @type {Object}\n   */\n  #defaultValues = {\n    String: '',\n    Number: 0,\n    Boolean: false,\n    Array: () => [],\n    Object: () => ({}),\n  };\n\n  /**\n   * Class constructor.\n   *\n   * @param {HTMLElement}   element The HTML element storing the options.\n   * @param {OptionsSchema} schema  A Base class config.\n   */\n  constructor(element, schema) {\n    this.#element = element;\n\n    Object.entries(schema).forEach(([name, config]) => {\n      const isObjectConfig = !Options.types.includes(config);\n      /** @type {OptionType} */\n      // @ts-ignore\n      const type = isObjectConfig ? config.type : config;\n\n      if (!Options.types.includes(type)) {\n        throw new Error(\n          `The \"${name}\" option has an invalid type. The allowed types are: String, Number, Boolean, Array and Object.`\n        );\n      }\n\n      // @ts-ignore\n      const defaultValue = isObjectConfig ? config.default : this.#defaultValues[type.name];\n\n      if ((type === Array || type === Object) && typeof defaultValue !== 'function') {\n        throw new Error(\n          `The default value for options of type \"${type.name}\" must be returned by a function.`\n        );\n      }\n\n      Object.defineProperty(this, name, {\n        get() {\n          return this.get(name, type, defaultValue);\n        },\n        set(value) {\n          this.set(name, type, value);\n        },\n        enumerable: true,\n      });\n    });\n\n    return this;\n  }\n\n  /**\n   * Get an option value.\n   *\n   * @param {String} name The option name.\n   * @param {ArrayConstructor|ObjectConstructor|StringConstructor|NumberConstructor|BooleanConstructor} type The option data's type.\n   * @param {any} defaultValue The default value for this option.\n   */\n  get(name, type, defaultValue) {\n    const attributeName = getAttributeName(name);\n    const hasAttribute = this.#element.hasAttribute(attributeName);\n\n    if (type === Boolean) {\n      if (!hasAttribute && defaultValue) {\n        this.#element.setAttribute(attributeName, '');\n      }\n      return hasAttribute || defaultValue;\n    }\n\n    const value = this.#element.getAttribute(attributeName);\n\n    if (type === Number) {\n      return hasAttribute ? Number(value) : defaultValue;\n    }\n\n    if (type === Array || type === Object) {\n      const val = deepmerge(\n        defaultValue(),\n        hasAttribute ? JSON.parse(value) : this.#defaultValues[type.name]()\n      );\n\n      if (!this.#values[name]) {\n        this.#values[name] = val;\n      } else if (val !== this.#values[name]) {\n        // When getting the value, wait for the next loop to update the data attribute\n        // with the new value. This is a simple trick to avoid using a Proxy to watch\n        // for any deep changes on an array or object. It should not break anything as\n        // the original value is read once from the data attribute and is then read from\n        // the private property `#values`.\n        setTimeout(() => {\n          this.#element.setAttribute(attributeName, JSON.stringify(this.#values[name]));\n        }, 0);\n      }\n\n      return this.#values[name];\n    }\n\n    return hasAttribute ? value : defaultValue;\n  }\n\n  /**\n   * Set an option value.\n   *\n   * @param {String} name The option name.\n   * @param {ArrayConstructor|ObjectConstructor|StringConstructor|NumberConstructor|BooleanConstructor} type The option data's type.\n   * @param {any} value The new value for this option.\n   */\n  set(name, type, value) {\n    const attributeName = getAttributeName(name);\n\n    if (value.constructor.name !== type.name) {\n      const val = Array.isArray(value) || isObject(value) ? JSON.stringify(value) : value;\n      throw new TypeError(\n        `The \"${val}\" value for the \"${name}\" option must be of type \"${type.name}\"`\n      );\n    }\n\n    switch (type) {\n      case Boolean:\n        if (value) {\n          this.#element.setAttribute(attributeName, '');\n        } else {\n          this.#element.removeAttribute(attributeName);\n        }\n        break;\n      case Array:\n      case Object:\n        this.#values[name] = value;\n        this.#element.setAttribute(attributeName, JSON.stringify(value));\n        break;\n      default:\n        this.#element.setAttribute(attributeName, value);\n    }\n  }\n}\n","import Options from './classes/Options';\nimport { warn } from './utils';\n\n/**\n * @typedef {import('./index').default} Base\n */\n\n/**\n * Get a component's options.\n *\n * @param  {Base}        instance The component's instance.\n * @param  {HTMLElement} element  The component's root element.\n * @param  {Object}      config   The component's default config.\n * @return {Object}               The component's merged options.\n */\nexport function getOptions(instance, element, config) {\n  let schema = { ...(config.options || {}) };\n\n  /** @type {Base|false} Merge inherited options. */\n  let prototype = instance;\n  while (prototype) {\n    const getterConfig = prototype.config;\n    // @ts-ignore\n    const staticConfig = prototype.constructor.config;\n    if (getterConfig || staticConfig) {\n      schema = Object.assign(\n        (getterConfig || {}).options || {},\n        (staticConfig || {}).options || {},\n        schema\n      );\n      prototype = Object.getPrototypeOf(prototype);\n    } else {\n      prototype = false;\n    }\n  }\n\n  // Add legacy options from the config\n  const propsToInclude = [\n    { name: 'log', type: Boolean },\n    { name: 'debug', type: Boolean },\n    { name: 'name', type: String },\n  ];\n\n  propsToInclude.forEach((prop) => {\n    schema[prop.name] = { type: prop.type, default: prop.type(config[prop.name]) };\n  });\n\n  // Add legacy options to the schema\n  const propsToExclude = ['name', 'log', 'debug', 'components', 'refs', 'options'];\n  Object.keys(config).forEach((propName) => {\n    if (propsToExclude.includes(propName)) {\n      return;\n    }\n\n    const value = config[propName];\n    let type = value === null || value === undefined ? Object : value.constructor;\n\n    // Default to object type as it should work for any values.\n    if (!Options.types.includes(type)) {\n      type = Object;\n    }\n\n    warn(\n      instance,\n      '\\n  Options must be defined in the `config.options` property.',\n      `\\n  Consider moving the \\`config.${propName}\\` option to \\`config.options.${propName}\\`.`,\n    );\n\n    if (type === Array || type === Object) {\n      schema[propName] = { type, default: () => value };\n    } else {\n      schema[propName] = { type, default: value };\n    }\n  });\n\n  const options = new Options(element, schema);\n\n  // Update legacy options with value from the `data-options` attribute\n  let legacyOptions = {};\n  if (element.dataset.options) {\n    warn(\n      instance,\n      'The `data-options` attribute usage is deprecated, use multiple `data-option-...` attributes instead.'\n    );\n    try {\n      legacyOptions = JSON.parse(element.dataset.options);\n    } catch (err) {\n      throw new Error('Can not parse the `data-options` attribute. Is it a valid JSON string?');\n    }\n  }\n\n  Object.entries(legacyOptions).forEach(([optionName, optionValue]) => {\n    options[optionName] = optionValue;\n  });\n\n  instance.$emit('get:options', options);\n\n  return options;\n}\n\nexport default {\n  getOptions,\n};\n","import { getConfig, warn } from './utils';\n\n/**\n * @typedef {import('./index').default} Base\n */\n\n/**\n * A ponyfill for the CSS `:scope` selector which is not supported in IE11.\n * The following method will return an array of elements similare to the\n * `:scope ${selector}` selector.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/:scope\n * @see https://github.com/jonathantneal/element-qsa-scope\n *\n * @param  {HTMLElement} element  The element from which the scope is taken.\n * @param  {String}      selector The children selector.\n * @param  {String}      uniqId   A uniq ID to prefix the selector with.\n * @return {Array}                A list of elements.\n */\nexport function scopeSelectorPonyfill(element, selector, uniqId) {\n  let list = [];\n\n  try {\n    list = Array.from(element.querySelectorAll(`:scope ${selector}`));\n  } catch (err) {\n    const attr = `data-uniq-id`;\n    const scopedSelector = `[${attr}=\"${uniqId}\"] ${selector}`;\n    element.setAttribute(attr, uniqId);\n    list = Array.from(element.querySelectorAll(scopedSelector));\n    element.removeAttribute(attr);\n  }\n\n  return list;\n}\n\n/**\n * Get all refs of a component.\n *\n * @param  {Base}        instance The component's instance.\n * @param  {HTMLElement} element  The component's root element.\n * @return {Object}               Return an object containing all the component's refs.\n */\nexport function getRefs(instance, element) {\n  const definedRefs = getConfig(instance).refs || [];\n  /** @type {Array<HTMLElement>} */\n  const allRefs = Array.from(element.querySelectorAll(`[data-ref]`));\n  const childrenRefs = scopeSelectorPonyfill(element, '[data-component] [data-ref]', instance.$id);\n  const elements = allRefs.filter((ref) => !childrenRefs.includes(ref));\n\n  const refs = elements.reduce(\n    /**\n     * @param {Object} $refs\n     * @param {HTMLElement & {__base__?: Base}} $ref\n     */\n    ($refs, $ref) => {\n      let refName = $ref.dataset.ref;\n\n      if (!definedRefs.includes(refName)) {\n        warn(\n          instance,\n          `The \"${refName}\" ref is not defined in the class configuration.`,\n          'Did you forgot to define it?'\n        );\n      }\n\n      const $realRef = $ref.__base__ ? $ref.__base__ : $ref;\n\n      if (refName.endsWith('[]')) {\n        refName = refName.replace(/\\[\\]$/, '');\n\n        if (!$refs[refName]) {\n          $refs[refName] = [];\n        }\n      }\n\n      if ($refs[refName]) {\n        if (Array.isArray($refs[refName])) {\n          $refs[refName].push($realRef);\n        } else {\n          $refs[refName] = [$refs[refName], $realRef];\n          warn(\n            instance,\n            `The \"${refName}\" ref has been found multiple times.`,\n            'Did you forgot to add the `[]` suffix to its name?'\n          );\n        }\n      } else {\n        $refs[refName] = $realRef;\n      }\n\n      return $refs;\n    },\n    {}\n  );\n\n  instance.$emit('get:refs', refs);\n  return refs;\n}\n\nexport default {\n  getRefs,\n};\n","import { debug } from './utils';\n\n/**\n * @typedef {import('./index.js').default} Base\n */\n\n/**\n * Mount a given component which might be async.\n *\n * @param  {Base|Promise} component The component to mount.\n * @return {void}\n */\nfunction mountComponent(component) {\n  if (component instanceof Promise) {\n    component.then((instance) => instance.$mount());\n  } else {\n    component.$mount();\n  }\n}\n\n/**\n * Mount children components of a given instance.\n *\n * @param  {Base} instance The parent component's instance.\n * @return {void}\n */\nexport function mountComponents(instance) {\n  if (!instance.$children) {\n    return;\n  }\n\n  debug(instance, 'mountComponents', instance.$children);\n\n  Object.values(instance.$children).forEach(($child) => {\n    $child.forEach(mountComponent);\n  });\n}\n\n/**\n * Destroy a given component which might be async.\n *\n * @param  {Base|Promise} component The component to destroy.\n * @return {void}\n */\nfunction destroyComponent(component) {\n  if (component instanceof Promise) {\n    component.then((instance) => instance.$destroy());\n  } else {\n    component.$destroy();\n  }\n}\n\n/**\n * Destroy children components of a given instance.\n *\n * @param  {Base} instance The parent component's instance.\n * @return {void}\n */\nexport function destroyComponents(instance) {\n  if (!instance.$children) {\n    return;\n  }\n  debug(instance, 'destroyComponents', instance.$children);\n\n  Object.values(instance.$children).forEach(($child) => {\n    $child.forEach(destroyComponent);\n  });\n}\n","/**\n * Service abstract class\n */\nexport default class Service {\n  /**\n   * Class constructor, used to test the abstract class implementation.\n   */\n  constructor() {\n    this.callbacks = new Map();\n    this.isInit = false;\n  }\n\n  /**\n   * Getter to get the services properties.\n   * This getter MUST be implementer by the service extending this class.\n   * @return {Object}\n   */\n  get props() {\n    throw new Error('The `props` getter must be implemented.');\n  }\n\n  /**\n   * Method to initialize the service behaviors.\n   * This method MUST be implemented by the service extending this class.\n   *\n   * @return {Service} The current instance\n   */\n  init() {\n    throw new Error('The `init` method must be implemented.');\n  }\n\n  /**\n   * Method to kill the service behaviors.\n   * This method MUST be implemented by the service extending this class.\n   *\n   * @return {Service} The current instance\n   */\n  kill() {\n    throw new Error('The `kill` method must be implemented.');\n  }\n\n  /**\n   * Add a callback.\n   *\n   * @param  {String}   key      The callback's identifier\n   * @param  {Function} callback The callback function\n   * @return {InstanceType<typeof Service>} The current instance\n   */\n  add(key, callback) {\n    if (this.has(key)) {\n      throw new Error(`A callback with the key \\`${key}\\` has already been registered.`);\n    }\n\n    // Initialize the service when we add the first callback\n    if (this.callbacks.size === 0 && !this.isInit) {\n      this.init();\n      this.isInit = true;\n    }\n\n    this.callbacks.set(key, callback);\n    return this;\n  }\n\n  /**\n   * Test if a callback with the given key has already been added.\n   *\n   * @param  {String}  key The identifier to test\n   * @return {Boolean}     Whether or not the identifier already exists\n   */\n  has(key) {\n    return this.callbacks.has(key);\n  }\n\n  /**\n   * Get the callback tied to the given key.\n   *\n   * @param  {String}   key The identifier to get\n   * @return {Function}     The callback function\n   */\n  get(key) {\n    return this.callbacks.get(key);\n  }\n\n  /**\n   * Remove the callback tied to the given key.\n   *\n   * @param  {String} key The identifier to remove\n   * @return {Service}    The current instance\n   */\n  remove(key) {\n    this.callbacks.delete(key);\n\n    // Kill the service when we remove the last callback\n    if (this.callbacks.size === 0 && this.isInit) {\n      this.kill();\n      this.isInit = false;\n    }\n\n    return this;\n  }\n\n  /**\n   * Trigger each added callback with the given arguments.\n   *\n   * @param  {Array}   args All the arguments to apply to the callback\n   * @return {Service}      The current instance\n   */\n  trigger(...args) {\n    this.callbacks.forEach((callback) => {\n      callback(...args);\n    });\n\n    return this;\n  }\n}\n","/**\n * Simple throttling helper that limits a\n * function to only run once every {delay}ms\n *\n * @param {Function} fn    The function to throttle\n * @param {Number}   delay The delay in ms\n */\nexport default function throttle(fn, delay = 16) {\n  let lastCall = 0;\n  return (...args) => {\n    const now = new Date().getTime();\n    if (now - lastCall < delay) {\n      return false;\n    }\n    lastCall = now;\n    return fn(...args);\n  };\n}\n","/**\n * Returns a function, that, as long as it continues to be invoked,\n * will not be triggered. The function will be called after it stops\n * being called for N milliseconds.\n *\n * @param {Function} fn    The function to call\n * @param {Number}   delay The delay in ms to wait before calling the function\n */\nexport default function debounce(fn, delay = 300) {\n  let timeout;\n  return (...args) => {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => {\n      fn(...args);\n    }, delay);\n  };\n}\n","/**\n * RequestAnimation frame polyfill.\n * @see  https://github.com/vuejs/vue/blob/ec78fc8b6d03e59da669be1adf4b4b5abf670a34/dist/vue.runtime.esm.js#L7355\n * @type {Function}\n */\nexport const getRaf = () =>\n  typeof window !== 'undefined' && window.requestAnimationFrame\n    ? window.requestAnimationFrame.bind(window)\n    : setTimeout;\n\n/**\n * Execute a callback in the next frame.\n * @param  {Function} fn The callback function to execute.\n * @return {Promise}\n */\nexport default function nextFrame(fn = () => {}) {\n  const raf = getRaf();\n  return new Promise((resolve) => {\n    raf(() => raf(() => resolve(fn())));\n  });\n}\n","import Service from '../abstracts/Service';\nimport { getRaf } from '../utils/nextFrame';\n\n/**\n * Tick service\n *\n * ```\n * import { useRaf } from '@studiometa/js/services';\n * const { add, remove, props } = useRag();\n * add(id, (props) => {});\n * remove(id);\n * props();\n * ```\n */\nclass Raf extends Service {\n  /** @type {Boolean} Whether the loop is running or not. */\n  isTicking = false;\n\n  /**\n   * Start the requestAnimationFrame loop.\n   *\n   * @return {Raf}\n   */\n  init() {\n    const raf = getRaf();\n\n    const loop = () => {\n      this.trigger(this.props);\n\n      if (!this.isTicking) {\n        return;\n      }\n\n      raf(loop);\n    };\n\n    this.isTicking = true;\n    loop();\n    return this;\n  }\n\n  /**\n   * Stop the requestAnimationFrame loop.\n   *\n   * @return {Raf}\n   */\n  kill() {\n    this.isTicking = false;\n    return this;\n  }\n\n  /**\n   * Get raf props.\n   *\n   * @todo Return elapsed time / index?\n   * @type {Object}\n   */\n  get props() {\n    return {\n      time: window.performance.now(),\n    };\n  }\n}\n\nlet instance = null;\n\nexport default () => {\n  if (!instance) {\n    instance = new Raf();\n  }\n\n  const add = instance.add.bind(instance);\n  const remove = instance.remove.bind(instance);\n  const has = instance.has.bind(instance);\n  const props = () => instance.props;\n\n  return {\n    add,\n    remove,\n    has,\n    props,\n  };\n};\n","import Service from '../abstracts/Service';\nimport throttle from '../utils/throttle';\nimport debounce from '../utils/debounce';\nimport useRaf from './raf';\n\n/**\n * Test if an event is an instance of TouchEvent.\n *\n * @param {TouchEvent|MouseEvent} event The event instance to test.\n * @return {Boolean}                    Is it a TouchEvent?\n */\nfunction isTouchEvent(event) {\n  return typeof TouchEvent !== 'undefined' && event instanceof TouchEvent;\n}\n\n/**\n * Pointer service\n *\n * ```\n * import { usePointer } from '@studiometa/js/services';\n * const { add, remove, props } = usePointer();\n * add(key, (props) => {});\n * remove(key);\n * props();\n * ```\n */\nclass Pointer extends Service {\n  /** @type {Boolean} State of the pointer. */\n  isDown = false;\n\n  /** @type {Number} The y pointer position. */\n  y = window.innerHeight / 2;\n\n  /** @type {Number} The y previous pointer position. */\n  yLast = window.innerHeight / 2;\n\n  /** @type {Number} The x pointer position. */\n  x = window.innerWidth / 2;\n\n  /** @type {Number} The x previous pointer position. */\n  xLast = window.innerWidth / 2;\n\n  /** @type {MouseEvent|TouchEvent} The latest event emitted from the pointer. */\n  event;\n\n  /**\n   * Bind the handler to the mousemove and touchmove events.\n   * Bind the up and down handler to the mousedown, mouseup, touchstart and touchend events.\n   *\n   * @return {Pointer}\n   */\n  init() {\n    const { add, remove } = useRaf();\n    this.hasRaf = false;\n\n    const debounced = debounce((event) => {\n      this.updateValues(event);\n      remove('usePointer');\n      this.trigger(this.props);\n      this.hasRaf = false;\n    }, 50);\n\n    this.handler = throttle((event) => {\n      this.updateValues(event);\n      if (!this.hasRaf) {\n        add('usePointer', () => {\n          this.trigger(this.props);\n        });\n        this.hasRaf = true;\n      }\n      // Reset changed flags at the end of the mousemove or touchmove event\n      debounced(event);\n    }, 32).bind(this);\n\n    this.downHandler = this.downHandler.bind(this);\n    this.upHandler = this.upHandler.bind(this);\n\n    document.documentElement.addEventListener('mouseenter', this.handler, { once: true });\n    document.addEventListener('mousemove', this.handler, { passive: true });\n    document.addEventListener('touchmove', this.handler, { passive: true });\n    document.addEventListener('mousedown', this.downHandler, { passive: true });\n    document.addEventListener('touchstart', this.downHandler, { passive: true });\n    document.addEventListener('mouseup', this.upHandler, { passive: true });\n    document.addEventListener('touchend', this.upHandler, { passive: true });\n    return this;\n  }\n\n  /**\n   * Unbind all handlers from their bounded event.\n   *\n   * @return {Pointer}\n   */\n  kill() {\n    document.removeEventListener('mousemove', this.handler);\n    document.removeEventListener('touchmove', this.handler);\n    document.removeEventListener('mousedown', this.downHandler);\n    document.removeEventListener('touchstart', this.downHandler);\n    document.removeEventListener('mouseup', this.upHandler);\n    document.removeEventListener('touchend', this.upHandler);\n    return this;\n  }\n\n  /**\n   * Handler for the pointer's down action.\n   *\n   * @return {void}\n   */\n  downHandler() {\n    this.isDown = true;\n    this.trigger(this.props);\n  }\n\n  /**\n   * Handler for the pointer's up action.\n   *\n   * @return {void}\n   */\n  upHandler() {\n    this.isDown = false;\n    this.trigger(this.props);\n  }\n\n  /**\n   * Update the pointer positions.\n   *\n   * @param  {MouseEvent|TouchEvent} event The event object.\n   * @return {void}\n   */\n  updateValues(event) {\n    this.event = event;\n    this.yLast = this.y;\n    this.xLast = this.x;\n\n    // Check pointer Y\n    // We either get data from a touch event `event.touches[0].clientY` or from\n    // a mouse event `event.clientY`.\n    const y = isTouchEvent(event)\n      ? /** @type {TouchEvent} */ (event).touches[0]?.clientY\n      : /** @type {MouseEvent} */ (event).clientY;\n    if (y !== this.y) {\n      this.y = y;\n    }\n\n    // Check pointer X\n    // We either get data from a touch event `event.touches[0].clientX` or from\n    // a mouse event `event.clientX`.\n    const x = isTouchEvent(event)\n      ? /** @type {TouchEvent} */ (event).touches[0]?.clientX\n      : /** @type {MouseEvent} */ (event).clientX;\n    if (x !== this.x) {\n      this.x = x;\n    }\n  }\n\n  /**\n   * Get the pointer props.\n   *\n   * @type {Object}\n   */\n  get props() {\n    return {\n      event: this.event,\n      isDown: this.isDown,\n      x: this.x,\n      y: this.y,\n      changed: {\n        x: this.x !== this.xLast,\n        y: this.y !== this.yLast,\n      },\n      last: {\n        x: this.xLast,\n        y: this.yLast,\n      },\n      delta: {\n        x: this.x - this.xLast,\n        y: this.y - this.yLast,\n      },\n      progress: {\n        x: this.x / window.innerWidth,\n        y: this.y / window.innerHeight,\n      },\n      max: {\n        x: window.innerWidth,\n        y: window.innerHeight,\n      },\n    };\n  }\n}\n\nlet pointer = null;\n\n/**\n * Use the pointer.\n *\n * ```js\n * import usePointer from '@studiometa/js-toolkit/services';\n * const { add, remove, props } = usePointer();\n * add('id', () => {});\n * remove('id');\n * props();\n * ```\n */\nexport default () => {\n  if (!pointer) {\n    pointer = new Pointer();\n  }\n\n  const add = pointer.add.bind(pointer);\n  const remove = pointer.remove.bind(pointer);\n  const has = pointer.has.bind(pointer);\n  const props = () => pointer.props;\n\n  return {\n    add,\n    remove,\n    has,\n    props,\n  };\n};\n","import Service from '../abstracts/Service';\nimport debounce from '../utils/debounce';\n\n/**\n * Resize service\n *\n * ```\n * import { useResize } from '@studiometa/js/services';\n * const { add, remove, props } = useResize();\n * add(key, (props) => {});\n * remove(key);\n * props();\n * ```\n */\nclass Resize extends Service {\n  /**\n   * Bind the handler to the resize event.\n   *\n   * @return {Resize}\n   */\n  init() {\n    this.handler = debounce(() => {\n      this.trigger(this.props);\n    }).bind(this);\n\n    if (this.canUseResizeObserver) {\n      // @ts-ignore\n      this.resizeObserver = new ResizeObserver(this.handler);\n      this.resizeObserver.observe(document.documentElement);\n    } else {\n      window.addEventListener('resize', this.handler);\n    }\n\n    return this;\n  }\n\n  /**\n   * Unbind the handler from the resize event.\n   *\n   * @return {Resize}\n   */\n  kill() {\n    if (this.canUseResizeObserver) {\n      this.resizeObserver.disconnect();\n    } else {\n      window.removeEventListener('resize', this.handler);\n    }\n    delete this.resizeObserver;\n\n    return this;\n  }\n\n  /**\n   * Get resize props.\n   *\n   * @type {Object}\n   */\n  get props() {\n    const props = {\n      width: window.innerWidth,\n      height: window.innerHeight,\n      ratio: window.innerWidth / window.innerHeight,\n      orientation: 'square',\n    };\n\n    if (props.ratio > 1) {\n      props.orientation = 'landscape';\n    }\n\n    if (props.ratio < 1) {\n      props.orientation = 'portrait';\n    }\n\n    if (this.breakpointElement) {\n      props.breakpoint = this.breakpoint;\n      props.breakpoints = this.breakpoints;\n    }\n\n    return props;\n  }\n\n  /**\n   * The element holding the breakpoints data.\n   * @return {HTMLElement}\n   */\n  get breakpointElement() {\n    return document.querySelector('[data-breakpoint]') || null;\n  }\n\n  /**\n   * Get the current breakpoint.\n   * @return {String}\n   */\n  get breakpoint() {\n    return window\n      .getComputedStyle(this.breakpointElement, '::before')\n      .getPropertyValue('content')\n      .replace(/\"/g, '');\n  }\n\n  /**\n   * Get all breakpoints.\n   * @return {Array}\n   */\n  get breakpoints() {\n    const breakpoints = window\n      .getComputedStyle(this.breakpointElement, '::after')\n      .getPropertyValue('content')\n      .replace(/\"/g, '');\n\n    return breakpoints.split(',');\n  }\n\n  /**\n   * Test if we can use the `ResizeObserver` API.\n   * @return {Boolean}\n   */\n  get canUseResizeObserver() {\n    // @ts-ignore\n    return typeof window.ResizeObserver !== 'undefined';\n  }\n}\n\nlet resize = null;\n\nexport default () => {\n  if (!resize) {\n    resize = new Resize();\n  }\n\n  const add = resize.add.bind(resize);\n  const remove = resize.remove.bind(resize);\n  const has = resize.has.bind(resize);\n  const props = () => resize.props;\n\n  return {\n    add,\n    remove,\n    has,\n    props,\n  };\n};\n","import Service from '../abstracts/Service';\nimport throttle from '../utils/throttle';\nimport debounce from '../utils/debounce';\nimport nextFrame from '../utils/nextFrame';\n\n/**\n * Scroll service\n *\n * ```\n * import { useScroll } from '@studiometa/js-toolkit/services';\n * const { add, remove, props } = useScroll();\n * add(key, (props) => {});\n * remove(key);\n * props();\n * ```\n */\nclass Scroll extends Service {\n  /** @type {Number} The y scroll position. */\n  y = window.pageYOffset;\n\n  /** @type {Number} The y previous scroll position. */\n  yLast = window.pageYOffset;\n\n  /** @type {Number} The x scroll position. */\n  x = window.pageXOffset;\n\n  /** @type {Number} The x previous scroll position. */\n  xLast = window.pageXOffset;\n\n  /**\n   * Bind the handler to the scroll event.\n   *\n   * @return {Scroll}\n   */\n  init() {\n    const debounced = debounce(() => {\n      this.trigger(this.props);\n      nextFrame(() => {\n        this.trigger(this.props);\n      });\n    }, 50);\n\n    this.handler = throttle(() => {\n      this.trigger(this.props);\n\n      // Reset changed flags at the end of the scroll event\n      debounced();\n    }, 32).bind(this);\n\n    // Fire the `scrolled` method on document scroll\n    document.addEventListener('scroll', this.handler, { passive: true });\n    return this;\n  }\n\n  /**\n   * Unbind the handler from the scroll event.\n   *\n   * @return {Scroll}\n   */\n  kill() {\n    document.removeEventListener('scroll', this.handler);\n    return this;\n  }\n\n  /**\n   * Get scroll props.\n   *\n   * @type {Object}\n   */\n  get props() {\n    this.yLast = this.y;\n    this.xLast = this.x;\n\n    // Check scroll Y\n    if (window.pageYOffset !== this.y) {\n      this.y = window.pageYOffset;\n    }\n\n    // Check scroll x\n    if (window.pageXOffset !== this.x) {\n      this.x = window.pageXOffset;\n    }\n\n    return {\n      x: this.x,\n      y: this.y,\n      changed: {\n        x: this.x !== this.xLast,\n        y: this.y !== this.yLast,\n      },\n      last: {\n        x: this.xLast,\n        y: this.yLast,\n      },\n      delta: {\n        x: this.x - this.xLast,\n        y: this.y - this.yLast,\n      },\n      progress: {\n        x: this.max.x === 0 ? 1 : this.x / this.max.x,\n        y: this.max.y === 0 ? 1 : this.y / this.max.y,\n      },\n      max: this.max,\n    };\n  }\n\n  /**\n   * Get scroll max values.\n   *\n   * @type {Object}\n   */\n  get max() {\n    return {\n      x: (document.scrollingElement || document.body).scrollWidth - window.innerWidth,\n      y: (document.scrollingElement || document.body).scrollHeight - window.innerHeight,\n    };\n  }\n}\n\nlet scroll = null;\n\nexport default () => {\n  if (!scroll) {\n    scroll = new Scroll();\n  }\n\n  const add = scroll.add.bind(scroll);\n  const remove = scroll.remove.bind(scroll);\n  const has = scroll.has.bind(scroll);\n  const props = () => scroll.props;\n\n  return {\n    add,\n    remove,\n    has,\n    props,\n  };\n};\n","export default {\n  ENTER: 13,\n  SPACE: 32,\n  TAB: 9,\n  ESC: 27,\n  LEFT: 37,\n  UP: 38,\n  RIGHT: 39,\n  DOWN: 40,\n};\n","import Service from '../abstracts/Service';\nimport keyCodes from '../utils/keyCodes';\n\n/**\n * Scroll service\n *\n * ```\n * import { useKey } from '@studiometa/js-toolkit/services';\n * const { add, remove, props } = useKey();\n * add(key, (props) => {});\n * remove(key);\n * props();\n * ```\n */\nclass Key extends Service {\n  /** @type {Object} The event object. */\n  event = {};\n\n  /**\n   * Used to accumulate the number of times the `keydown` event has been triggered.\n   * @type {Number}\n   */\n  triggered = 0;\n\n  /** @type {Object} The previous event object. */\n  previousEvent = {};\n\n  /**\n   * Bind the handler to the keyboard event.\n   *\n   * @return {Key}\n   */\n  init() {\n    this.handler = (event) => {\n      this.event = event;\n      this.trigger(this.props);\n    };\n    document.addEventListener('keydown', this.handler, { passive: false });\n    document.addEventListener('keyup', this.handler, { passive: false });\n    return this;\n  }\n\n  /**\n   * Unbind the handler from the keyboard event.\n   *\n   * @return {Key}\n   */\n  kill() {\n    document.removeEventListener('keydown', this.handler);\n    document.removeEventListener('keyup', this.handler);\n    return this;\n  }\n\n  /**\n   * Get keyboard props.\n   *\n   * @type {Object}\n   */\n  get props() {\n    const keys = Object.entries(keyCodes).reduce((acc, [name, code]) => {\n      acc[name] = code === this.event.keyCode;\n      return acc;\n    }, {});\n\n    if (!this.previousEvent.type) {\n      this.triggered = 0;\n    }\n\n    if (this.event.type === 'keydown' && this.previousEvent.type === 'keydown') {\n      this.triggered += 1;\n    } else {\n      this.triggered = 1;\n    }\n\n    this.previousEvent = this.event;\n\n    return {\n      event: this.event,\n      triggered: this.triggered,\n      direction: this.event.type === 'keydown' ? 'down' : 'up',\n      isUp: this.event.type === 'keyup',\n      isDown: this.event.type === 'keydown',\n      ...keys,\n    };\n  }\n}\n\nlet key = null;\n\nexport default () => {\n  if (!key) {\n    key = new Key();\n  }\n\n  const add = key.add.bind(key);\n  const remove = key.remove.bind(key);\n  const has = key.has.bind(key);\n  const props = () => key.props;\n\n  return {\n    add,\n    remove,\n    has,\n    props,\n  };\n};\n","import usePointer from '../../services/pointer';\nimport useRaf from '../../services/raf';\nimport useResize from '../../services/resize';\nimport useScroll from '../../services/scroll';\nimport useKey from '../../services/key';\nimport { hasMethod, callMethod } from './utils';\n\n/**\n * @typedef {import('./index').default} Base\n */\n\n/**\n * Init the given service and bind it to the given instance.\n *\n * @param  {Base}     instance The Base instance.\n * @param  {String}   method   The instance to test for binding\n * @param  {Function} service  The service `use...` function\n * @return {Function}          A function to unbind the service\n */\nfunction initService(instance, method, service) {\n  if (!hasMethod(instance, method)) {\n    return () => {};\n  }\n\n  const { add, remove } = service();\n  add(\n    instance.$id,\n    /**\n     * @param {any[]} args\n     */\n    (...args) => {\n      callMethod(instance, method, ...args);\n    }\n  );\n\n  return () => remove(instance.$id);\n}\n\n/**\n * Use the services.\n * @param  {Base} instance A Base class instance.\n * @return {Array}         A list of unbind methods.\n */\nexport default function bindServices(instance) {\n  const unbindMethods = [\n    initService(instance, 'scrolled', useScroll),\n    initService(instance, 'resized', useResize),\n    initService(instance, 'ticked', useRaf),\n    initService(instance, 'moved', usePointer),\n    initService(instance, 'keyed', useKey),\n  ];\n\n  // Fire the `loaded` method on window load\n  // @todo remove this? or move it elsewhere?\n  if (hasMethod(instance, 'loaded')) {\n    /**\n     * @param {Event} event\n     */\n    const loadedHandler = (event) => {\n      callMethod(instance, 'loaded', { event });\n    };\n    window.addEventListener('load', loadedHandler);\n    unbindMethods.push(() => {\n      window.removeEventListener('load', loadedHandler);\n    });\n  }\n\n  return unbindMethods;\n}\n","// eslint-disable-next-line import/no-cycle\nimport Base from './index';\nimport getAllProperties from '../../utils/object/getAllProperties';\nimport { debug } from './utils';\n\n/**\n * Bind event handler methods to the root HTML element.\n *\n * @param  {Base}  instance     A Base instance.\n * @param  {Array} eventMethods A list of methods to bind.\n * @return {Array}              A list of unbind functions.\n */\nfunction bindRootEvents(instance, eventMethods) {\n  return eventMethods.map((eventMethod) => {\n    const eventName = eventMethod.replace(/^on/, '').toLowerCase();\n\n    const handler = (...args) => {\n      debug(instance, eventMethod, instance.$el, ...args);\n      instance[eventMethod](...args);\n    };\n\n    instance.$el.addEventListener(eventName, handler);\n\n    return () => {\n      instance.$el.removeEventListener(eventName, handler);\n    };\n  });\n}\n\n/**\n * Bind event handler methods to refs HTML element.\n *\n * @param  {Base}  instance     A Base instance.\n * @param  {Array} eventMethods A list of methods to bind.\n * @return {Array}              A list of unbind functions.\n */\nfunction bindRefsEvents(instance, eventMethods) {\n  const unbindMethods = [];\n\n  Object.entries(instance.$refs).forEach(([refName, $refOrRefs]) => {\n    const $refs = Array.isArray($refOrRefs) ? $refOrRefs : [$refOrRefs];\n    const refEventMethod = `on${refName.replace(/^\\w/, (c) => c.toUpperCase())}`;\n\n    eventMethods\n      .filter((eventMethod) => eventMethod.startsWith(refEventMethod))\n      .forEach((eventMethod) => {\n        $refs.forEach(($ref, index) => {\n          const eventName = eventMethod.replace(refEventMethod, '').toLowerCase();\n          const handler = (...args) => {\n            debug(instance, eventMethod, $ref, ...args, index);\n            instance[eventMethod](...args, index);\n          };\n\n          debug(instance, 'binding ref event', refName, eventName);\n\n          if ($ref instanceof Base) {\n            // eslint-disable-next-line no-param-reassign\n            $ref = $ref.$el;\n          }\n\n          /** @type {HTMLElement} */ ($ref).addEventListener(eventName, handler);\n          const unbindMethod = () => {\n            debug(instance, 'unbinding ref event', eventMethods);\n            /** @type {HTMLElement} */ ($ref).removeEventListener(eventName, handler);\n          };\n\n          unbindMethods.push(unbindMethod);\n        });\n      });\n  });\n\n  return unbindMethods;\n}\n\n/**\n * Bind event handler methods to children Base instance.\n * @param  {Base}  instance     A Base instance.\n * @param  {Array} eventMethods A list of methods to bind.\n * @return {Array}              A list of unbind functions.\n */\nfunction bindChildrenEvents(instance, eventMethods) {\n  const unbindMethods = [];\n\n  Object.entries(instance.$children).forEach(([childName, $children]) => {\n    const childEventMethod = `on${childName.replace(/^\\w/, (c) => c.toUpperCase())}`;\n\n    eventMethods\n      .filter((eventMethod) => eventMethod.startsWith(childEventMethod))\n      .forEach((eventMethod) => {\n        $children.forEach(\n          /**\n           * @param {Base} $child\n           * @param {Number} index\n           */\n          ($child, index) => {\n            const eventName = eventMethod.replace(childEventMethod, '').toLowerCase();\n            const handler = (...args) => {\n              debug(instance, eventMethod, $child, ...args, index);\n              instance[eventMethod](...args, index);\n            };\n\n            debug(instance, 'binding child event', childName, eventName);\n\n            const unbindMethod = $child.$on(eventName, handler);\n            unbindMethods.push(() => {\n              debug(instance, 'unbinding child event', childName, eventName);\n              unbindMethod();\n            });\n          }\n        );\n      });\n  });\n\n  return unbindMethods;\n}\n\n/**\n * Bind ref and children component's events to their corresponding method.\n *\n * @param  {Base} instance  A Base instance.\n * @return {Array}          A list of methods to unbind the events.\n */\nexport default function bindEvents(instance) {\n  const ROOT_EVENT_REGEX = /^on[A-Z][a-z]+$/;\n  const REFS_CHILDREN_EVENT_REGEX = /^on([A-Z][a-z]+)([A-Z][a-z]+)+$/;\n\n  // Get all event methods\n  const eventMethods = getAllProperties(instance).reduce(\n    (acc, [name]) => {\n      // Testing camelCase with one word: onEvent.\n      if (ROOT_EVENT_REGEX.test(name)) {\n        acc.root.push(name);\n        return acc;\n      }\n\n      // Testing camelCase with more than two words: onRefEvent.\n      if (REFS_CHILDREN_EVENT_REGEX.test(name)) {\n        acc.refsOrChildren.push(name);\n      }\n\n      return acc;\n    },\n    { root: [], refsOrChildren: [] }\n  );\n\n  const unbindMethods = [\n    ...bindRootEvents(instance, eventMethods.root),\n    ...bindRefsEvents(instance, eventMethods.refsOrChildren),\n    ...bindChildrenEvents(instance, eventMethods.refsOrChildren),\n  ];\n\n  return unbindMethods;\n}\n","import nanoid from 'nanoid/non-secure';\nimport autoBind from '../../utils/object/autoBind';\nimport EventManager from '../EventManager';\nimport { callMethod, debug, log, getConfig } from './utils';\n// eslint-disable-next-line import/no-cycle\nimport { getChildren, getComponentElements } from './children';\nimport { getOptions } from './options';\nimport { getRefs } from './refs';\nimport { mountComponents, destroyComponents } from './components';\nimport bindServices from './services';\n// eslint-disable-next-line import/no-cycle\nimport bindEvents from './events';\n\n/**\n * @typedef {typeof Base} BaseComponent\n * @typedef {() => Promise<BaseComponent | { default: BaseComponent }>} BaseAsyncComponent\n * @typedef {HTMLElement & { __base__?: Base | 'terminated' }} BaseHTMLElement\n * @typedef {{ name: string, debug: boolean, log: boolean }} BaseOptions\n * @typedef {{ [name:string]: HTMLElement | BaseComponent | Array<HTMLElement|BaseComponent> }} BaseRefs\n * @typedef {{ [nameOrSelector:string]: Array<Base | Promise<Base>> }} BaseChildren\n * @typedef {{ [nameOrSelector:string]: BaseComponent | BaseAsyncComponent }} BaseConfigComponents\n * @typedef {import('./classes/Options').OptionsSchema} BaseConfigOptions\n */\n\n/**\n * @typedef {Object} BaseConfig\n * @property {String} name\n * @property {Boolean} [debug]\n * @property {Boolean} [log]\n * @property {String[]} [refs]\n * @property {BaseConfigComponents} [components]\n * @property {BaseConfigOptions} [options]\n */\n\n/**\n * Page lifecycle class\n */\nexport default class Base extends EventManager {\n  /**\n   * The instance parent.\n   * @type {Base}\n   */\n  $parent = null;\n\n  /**\n   * The state of the component.\n   * @type {Boolean}\n   */\n  $isMounted = false;\n\n  /**\n   * This is a Base instance.\n   * @type {Boolean}\n   */\n  static $isBase = true;\n\n  /**\n   * Get properties to exclude from the autobind call.\n   * @return {Array<String|RegExp>}\n   */\n  get _excludeFromAutoBind() {\n    return [\n      '$mount',\n      '$update',\n      '$destroy',\n      '$terminate',\n      '$log',\n      '$on',\n      '$once',\n      '$off',\n      '$emit',\n      'mounted',\n      'loaded',\n      'ticked',\n      'resized',\n      'moved',\n      'keyed',\n      'scrolled',\n      'destroyed',\n      'terminated',\n    ];\n  }\n\n  /**\n   * @deprecated Use the static `config` property instead.\n   * @return {BaseConfig}\n   */\n  get config() {\n    return null;\n  }\n\n  /** @type {BaseConfig} */\n  static config;\n\n  /**\n   * Get the component's refs.\n   * @return {BaseRefs}\n   */\n  get $refs() {\n    return getRefs(this, this.$el);\n  }\n\n  /**\n   * Get the component's children components.\n   * @return {BaseChildren}\n   */\n  get $children() {\n    const { components } = getConfig(this);\n    return getChildren(this, this.$el, components || {});\n  }\n\n  /**\n   * Class constructor where all the magic takes place.\n   *\n   * @param {BaseHTMLElement} element The component's root element dd.\n   */\n  constructor(element) {\n    super();\n\n    if (!element) {\n      throw new Error('The root element must be defined.');\n    }\n\n    const { name } = getConfig(this);\n\n    /** @type {String} */\n    this.$id = `${name}-${nanoid()}`;\n\n    /** @type {BaseHTMLElement} */\n    this.$el = element;\n\n    /** @type {Boolean} */\n    this.$isMounted = false;\n\n    /** @type {BaseOptions} */\n    this.$options = getOptions(this, element, getConfig(this));\n\n    if (!this.$el.__base__) {\n      Object.defineProperty(this.$el, '__base__', {\n        get: () => this,\n        configurable: true,\n      });\n    }\n\n    // Autobind all methods to the instance\n    autoBind(this, {\n      exclude: [...(this._excludeFromAutoBind || [])],\n    });\n\n    let unbindMethods = [];\n    this.$on('mounted', () => {\n      mountComponents(this);\n      unbindMethods = [...bindServices(this), ...bindEvents(this)];\n      this.$isMounted = true;\n    });\n\n    this.$on('updated', () => {\n      unbindMethods.forEach((method) => method());\n      mountComponents(this);\n      unbindMethods = [...bindServices(this), ...bindEvents(this)];\n    });\n\n    this.$on('destroyed', () => {\n      this.$isMounted = false;\n      unbindMethods.forEach((method) => method());\n      destroyComponents(this);\n    });\n\n    debug(this, 'constructor', this);\n    return this;\n  }\n\n  /**\n   * Small helper to log stuff.\n   *\n   * @param  {...any} args The arguments passed to the method\n   * @return {void}\n   */\n  $log(...args) {\n    if (this.$options.log) {\n      log(this, ...args);\n    }\n  }\n\n  /**\n   * Trigger the `mounted` callback.\n   */\n  $mount() {\n    debug(this, '$mount');\n    callMethod(this, 'mounted');\n    return this;\n  }\n\n  /**\n   * Update the instance children.\n   */\n  $update() {\n    debug(this, '$update');\n    callMethod(this, 'updated');\n    return this;\n  }\n\n  /**\n   * Trigger the `destroyed` callback.\n   */\n  $destroy() {\n    debug(this, '$destroy');\n    callMethod(this, 'destroyed');\n    return this;\n  }\n\n  /**\n   * Terminate a child instance when it is not needed anymore.\n   * @return {void}\n   */\n  $terminate() {\n    debug(this, '$terminate');\n\n    // First, destroy the component.\n    this.$destroy();\n\n    // Execute the `terminated` hook if it exists\n    callMethod(this, 'terminated');\n\n    // Delete the reference to the instance\n    // delete this.$el.__base__;\n\n    // And update its status to prevent re-instantiation when accessing the\n    // parent's `$children` property\n    Object.defineProperty(this.$el, '__base__', {\n      value: 'terminated',\n      configurable: false,\n      writable: false,\n    });\n  }\n\n  /**\n   * Factory method to generate multiple instance of the class.\n   *\n   * @param  {String}      nameOrSelector The selector on which to mount each instance.\n   * @return {Array<Base>}                A list of the created instance.\n   */\n  static $factory(nameOrSelector) {\n    if (!nameOrSelector) {\n      throw new Error(\n        'The $factory method requires a component’s name or selector to be specified.'\n      );\n    }\n\n    return getComponentElements(nameOrSelector).map((el) => new this(el).$mount());\n  }\n\n  /**\n   * Hello world.\n   */\n  mounted() {}\n}\n","import Base from './abstracts/Base';\n\n/**\n * @typedef {import('./abstracts/Base').BaseComponent} BaseComponent\n */\n\n/**\n * Define a component without a class.\n *\n * @param  {Object} options The component's object\n * @return {BaseComponent}           A component's class.\n */\nexport function defineComponent(options) {\n  const { config, methods, ...hooks } = options;\n\n  if (!config) {\n    throw new Error('The `config` property is required.');\n  }\n\n  if (!config.name) {\n    throw new Error('The `config.name` property is required.');\n  }\n\n  /**\n   * Component class.\n   */\n  class Component extends Base {\n    /**\n     * Component config.\n     */\n    static config = config;\n  }\n\n  const allowedHooks = [\n    'mounted',\n    'loaded',\n    'ticked',\n    'resized',\n    'moved',\n    'keyed',\n    'scrolled',\n    'destroyed',\n    'terminated',\n  ];\n\n  const filteredHooks = Object.entries(hooks).reduce((acc, [name, fn]) => {\n    if (allowedHooks.includes(name)) {\n      acc[name] = fn;\n    } else {\n      throw new Error(\n        `\n          The \"${name}\" method is not a Base lifecycle hook,\n          it should be placed in the \"method\" property.\n          The following hooks are available: ${allowedHooks.join(', ')}\n        `\n      );\n    }\n\n    return acc;\n  }, {});\n\n  [...Object.entries(methods || {}), ...Object.entries(filteredHooks)].forEach(([name, fn]) => {\n    Component.prototype[name] = fn;\n  });\n\n  return Component;\n}\n\n/**\n * Create a Base instance with the given object configuration.\n * @param {HTMLElement|String} elementOrSelector The instance root HTML element.\n * @param {Object}             options           The Base class configuration.\n */\nexport function createBase(elementOrSelector, options) {\n  const Component = defineComponent(options);\n  /** @type {HTMLElement} */\n  const element =\n    typeof elementOrSelector === 'string'\n      ? document.querySelector(elementOrSelector)\n      : elementOrSelector;\n  return new Component(element);\n}\n\nexport default Base;\n","import isObject from '../object/isObject';\n\n/**\n * @typedef {Partial<CSSStyleDeclaration> & Record<string, string | null>} CssStyleObject\n */\n\n/**\n * Manage a list of style properties on an element.\n *\n * @param {HTMLElement}    element The element to update.\n * @param {CssStyleObject} styles  An object of styles properties and values.\n * @param {String}         method  The method to use: add or remove.\n */\nexport default function setStyles(element, styles, method = 'add') {\n  if (!element || !styles || !isObject(styles)) {\n    return;\n  }\n\n  Object.entries(styles).forEach(([prop, value]) => {\n    element.style[prop] = method === 'add' ? value : '';\n  });\n}\n\n/**\n * Add styles to an element.\n *\n * @param {HTMLElement}    element The element to update.\n * @param {CssStyleObject} styles  A string of class names.\n * @return {void}\n */\nexport function add(element, styles) {\n  setStyles(element, styles);\n}\n\n/**\n * Remove class names from an element.\n *\n * @param  {HTMLElement}    element The element to update.\n * @param  {CssStyleObject} styles  A string of class names.\n * @return {void}\n */\nexport function remove(element, styles) {\n  setStyles(element, styles, 'remove');\n}\n","/**\n * Manage a list of classes as string on an element.\n *\n * @param {HTMLElement} element    The element to update.\n * @param {String}      classNames A string of class names.\n * @param {String}      method     The method to use: add, remove or toggle.\n */\nfunction setClasses(element, classNames, method = 'add') {\n  if (!element || !classNames) {\n    return;\n  }\n\n  classNames.split(' ').forEach((className) => {\n    element.classList[method](className);\n  });\n}\n\n/**\n * Add class names to an element.\n *\n * @param {HTMLElement} element    The element to update.\n * @param {String}      classNames A string of class names.\n * @return {void}\n */\nexport function add(element, classNames) {\n  setClasses(element, classNames);\n}\n\n/**\n * Remove class names from an element.\n *\n * @param  {HTMLElement} element    The element to update.\n * @param  {String}      classNames A string of class names.\n * @return {void}\n */\nexport function remove(element, classNames) {\n  setClasses(element, classNames, 'remove');\n}\n\n/**\n * Toggle class names from an element.\n *\n * @param  {HTMLElement} element    The element to update.\n * @param  {String}      classNames A string of class names.\n * @return {void}\n */\nexport function toggle(element, classNames) {\n  setClasses(element, classNames, 'toggle');\n}\n","/* eslint no-underscore-dangle: [\"error\", { \"allow\": [\"__isTransitioning__\", \"__transitionEndHandler__\"] }] */\nimport nextFrame from '../nextFrame';\nimport * as classes from './classes';\nimport * as styles from './styles';\n\n/** WeakMap to hold the transition instances. */\nconst cache = new WeakMap();\n\n/**\n * Transition class.\n */\nclass Transition {\n  /**\n   * Is a transition currently running?\n   * @type {Boolean}\n   */\n  isTransitioning = false;\n\n  /**\n   * A callback to execute when the transition ends.\n   * @type {EventListenerOrEventListenerObject|null}\n   */\n  transitionEndHandler = null;\n\n  /**\n   * Instantiate and save the instance to the cache.\n   * @param {HTMLElement} element The HTML element.\n   */\n  constructor(element) {\n    cache.set(element, this);\n  }\n\n  /**\n   * Get the transition class attached to the given element.\n   * @param  {HTMLElement} element The HTML element concerned by the transition.\n   * @return {Transition}          The transition instance tied to the given element.\n   */\n  static getInstance(element) {\n    let instance = cache.get(element);\n\n    if (!instance) {\n      instance = new this(element);\n    }\n\n    return instance;\n  }\n}\n\n/**\n * Update either the classes or the styles of an element with the given method.\n *\n * @param {HTMLElement}   element         The element to update.\n * @param {String|Object} classesOrStyles The classes or styles to apply.\n * @param {String}        method          The method to use, one of `add` or `remove`.\n */\nexport function setClassesOrStyles(element, classesOrStyles, method = 'add') {\n  if (typeof classesOrStyles === 'string') {\n    classes[method](element, classesOrStyles, method);\n  } else {\n    styles[method](element, classesOrStyles, method);\n  }\n}\n\n/**\n * Test if the given element has a transition duration.\n *\n * @param  {HTMLElement} element The element to test.\n * @return {Boolean}             The result of the test.\n */\nfunction testTransition(element) {\n  if (typeof window === 'undefined') {\n    return false;\n  }\n\n  const { transitionDuration } = window.getComputedStyle(element);\n  return !!transitionDuration && transitionDuration !== '0s';\n}\n\n/**\n * Apply the from state.\n *\n * @param {HTMLElement}   element         The target element.\n * @param {String|Object} classesOrStyles The classes or styles definition.\n * @return {Promise}\n */\nasync function start(element, classesOrStyles) {\n  const trs = Transition.getInstance(element);\n  trs.isTransitioning = true;\n  setClassesOrStyles(element, classesOrStyles.from);\n  await nextFrame();\n  setClassesOrStyles(element, classesOrStyles.active);\n  await nextFrame();\n}\n\n/**\n * Apply the active state.\n *\n * @param {HTMLElement}   element         The target element.\n * @param {String|Object} classesOrStyles The classes or styles definition.\n * @return {Promise}\n */\nasync function next(element, classesOrStyles) {\n  const hasTransition = testTransition(element);\n\n  /* eslint-disable-next-line */\n  return new Promise(async resolve => {\n    if (hasTransition) {\n      const trs = Transition.getInstance(element);\n      trs.transitionEndHandler = resolve;\n      element.addEventListener('transitionend', trs.transitionEndHandler, false);\n    }\n    setClassesOrStyles(element, classesOrStyles.from, 'remove');\n    setClassesOrStyles(element, classesOrStyles.to);\n    await nextFrame();\n    if (!hasTransition) {\n      resolve();\n    }\n  });\n}\n\n/**\n * Apply the final state.\n *\n * @param {HTMLElement}   element         The target element.\n * @param {String|Object} classesOrStyles The classes or styles definition.\n * @param {String}        mode            Whether to remove or keep the `to`  classes/styles.\n * @return {void}\n */\nfunction end(element, classesOrStyles, mode = 'remove') {\n  const trs = Transition.getInstance(element);\n  element.removeEventListener('transitionend', trs.transitionEndHandler, false);\n  if (mode === 'remove') {\n    setClassesOrStyles(element, classesOrStyles.to, 'remove');\n  }\n  setClassesOrStyles(element, classesOrStyles.active, 'remove');\n  trs.isTransitioning = false;\n  trs.transitionEndHandler = null;\n}\n\n/**\n * Manage CSS transition with class.\n *\n * This is heavily inspired by the Vue `<transition>` component\n * and the `@barba/css` package, many thanks to them!\n *\n * @param  {HTMLElement}   element The target element.\n * @param  {String|Object} name    The name of the transition or an object with the hooks classesOrStyles.\n * @param  {String}        endMode    Whether to remove or keep the `to` classes/styles\n * @return {Promise}               A promise resolving at the end of the transition.\n */\nexport default async function transition(element, name, endMode = 'remove') {\n  const classesOrStyles =\n    typeof name === 'string'\n      ? {\n          from: `${name}-from`,\n          active: `${name}-active`,\n          to: `${name}-to`,\n        }\n      : {\n          from: '',\n          active: '',\n          to: '',\n          ...name,\n        };\n\n  const trs = Transition.getInstance(element);\n  // End any previous transition running on the element.\n  if (trs.isTransitioning) {\n    end(element, classesOrStyles);\n  }\n\n  await start(element, classesOrStyles);\n  await next(element, classesOrStyles);\n  end(element, classesOrStyles, endMode);\n  return Promise.resolve();\n}\n","import deepmerge from 'deepmerge'\nimport Base from '../../abstracts/Base';\n// eslint-disable-next-line import/no-cycle\nimport Accordion from './index';\nimport * as styles from '../../utils/css/styles';\nimport transition from '../../utils/css/transition';\n\n/**\n * @typedef {import('../../abstracts/Base').BaseOptions} BaseOptions\n * @typedef {import('../../utils/css/styles').CssStyleObject} CssStyleObject\n * @typedef {import('./index').AccordionInterface} AccordionInterface\n */\n\n/**\n * @typedef {Object} AccordionItemRefs\n * @property {HTMLElement} btn\n * @property {HTMLElement} content\n * @property {HTMLElement} container\n */\n\n/**\n * @typedef {Object} StylesOption\n * @property {String|CssStyleObject} open\n * @property {String|CssStyleObject} active\n * @property {String|CssStyleObject} closed\n */\n\n/**\n * @typedef {Object} AccordionItemOptions\n * @property {Boolean} isOpen\n * @property {{ [refName: string]: StylesOption }} styles\n */\n\n/**\n * @typedef {Object} AccordionItemInterface\n * @property {AccordionItemOptions} $options\n * @property {AccordionItemRefs} $refs\n * @property {Accordion & AccordionInterface} $parent\n */\n\n/**\n * AccordionItem class.\n */\nexport default class AccordionItem extends Base {\n  /**\n   * AccordionItem config\n   * @return {Object}\n   */\n  static config = {\n    name: 'AccordionItem',\n    refs: ['btn', 'content', 'container'],\n    options: {\n      isOpen: Boolean,\n      styles: {\n        type: Object,\n        default: () => ({\n          container: {\n            open: '',\n            active: '',\n            closed: '',\n          },\n        }),\n      },\n    },\n  };\n\n  /**\n   * Add aria-attributes on mounted.\n   * @this {AccordionItem & AccordionItemInterface}\n   */\n  mounted() {\n    if (this.$parent && this.$parent instanceof Accordion && this.$parent.$options.item) {\n      Object.entries(this.$parent.$options.item).forEach(([key, value]) => {\n        if (key in this.$options) {\n          const type = AccordionItem.config.options[key].type || AccordionItem.config.options[key];\n          if (type === Array || type === Object) {\n            this.$options[key] = deepmerge(this.$options[key], value);\n          } else {\n            this.$options[key] = value;\n          }\n        }\n      });\n    }\n\n    this.$refs.btn.setAttribute('id', this.$id);\n    this.$refs.btn.setAttribute('aria-controls', this.contentId);\n    this.$refs.content.setAttribute('aria-labelledby', this.$id);\n    this.$refs.content.setAttribute('id', this.contentId);\n\n    const { isOpen } = this.$options;\n    this.updateAttributes(isOpen);\n\n    if (!isOpen) {\n      styles.add(this.$refs.container, { visibility: 'invisible', height: '0' });\n    }\n\n    // Update refs styles on mount\n    const { container, ...otherStyles } = this.$options.styles;\n    /** @type {AccordionItemRefs} */\n    const refs = this.$refs;\n    Object.entries(otherStyles)\n      .filter(([refName]) => refs[refName])\n      .forEach(([refName, { open, closed } = { open: '', closed: '' }]) => {\n        transition(refs[refName], { to: isOpen ? open : closed }, 'keep');\n      });\n  }\n\n  /**\n   * Handler for the click event on the `btn` ref.\n   * @this {AccordionItem & AccordionItemInterface}\n   */\n  onBtnClick() {\n    if (this.$options.isOpen) {\n      this.close();\n    } else {\n      this.open();\n    }\n  }\n\n  /**\n   * Get the content ID.\n   * @return {String}\n   */\n  get contentId() {\n    return `content-${this.$id}`;\n  }\n\n  /**\n   * Update the refs' attributes according to the given type.\n   *\n   * @this {AccordionItem & AccordionItemInterface}\n   * @param  {Boolean} isOpen The state of the item.\n   */\n  updateAttributes(isOpen) {\n    this.$refs.content.setAttribute('aria-hidden', isOpen ? 'false' : 'true');\n    this.$refs.btn.setAttribute('aria-expanded', isOpen ? 'true' : 'false');\n  }\n\n  /**\n   * Open an item.\n   * @this {AccordionItem & AccordionItemInterface}\n   */\n  async open() {\n    if (this.$options.isOpen) {\n      return;\n    }\n\n    this.$log('open');\n    this.$emit('open');\n\n    this.$options.isOpen = true;\n    this.updateAttributes(this.$options.isOpen);\n\n    styles.remove(this.$refs.container, { visibility: 'invisible' });\n    const { container, ...otherStyles } = this.$options.styles;\n\n    /** @type {AccordionItemRefs} */\n    const refs = this.$refs;\n\n    await Promise.all([\n      transition(refs.container, {\n        from: { height: 0 },\n        active: container.active,\n        to: { height: `${refs.content.offsetHeight}px` },\n      }).then(() => {\n        // Remove style only if the item has not been closed before the end\n        if (this.$options.isOpen) {\n          styles.remove(refs.content, { position: 'absolute' });\n        }\n\n        return Promise.resolve();\n      }),\n      ...Object.entries(otherStyles)\n        .filter(([refName]) => refs[refName])\n        .map(([refName, { open, active, closed } = { open: '', active: '', closed: '' }]) =>\n          transition(\n            refs[refName],\n            {\n              from: closed,\n              active,\n              to: open,\n            },\n            'keep'\n          )\n        ),\n    ]);\n  }\n\n  /**\n   * Close an item.\n   * @this {AccordionItem & AccordionItemInterface}\n   */\n  async close() {\n    if (!this.$options.isOpen) {\n      return;\n    }\n\n    this.$log('close');\n    this.$emit('close');\n\n    this.$options.isOpen = false;\n\n    const height = this.$refs.container.offsetHeight;\n    styles.add(this.$refs.content, { position: 'absolute' });\n    const { container, ...otherStyles } = this.$options.styles;\n\n    /** @type {AccordionItemRefs} */\n    const refs = this.$refs;\n\n    await Promise.all([\n      transition(refs.container, {\n        from: { height: `${height}px` },\n        active: container.active,\n        to: { height: '0' },\n      }).then(() => {\n        // Add end styles only if the item has not been re-opened before the end\n        if (!this.$options.isOpen) {\n          styles.add(refs.container, { height: '0', visibility: 'invisible' });\n          this.updateAttributes(this.$options.isOpen);\n        }\n        return Promise.resolve();\n      }),\n      ...Object.entries(otherStyles)\n        .filter(([refName]) => refs[refName])\n        .map(([refName, { open, active, closed } = { open: '', active: '', closed: '' }]) =>\n          transition(\n            refs[refName],\n            {\n              from: open,\n              active,\n              to: closed,\n            },\n            'keep'\n          )\n        ),\n    ]);\n  }\n}\n","import Base from '../../abstracts/Base';\n// eslint-disable-next-line import/no-cycle\nimport AccordionItem from './AccordionItem';\n\n/**\n * @typedef {Object} AccordionRefs\n * @property {HTMLElement[]} btn\n * @property {HTMLElement[]} content\n */\n\n/**\n * @typedef {Object} AccordionOptions\n * @property {Boolean} autoclose\n * @property {Object} item\n */\n\n/**\n * @typedef {Object} AccordionChildren\n * @property {AccordionItem[]} AccordionItem\n */\n\n/**\n * @typedef {Object} AccordionInterface\n * @property {AccordionOptions} $options\n * @property {AccordionRefs} $refs\n * @property {AccordionChildren} $children\n */\n\n/**\n * Accordion class.\n */\nexport default class Accordion extends Base {\n  /**\n   * Accordion config.\n   */\n  static config = {\n    name: 'Accordion',\n    options: {\n      autoclose: Boolean,\n      item: Object,\n    },\n    components: {\n      AccordionItem,\n    },\n  };\n\n  /**\n   * @type {Array<Function>}\n   */\n  unbindMethods = [];\n\n  /**\n   * Init autoclose behavior on mounted.\n   * @this {Accordion & AccordionInterface}\n   * @return {Promise<void>}\n   */\n  async mounted() {\n    // /** @type {AccordionItem[]} */\n    // const items = await Promise.all(\n    //   this.$children.AccordionItem.map((item) =>\n    //     item instanceof Promise ? item : Promise.resolve(item)\n    //   )\n    // );\n\n    this.unbindMethods = this.$children.AccordionItem.map((item, index) => {\n      const unbindOpen = item.$on('open', () => {\n        this.$emit('open', item, index);\n        if (this.$options.autoclose) {\n          // @ts-ignore\n          this.$children.AccordionItem.filter((el, i) => index !== i).forEach((it) => it.close());\n        }\n      });\n      const unbindClose = item.$on('close', () => {\n        this.$emit('close', item, index);\n      });\n\n      return () => {\n        unbindOpen();\n        unbindClose();\n      };\n    });\n  }\n\n  /**\n   * Destroy autoclose behavior on destroyed.\n   * @return {void}\n   */\n  destroyed() {\n    this.unbindMethods.forEach((unbind) => unbind());\n  }\n}\n","import keyCodes from './keyCodes';\n\nconst FOCUSABLE_ELEMENTS = [\n  'a[href]:not([tabindex^=\"-\"]):not([inert])',\n  'area[href]:not([tabindex^=\"-\"]):not([inert])',\n  'input:not([disabled]):not([inert])',\n  'select:not([disabled]):not([inert])',\n  'textarea:not([disabled]):not([inert])',\n  'button:not([disabled]):not([inert])',\n  'iframe:not([tabindex^=\"-\"]):not([inert])',\n  'audio:not([tabindex^=\"-\"]):not([inert])',\n  'video:not([tabindex^=\"-\"]):not([inert])',\n  '[contenteditable]:not([tabindex^=\"-\"]):not([inert])',\n  '[tabindex]:not([tabindex^=\"-\"]):not([inert])',\n];\n\n/**\n * Use a trap/untrap tabs logic.\n *\n * @return {Object} An object containing the trap and untrap methods.\n */\nexport default function useFocusTrap() {\n  let focusedBefore;\n\n  /**\n   * Save the current active element.\n   *\n   * @return {void}\n   */\n  function saveActiveElement() {\n    focusedBefore = document.activeElement;\n  }\n\n  /**\n   * Trap tab navigation inside the given element.\n   *\n   * @param  {HTMLElement} element The element in which to trap the tabulations.\n   * @param  {KeyboardEvent}       event   The keydown or keyup event.\n   * @return {void}\n   */\n  function trap(element, event) {\n    if (event.keyCode !== keyCodes.TAB) {\n      return;\n    }\n\n    // Save the previous focused element\n    if (!focusedBefore) {\n      focusedBefore = document.activeElement;\n    }\n\n    /** @type {Array<HTMLElement>} */\n    const focusableChildren = Array.from(element.querySelectorAll(FOCUSABLE_ELEMENTS.join(', ')));\n    const focusedItemIndex =\n      document.activeElement instanceof HTMLElement\n        ? focusableChildren.indexOf(document.activeElement)\n        : -1;\n\n    if (!focusableChildren.length) {\n      return;\n    }\n\n    if (focusedItemIndex < 0) {\n      focusableChildren[0].focus();\n      event.preventDefault();\n    }\n\n    // If the SHIFT key is being pressed while tabbing (moving backwards) and\n    // the currently focused item is the first one, move the focus to the last\n    // focusable item from the dialog element\n    if (event.shiftKey && focusedItemIndex === 0) {\n      focusableChildren[focusableChildren.length - 1].focus();\n      event.preventDefault();\n    }\n\n    // If the SHIFT key is not being pressed (moving forwards) and the currently\n    // focused item is the last one, move the focus to the first focusable item\n    // from the dialog element\n    else if (!event.shiftKey && focusedItemIndex === focusableChildren.length - 1) {\n      focusableChildren[0].focus();\n      event.preventDefault();\n    }\n  }\n\n  /**\n   * Untrap the tab navigation.\n   *\n   * @return {void}\n   */\n  function untrap() {\n    if (focusedBefore && typeof focusedBefore.focus === 'function') {\n      focusedBefore.focus();\n      focusedBefore = null;\n    }\n  }\n\n  return { trap, untrap, saveActiveElement };\n}\n","import Base from '../abstracts/Base';\nimport transition from '../utils/css/transition';\nimport focusTrap from '../utils/focusTrap';\n\nconst { trap, untrap, saveActiveElement } = focusTrap();\n\n/**\n * @typedef {import('../abstracts/Base').BaseOptions} BaseOptions\n */\n\n/**\n * @typedef {Object} ModalRefs\n * @property {HTMLElement} close\n * @property {HTMLElement} container\n * @property {HTMLElement} content\n * @property {HTMLElement} modal\n * @property {HTMLElement} open\n * @property {HTMLElement} overlay\n */\n\n/**\n * @typedef {Object} ModalOptions\n * @property {String} move      A selector where to move the modal to.\n * @property {String} autofocus A selector for the element to set the focus to when the modal opens.\n * @property {Object} styles    The styles for the different state of the modal.\n */\n\n/**\n * @typedef {Object} ModalInterface\n * @property {ModalRefs} $refs\n * @property {ModalOptions} $options\n * @property {Boolean} isOpen\n * @property {Comment} refModalPlaceholder\n * @property {HTMLElement} refModalParentBackup\n * @property {Function} refModalUnbindGetRefFilter\n */\n\n/**\n * Modal class.\n */\nexport default class Modal extends Base {\n  /**\n   * Modal options.\n   */\n  static config = {\n    name: 'Modal',\n    refs: ['close', 'container', 'content', 'modal', 'open', 'overlay'],\n    options: {\n      move: String,\n      autofocus: { type: String, default: '[autofocus]' },\n      styles: {\n        type: Object,\n        default: () => ({\n          modal: {\n            closed: {\n              opacity: 0,\n              pointerEvents: 'none',\n              visibility: 'hidden',\n            },\n          },\n        }),\n      },\n    },\n  };\n\n  /**\n   * Open the modal on click on the `open` ref.\n   *\n   * @return {Function} The component's `open` method.\n   */\n  get onOpenClick() {\n    return this.open;\n  }\n\n  /**\n   * Close the modal on click on the `close` ref.\n   *\n   * @return {Function} The component's `close` method.\n   */\n  get onCloseClick() {\n    return this.close;\n  }\n\n  /**\n   * Close the modal on click on the `overlay` ref.\n   *\n   * @return {Function} The component's `close` method.\n   */\n  get onOverlayClick() {\n    return this.close;\n  }\n\n  /**\n   * Initialize the component's behaviours.\n   *\n   * @this {Modal & ModalInterface}\n   */\n  mounted() {\n    this.isOpen = false;\n    this.close();\n\n    if (this.$options.move) {\n      const target = document.querySelector(this.$options.move) || document.body;\n      const refsBackup = this.$refs;\n\n      this.refModalPlaceholder = document.createComment('');\n      this.refModalParentBackup = this.$refs.modal.parentElement || this.$el;\n      this.refModalParentBackup.insertBefore(this.refModalPlaceholder, this.$refs.modal);\n\n      this.refModalUnbindGetRefFilter = this.$on(\n        'get:refs',\n        /**\n         * @param {ModalRefs} refs\n         */\n        (refs) => {\n          Object.entries(refsBackup).forEach(([key, ref]) => {\n            if (!refs[key]) {\n              refs[key] = ref;\n            }\n          });\n        }\n      );\n      target.appendChild(this.$refs.modal);\n    }\n\n    return this;\n  }\n\n  /**\n   * Unbind all events on destroy.\n   *\n   * @this {Modal & ModalInterface}\n   * @return {Modal} The Modal instance.\n   */\n  destroyed() {\n    this.close();\n\n    if (this.$options.move && this.refModalParentBackup) {\n      this.refModalParentBackup.insertBefore(this.$refs.modal, this.refModalPlaceholder);\n      this.refModalUnbindGetRefFilter();\n      this.refModalPlaceholder.remove();\n      delete this.refModalPlaceholder;\n      delete this.refModalParentBackup;\n      delete this.refModalUnbindGetRefFilter;\n    }\n\n    return this;\n  }\n\n  /**\n   * Close the modal on `ESC` and trap the tabulation.\n   *\n   * @this {Modal & ModalInterface}\n   * @param  {Object}        options\n   * @param  {KeyboardEvent} options.event  The original keyboard event\n   * @param  {Boolean}       options.isUp   Is it a keyup event?\n   * @param  {Boolean}       options.isDown Is it a keydown event?\n   * @param  {Boolean}       options.ESC    Is it the ESC key?\n   */\n  keyed({ event, isUp, isDown, ESC }) {\n    if (!this.isOpen) {\n      return;\n    }\n\n    if (isDown) {\n      trap(this.$refs.modal, event);\n    }\n\n    if (ESC && isUp) {\n      this.close();\n    }\n  }\n\n  /**\n   * Open the modal.\n   *\n   * @this {Modal & ModalInterface}\n   * @return {Promise<Modal>} The Modal instance.\n   */\n  async open() {\n    if (this.isOpen) {\n      return Promise.resolve(this);\n    }\n\n    this.$refs.modal.setAttribute('aria-hidden', 'false');\n    document.documentElement.style.overflow = 'hidden';\n\n    this.isOpen = true;\n    this.$emit('open');\n\n    /** @type {ModalRefs} */\n    const refs = this.$refs;\n\n    return Promise.all(\n      Object.entries(this.$options.styles).map(\n        ([refName, { open, active, closed } = { open: '', active: '', closed: '' }]) =>\n          transition(\n            refs[refName],\n            {\n              from: closed,\n              active,\n              to: open,\n            },\n            'keep'\n          )\n      )\n    ).then(() => {\n      if (this.$options.autofocus && this.$refs.modal.querySelector(this.$options.autofocus)) {\n        saveActiveElement();\n        /** @type {HTMLElement} */\n        const autofocusElement = this.$refs.modal.querySelector(this.$options.autofocus);\n        autofocusElement.focus();\n      }\n      return Promise.resolve(this);\n    });\n  }\n\n  /**\n   * Close the modal.\n   *\n   * @this {Modal & ModalInterface}\n   * @return {Promise<Modal>} The Modal instance.\n   */\n  async close() {\n    if (!this.isOpen) {\n      return Promise.resolve(this);\n    }\n\n    this.$refs.modal.setAttribute('aria-hidden', 'true');\n    document.documentElement.style.overflow = '';\n\n    this.isOpen = false;\n    untrap();\n    this.$emit('close');\n\n    /** @type {ModalRefs} */\n    const refs = this.$refs;\n\n    return Promise.all(\n      Object.entries(this.$options.styles).map(\n        ([refName, { open, active, closed } = { open: '', active: '', closed: '' }]) =>\n          transition(\n            refs[refName],\n            {\n              from: open,\n              active,\n              to: closed,\n            },\n            'keep'\n          )\n      )\n    ).then(() => Promise.resolve(this));\n  }\n}\n","import Base from '../abstracts/Base';\nimport transition from '../utils/css/transition';\n\n/**\n * @typedef {import('../abstracts/Base').BaseOptions} BaseOptions\n */\n\n/**\n * @typedef {Object} TabItem\n * @property {HTMLElement} btn\n * @property {HTMLElement} content\n * @property {Boolean} isEnabled\n */\n\n/**\n * @typedef {Object} TabsRefs\n * @property {HTMLElement[]} btn\n * @property {HTMLElement[]} content\n */\n\n/**\n * @typedef {Object} TabsOptions\n * @property {Object} styles\n */\n\n/**\n * @typedef {Object} TabsInterface\n * @property {TabsOptions} $options\n * @property {TabsRefs} $refs\n * @property {Array<TabItem>} items\n */\n\n/**\n * Tabs class.\n */\nexport default class Tabs extends Base {\n  /**\n   * Tabs config.\n   */\n  static config = {\n    name: 'Tabs',\n    refs: ['btn[]', 'content[]'],\n    options: {\n      styles: {\n        type: Object,\n        default: () => ({\n          content: {\n            closed: {\n              position: 'absolute',\n              opacity: '0',\n              pointerEvents: 'none',\n              visibility: 'hidden',\n            },\n          },\n        }),\n      },\n    },\n  };\n\n  /**\n   * Initialize the component's behaviours.\n   * @this {Tabs & TabsInterface}\n   */\n  mounted() {\n    this.items = this.$refs.btn.map((btn, index) => {\n      const id = `${this.$id}-${index}`;\n      const content = this.$refs.content[index];\n      btn.setAttribute('id', id);\n      content.setAttribute('aria-labelledby', id);\n\n      const item = { btn, content, isEnabled: index > 0 };\n      if (index > 0) {\n        this.disableItem(item);\n      } else {\n        this.enableItem(item);\n      }\n      return item;\n    });\n\n    return this;\n  }\n\n  /**\n   * Switch tab on button click.\n   *\n   * @this {Tabs & TabsInterface}\n   * @param  {Event}  event The click event object.\n   * @param  {Number} index The index of the clicked button.\n   * @return {void}\n   */\n  onBtnClick(event, index) {\n    this.items.forEach((item, i) => {\n      if (i !== index) {\n        this.disableItem(item);\n      }\n    });\n\n    this.enableItem(this.items[index]);\n  }\n\n  /**\n   * Enable the given tab and its associated content.\n   *\n   * @this {Tabs & TabsInterface}\n   * @param  {TabItem}       item The item to enable.\n   * @return {Promise<Tabs & TabsInterface>}      Tabs instance.\n   */\n  async enableItem(item) {\n    if (!item || item.isEnabled) {\n      return Promise.resolve(this);\n    }\n\n    item.isEnabled = true;\n    const { btn, content } = item;\n    const btnStyles = this.$options.styles.btn || {};\n    const contentStyles = this.$options.styles.content || {};\n\n    content.setAttribute('aria-hidden', 'false');\n    this.$emit('enable', item);\n\n    return Promise.all([\n      transition(\n        btn,\n        {\n          from: btnStyles.closed,\n          active: btnStyles.active,\n          to: btnStyles.open,\n        },\n        'keep'\n      ),\n      transition(\n        content,\n        {\n          from: contentStyles.closed,\n          active: contentStyles.active,\n          to: contentStyles.open,\n        },\n        'keep'\n      ),\n    ]).then(() => Promise.resolve(this));\n  }\n\n  /**\n   * Disable the given tab and its associated content.\n   *\n   * @this {Tabs & TabsInterface}\n   * @param  {TabItem}       item The item to disable.\n   * @return {Promise<Tabs & TabsInterface>}      The Tabs instance.\n   */\n  async disableItem(item) {\n    if (!item || !item.isEnabled) {\n      return Promise.resolve(this);\n    }\n\n    item.isEnabled = false;\n    const { btn, content } = item;\n    const btnStyles = this.$options.styles.btn || {};\n    const contentStyles = this.$options.styles.content || {};\n\n    content.setAttribute('aria-hidden', 'true');\n    this.$emit('disable', item);\n\n    return Promise.all([\n      transition(\n        btn,\n        {\n          from: btnStyles.open,\n          active: btnStyles.active,\n          to: btnStyles.closed,\n        },\n        'keep'\n      ),\n      transition(\n        content,\n        {\n          from: contentStyles.open,\n          active: contentStyles.active,\n          to: contentStyles.closed,\n        },\n        'keep'\n      ),\n    ]).then(() => Promise.resolve(this));\n  }\n}\n","import useResize from '../services/resize';\n\n/**\n * @typedef {import('../abstracts/Base').default} Base\n * @typedef {import('../abstracts/Base').BaseComponent} BaseComponent\n */\n\n/**\n * Test the breakpoins of the given Base instance and return the hook to call.\n *\n * @param  {Array<[String[], Base]>} breakpoints The breakpoints's data.\n */\nfunction testBreakpoints(breakpoints) {\n  const { breakpoint } = useResize().props();\n  breakpoints.forEach(([breakpointKeys, instance]) => {\n    if (breakpointKeys.includes(breakpoint)) {\n      instance.$mount();\n    } else {\n      instance.$destroy();\n    }\n  });\n}\n\n/**\n * Prepare the components.\n * @param {Base} instance\n * @param {Array<[String, BaseComponent]>} breakpoints\n * @return {Array<[String, Base]>}\n */\nfunction mountComponents(instance, breakpoints) {\n  return breakpoints.map(([bk, ComponentClass]) => {\n    const child = new ComponentClass(instance.$el);\n    Object.defineProperty(child, '$parent', { get: () => instance });\n    return [bk, child];\n  });\n}\n\n/**\n * A cache object to hold each Base sub-instances.\n * @type {Object}\n */\nconst instances = {};\n\n/**\n * BreakpointManager class.\n * @param {BaseComponent} BaseClass\n * @param {Array<[String, BaseComponent]>} breakpoints\n * @return {BaseComponent}\n */\nexport default (BaseClass, breakpoints) => {\n  if (!Array.isArray(breakpoints)) {\n    throw new Error('[withBreakpointManager] The `breakpoints` parameter must be an array.');\n  }\n\n  if (breakpoints.length < 2) {\n    throw new Error('[withBreakpointManager] You must define at least 2 breakpoints.');\n  }\n\n  const { add, props } = useResize();\n\n  // Do nothing if no breakpoint has been defined.\n  // @see https://js-toolkit.meta.fr/services/resize.html#breakpoint\n  if (!props().breakpoint) {\n    throw new Error(`The \\`BreakpointManager\\` class requires breakpoints to be defined.`);\n  }\n\n  return class BreakpointManager extends BaseClass {\n    /**\n     * Watch for the document resize to test the breakpoints.\n     * @this {Base & {}}\n     * @param {HTMLElement} element The component's root element.\n     */\n    constructor(element) {\n      super(element);\n\n      if (!instances[this.$id]) {\n        instances[this.$id] = mountComponents(this, breakpoints);\n      }\n\n      testBreakpoints(instances[this.$id]);\n\n      add(`BreakpointManager-${this.$id}`, () => {\n        testBreakpoints(instances[this.$id]);\n      });\n\n      return this;\n    }\n\n    /**\n     * Override the default $mount method to prevent component's from being\n     * mounted when they should not.\n     * @this {Base}\n     * @return {this}\n     */\n    $mount() {\n      if (!instances[this.$id]) {\n        instances[this.$id] = mountComponents(this, breakpoints);\n      }\n\n      testBreakpoints(instances[this.$id]);\n\n      return super.$mount();\n    }\n\n    /**\n     * Destroy all instances when the main one is destroyed.\n     * @return {this}\n     */\n    $destroy() {\n      if (Array.isArray(instances[this.$id])) {\n        instances[this.$id].forEach(([, instance]) => {\n          instance.$destroy();\n        });\n      }\n\n      return super.$destroy();\n    }\n  };\n};\n","import useResize from '../services/resize';\n\n/**\n * @typedef {import('../abstracts/Base').default} Base\n * @typedef {import('../abstracts/Base').BaseComponent} BaseComponent\n */\n\n/**\n * @typedef {Object} WithBreakpointObserverOptions\n * @property {String} [activeBreakpoints]\n * @property {String} [inactiveBreakpoints]\n */\n\n/**\n * @typedef {Object} WithBreakpointObserverInterface\n * @property {WithBreakpointObserverOptions} $options\n */\n\n/**\n * Test the breakpoins of the given Base instance and return the hook to call.\n *\n * @param  {Base & WithBreakpointObserverInterface}   instance The component's instance.\n * @return {String}          The action to trigger.\n */\nfunction testBreakpoints(instance, breakpoint = useResize().props().breakpoint) {\n  const { activeBreakpoints, inactiveBreakpoints } = instance.$options;\n  const isInActiveBreakpoint =\n    activeBreakpoints && activeBreakpoints.split(' ').includes(breakpoint);\n  const isInInactiveBreakpoint =\n    inactiveBreakpoints && inactiveBreakpoints.split(' ').includes(breakpoint);\n\n  if (\n    (activeBreakpoints && isInActiveBreakpoint) ||\n    (inactiveBreakpoints && !isInInactiveBreakpoint)\n  ) {\n    return '$mount';\n  }\n\n  return '$destroy';\n}\n\n/**\n * Test if the given instance is configured for breakpoints.\n * @param  {Base & WithBreakpointObserverInterface}    instance A Base class instance.\n * @return {Boolean}          True if configured correctly, false otherwise.\n */\nfunction hasBreakpointConfiguration(instance) {\n  const { activeBreakpoints, inactiveBreakpoints } = instance.$options;\n  return Boolean(activeBreakpoints || inactiveBreakpoints);\n}\n\n/**\n * Test if the given instance has a conflicting configuration for breakpoints.\n * @param  {Base & WithBreakpointObserverInterface} instance A Base class instance.\n * @return {void}\n */\nfunction testConflictingBreakpointConfiguration(instance) {\n  const { activeBreakpoints, inactiveBreakpoints, name } = instance.$options;\n  if (activeBreakpoints && inactiveBreakpoints) {\n    throw new Error(\n      `[${name}] Incorrect configuration: the \\`activeBreakpoints\\` and \\`inactiveBreakpoints\\` are not compatible.`\n    );\n  }\n}\n\n/**\n * BreakpointObserver class.\n *\n * @param {BaseComponent} BaseClass The Base class to extend from.\n * @return {BaseComponent}\n */\nexport default (BaseClass) =>\n  class BreakpointObserver extends BaseClass {\n    static config = {\n      ...(BaseClass.config || {}),\n      name: `${BaseClass?.config?.name ?? ''}WithBreakpointObserver`,\n      options: {\n        ...(BaseClass?.config?.options || {}),\n        activeBreakpoints: String,\n        inactiveBreakpoints: String,\n      },\n    };\n\n    /**\n     * Watch for the document resize to test the breakpoints.\n     * @this {Base & WithBreakpointObserverInterface}\n     * @param  {HTMLElement} element The component's root element.\n     */\n    constructor(element) {\n      super(element);\n\n      const { add, has, remove, props } = useResize();\n      const { name } = this.$options;\n\n      // Do nothing if no breakpoint has been defined.\n      // @see https://js-toolkit.meta.fr/services/resize.html#breakpoint\n      if (!props().breakpoint) {\n        throw new Error(\n          `[${name}] The \\`BreakpointObserver\\` class requires breakpoints to be defined.`\n        );\n      }\n\n      const key = `BreakpointObserver-${this.$id}`;\n\n      // Watch change on the `data-options` attribute to emit the `set:options` event.\n      const mutationObserver = new MutationObserver(([mutation]) => {\n        if (\n          mutation.type === 'attributes' &&\n          (mutation.attributeName === 'data-options' ||\n            mutation.attributeName.startsWith('data-option-'))\n        ) {\n          // Stop here silently when no breakpoint configuration given.\n          if (!hasBreakpointConfiguration(this)) {\n            this.$mount();\n            remove(key);\n            return;\n          }\n\n          testConflictingBreakpointConfiguration(this);\n\n          if (!has(key)) {\n            add(key, ({ breakpoint }) => {\n              const action = testBreakpoints(this, breakpoint);\n              this[action]();\n            });\n          }\n        }\n      });\n      mutationObserver.observe(this.$el, { attributes: true });\n\n      // Stop here silently when no breakpoint configuration given.\n      if (!hasBreakpointConfiguration(this)) {\n        return this;\n      }\n\n      testConflictingBreakpointConfiguration(this);\n      add(key, ({ breakpoint }) => {\n        const action = testBreakpoints(this, breakpoint);\n        this[action]();\n      });\n\n      return this;\n    }\n\n    /**\n     * Override the default $mount method to prevent component's from being\n     * mounted when they should not.\n     * @return {this}\n     */\n    $mount() {\n      // Execute normal behavior when no breakpoint configuration given.\n      if (!hasBreakpointConfiguration(this)) {\n        return super.$mount();\n      }\n\n      const action = testBreakpoints(this);\n      if (action === '$mount') {\n        return super.$mount();\n      }\n\n      return this;\n    }\n  };\n","import { debug } from '../abstracts/Base/utils';\n\n/**\n * @typedef {import('../abstracts/Base').default} Base\n * @typedef {import('../abstracts/Base').BaseComponent} BaseComponent\n */\n\n/**\n * @typedef {Object} WithIntersectionObserverOptions\n * @property {Object} intersectionObserver\n */\n\n/**\n * @typedef {Object} WithIntersectionObserverInterface\n * @property {WithIntersectionObserverOptions} $options\n * @property {IntersectionObserver} $observer\n * @property {(entries: IntersectionObserverEntry[]) => void} intersected\n */\n\n/**\n * Create an array of number between 0 and 1 from the given length.\n * @param  {Number} length The length of the array.\n * @return {Array}        An array of number.\n */\nfunction createArrayOfNumber(length) {\n  return [...new Array(length + 1)].map((val, index) => index / length);\n}\n\n/**\n * IntersectionObserver decoration.\n * @param {BaseComponent} BaseClass The Base class to extend.\n * @param {Object} [defaultOptions] The options for the IntersectionObserver instance.\n * @return {BaseComponent}\n */\nexport default (BaseClass, defaultOptions = { threshold: createArrayOfNumber(100) }) =>\n  class extends BaseClass {\n    /**\n     * Add the `intersected` method to the list of method to exclude from the `autoBind` call.\n     */\n    get _excludeFromAutoBind() {\n      return [...(super._excludeFromAutoBind || []), 'intersected'];\n    }\n\n    static config = {\n      ...(BaseClass.config || {}),\n      name: `${BaseClass?.config?.name ?? ''}WithIntersectionObserver`,\n      options: {\n        ...(BaseClass?.config?.options || {}),\n        intersectionObserver: Object,\n      },\n    };\n\n    /**\n     * Create an observer when the class in instantiated.\n     *\n     * @this {Base & WithIntersectionObserverInterface}\n     * @param  {HTMLElement} element The component's root element.\n     */\n    constructor(element) {\n      super(element);\n\n      if (!this.intersected || typeof this.intersected !== 'function') {\n        throw new Error('[withIntersectionObserver] The `intersected` method must be defined.');\n      }\n\n      this.$observer = new IntersectionObserver(\n        (entries) => {\n          debug(this, 'intersected', entries);\n          this.$emit('intersected', entries);\n          this.intersected(entries);\n        },\n        { ...defaultOptions, ...(this.$options.intersectionObserver || {}) }\n      );\n\n      if (this.$isMounted) {\n        this.$observer.observe(this.$el);\n      }\n\n      this.$on('mounted', () => {\n        this.$observer.observe(this.$el);\n      });\n\n      this.$on('destroyed', () => {\n        this.$observer.unobserve(this.$el);\n      });\n\n      return this;\n    }\n  };\n","/**\n * Format a CSS transform matrix with the given values.\n *\n * @param  {Object} transform\n * @param  {Number} [transform.scaleX]     The scale on the x axis.\n * @param  {Number} [transform.scaleY]     The scale on the y axis.\n * @param  {Number} [transform.skewX]      The skew on the x axis.\n * @param  {Number} [transform.skewY]      The skew on the y axis.\n * @param  {Number} [transform.translateX] The translate on the x axis.\n * @param  {Number} [transform.translateY] The translate on the y axis.\n * @return {String}                        A formatted CSS matrix transform.\n */\nexport default function matrix(transform) {\n  // eslint-disable-next-line no-param-reassign\n  transform = transform || {};\n  return `matrix(${transform.scaleX || 1}, ${transform.skewX || 0}, ${transform.skewY || 0}, ${\n    transform.scaleY || 1\n  }, ${transform.translateX || 0}, ${transform.translateY || 0})`;\n}\n","/**\n * Smooth step from currentValue to targetValue\n *\n * @param  {Number} targetValue we want to reech\n * @param  {Number} currentValue\n * @param  {Number} speed to reech target value\n * @return {Number}\n */\nexport default function damp(targetValue, currentValue, speed = 0.5) {\n  const value = currentValue + (targetValue - currentValue) * speed;\n  return Math.abs(targetValue - currentValue) < 0.001 ? targetValue : value;\n}\n","/**\n * Interpolate the ratio between a given interval.\n *\n * @param  {Number} min   The interval minimum value.\n * @param  {Number} max   The inverval maximum value.\n * @param  {Number} ratio The ratio to get.\n * @return {Number}       The value between min and max corresponding to ratio.\n */\nexport default function lerp(min, max, ratio) {\n  return (1 - ratio) * min + ratio * max;\n}\n","/**\n * Maps the value from one range of [inputMin..inputMax] to another range of [outputMin..outputMax].\n *\n * @param  {Number} value     The value to map.\n * @param  {Number} inputMin  The input's minimum value.\n * @param  {Number} inputMax  The input's maximum value.\n * @param  {Number} outputMin The output's minimum value.\n * @param  {Number} outputMax The intput's maximum value.\n * @return {Number}           The input value mapped to the output range.\n */\nexport default function map(value, inputMin, inputMax, outputMin, outputMax) {\n  return ((value - inputMin) * (outputMax - outputMin)) / (inputMax - inputMin) + outputMin;\n}\n","/**\n * Round a value with a given number of decimals.\n *\n * @param  {Number} value    The number to round.\n * @param  {Number} decimals The number of decimals to keep.\n * @return {Number}          A rounded number to the given decimals length.\n */\nexport default function round(value, decimals = 0) {\n  return Number(value.toFixed(decimals));\n}\n"],"names":["getAllProperties","object","props","proto","Object","getPrototypeOf","prototype","getOwnPropertyNames","map","name","reduce","acc","val","autoBind","instance","options","exclude","include","filter","key","match","pattern","test","some","forEach","descriptor","getOwnPropertyDescriptor","value","bind","EventManager","_events","$on","event","listener","Array","isArray","push","$off","index","indexOf","splice","$emit","args","apply","$once","handler","getConfig","config","constructor","Error","console","warn","msg","log","debug","$options","hasMethod","obj","callMethod","method","$isMounted","call","getChild","el","ComponentClass","parent","__base__","child","defineProperty","get","then","module","default","getComponentElements","nameOrSelector","element","document","selector","elements","from","querySelectorAll","length","getChildren","components","children","entries","isObject","toString","getAttributeName","noCase","delimiter","Options","schema","String","Number","Boolean","isObjectConfig","types","includes","type","defaultValue","set","enumerable","attributeName","hasAttribute","setAttribute","getAttribute","deepmerge","JSON","parse","setTimeout","stringify","TypeError","removeAttribute","getOptions","getterConfig","staticConfig","assign","propsToInclude","prop","propsToExclude","keys","propName","undefined","legacyOptions","dataset","err","optionName","optionValue","scopeSelectorPonyfill","uniqId","list","attr","scopedSelector","getRefs","definedRefs","refs","allRefs","childrenRefs","$id","ref","$refs","$ref","refName","$realRef","endsWith","replace","mountComponent","component","Promise","$mount","mountComponents","$children","values","$child","destroyComponent","$destroy","destroyComponents","Service","callbacks","Map","isInit","init","kill","add","callback","has","size","remove","delete","trigger","throttle","fn","delay","lastCall","now","Date","getTime","debounce","timeout","clearTimeout","getRaf","window","requestAnimationFrame","nextFrame","raf","resolve","Raf","isTicking","loop","time","performance","isTouchEvent","TouchEvent","Pointer","isDown","y","innerHeight","yLast","x","innerWidth","xLast","useRaf","hasRaf","debounced","updateValues","downHandler","upHandler","documentElement","addEventListener","once","passive","removeEventListener","touches","clientY","clientX","changed","last","delta","progress","max","pointer","Resize","canUseResizeObserver","resizeObserver","ResizeObserver","observe","disconnect","width","height","ratio","orientation","breakpointElement","breakpoint","breakpoints","querySelector","getComputedStyle","getPropertyValue","split","resize","Scroll","pageYOffset","pageXOffset","scrollingElement","body","scrollWidth","scrollHeight","scroll","ENTER","SPACE","TAB","ESC","LEFT","UP","RIGHT","DOWN","Key","triggered","previousEvent","keyCodes","code","keyCode","direction","isUp","initService","service","bindServices","unbindMethods","useScroll","useResize","usePointer","useKey","loadedHandler","bindRootEvents","eventMethods","eventMethod","eventName","toLowerCase","$el","bindRefsEvents","$refOrRefs","refEventMethod","c","toUpperCase","startsWith","Base","unbindMethod","bindChildrenEvents","childName","childEventMethod","bindEvents","ROOT_EVENT_REGEX","REFS_CHILDREN_EVENT_REGEX","root","refsOrChildren","_excludeFromAutoBind","$parent","nanoid","configurable","$log","$update","$terminate","writable","$factory","mounted","$isBase","defineComponent","methods","hooks","Component","allowedHooks","filteredHooks","join","createBase","elementOrSelector","setStyles","styles","style","setClasses","classNames","className","classList","toggle","cache","WeakMap","Transition","isTransitioning","transitionEndHandler","getInstance","setClassesOrStyles","classesOrStyles","classes","testTransition","transitionDuration","start","trs","active","next","hasTransition","to","end","mode","transition","endMode","AccordionItem","Accordion","item","btn","contentId","content","isOpen","updateAttributes","container","visibility","otherStyles","open","closed","onBtnClick","close","all","offsetHeight","position","unbindOpen","autoclose","i","it","unbindClose","destroyed","unbind","FOCUSABLE_ELEMENTS","useFocusTrap","focusedBefore","saveActiveElement","activeElement","trap","focusableChildren","focusedItemIndex","HTMLElement","focus","preventDefault","shiftKey","untrap","focusTrap","Modal","onOpenClick","onCloseClick","onOverlayClick","move","target","refsBackup","refModalPlaceholder","createComment","refModalParentBackup","modal","parentElement","insertBefore","refModalUnbindGetRefFilter","appendChild","keyed","overflow","autofocus","autofocusElement","opacity","pointerEvents","Tabs","items","id","isEnabled","disableItem","enableItem","btnStyles","contentStyles","testBreakpoints","breakpointKeys","bk","instances","BaseClass","BreakpointManager","activeBreakpoints","inactiveBreakpoints","isInActiveBreakpoint","isInInactiveBreakpoint","hasBreakpointConfiguration","testConflictingBreakpointConfiguration","BreakpointObserver","mutationObserver","MutationObserver","mutation","action","attributes","createArrayOfNumber","defaultOptions","threshold","intersected","$observer","IntersectionObserver","intersectionObserver","unobserve","matrix","transform","scaleX","skewX","skewY","scaleY","translateX","translateY","damp","targetValue","currentValue","speed","Math","abs","lerp","min","inputMin","inputMax","outputMin","outputMax","round","decimals","toFixed"],"mappings":"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"}