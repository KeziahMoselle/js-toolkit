{"version":3,"file":"full.umd.js","sources":["../node_modules/nanoid/non-secure/index.js","../src/utils/object/getAllProperties.js","../src/utils/object/autoBind.js","../src/abstracts/EventManager.js","../src/abstracts/Base/utils.js","../src/abstracts/Base/children.js","../node_modules/deepmerge/dist/cjs.js","../src/abstracts/Base/options.js","../src/abstracts/Base/refs.js","../src/abstracts/Base/components.js","../src/abstracts/Service.js","../src/utils/throttle.js","../src/utils/debounce.js","../src/utils/nextFrame.js","../src/services/raf.js","../src/services/pointer.js","../src/services/resize.js","../src/services/scroll.js","../src/utils/keyCodes.js","../src/services/key.js","../src/abstracts/Base/services.js","../src/abstracts/Base/events.js","../src/abstracts/Base/index.js","../src/index.js","../src/utils/object/isObject.js","../src/utils/css/styles.js","../src/utils/css/classes.js","../src/utils/css/transition.js","../src/components/Accordion/AccordionItem.js","../src/components/Accordion/index.js","../src/components/MediaQuery.js","../src/utils/focusTrap.js","../src/components/Modal.js","../src/components/Tabs.js","../src/decorators/withBreakpointManager.js","../src/decorators/withBreakpointObserver.js","../src/decorators/withIntersectionObserver.js","../src/utils/css/matrix.js","../src/utils/math/damp.js","../src/utils/math/lerp.js","../src/utils/math/map.js","../src/utils/math/round.js","../src/utils/history.js"],"sourcesContent":["// This alphabet uses a-z A-Z 0-9 _- symbols.\n// Symbols are generated for smaller size.\n// -_zyxwvutsrqponmlkjihgfedcba9876543210ZYXWVUTSRQPONMLKJIHGFEDCBA\nvar url = '-_'\n// Loop from 36 to 0 (from z to a and 9 to 0 in Base36).\nvar i = 36\nwhile (i--) {\n  // 36 is radix. Number.prototype.toString(36) returns number\n  // in Base36 representation. Base36 is like hex, but it uses 0â€“9 and a-z.\n  url += i.toString(36)\n}\n// Loop from 36 to 10 (from Z to A in Base36).\ni = 36\nwhile (i-- - 10) {\n  url += i.toString(36).toUpperCase()\n}\n\n/**\n * Generate URL-friendly unique ID. This method use non-secure predictable\n * random generator with bigger collision probability.\n *\n * @param {number} [size=21] The number of symbols in ID.\n *\n * @return {string} Random string.\n *\n * @example\n * const nanoid = require('nanoid/non-secure')\n * model.id = nanoid() //=> \"Uakgb_J5m9g-0JDMbcJqL\"\n *\n * @name nonSecure\n * @function\n */\nmodule.exports = function (size) {\n  var id = ''\n  i = size || 21\n  // Compact alternative for `for (var i = 0; i < size; i++)`\n  while (i--) {\n    // `| 0` is compact and faster alternative for `Math.floor()`\n    id += url[Math.random() * 64 | 0]\n  }\n  return id\n}\n","/**\n * Gets all non-builtin properties up the prototype chain.\n *\n * @param  {Object} object The object to get the propeties from.\n * @param  {Array}  props  The already existing properties.\n * @return {Array}         An array of properties and their value.\n */\nexport default function getAllProperties(object, props = []) {\n  const proto = Object.getPrototypeOf(object);\n\n  if (proto === Object.prototype) {\n    return props;\n  }\n\n  return getAllProperties(\n    proto,\n    Object.getOwnPropertyNames(proto)\n      .map((name) => [name, proto])\n      .reduce((acc, val) => [...acc, val], props)\n  );\n}\n","import getAllProperties from './getAllProperties';\n\n/**\n * Auto-bind methods to an instance.\n *\n * @param  {Object}               instance        The instance.\n * @param  {Array<String|RegExp>} options.include Methods to include.\n * @param  {Array<String|RegExp>} options.exclude Methods to exclude.\n * @return {Object}                               The instance.\n */\nexport default function autoBind(instance, { include, exclude } = {}) {\n  const filter = (key) => {\n    const match = (pattern) => (typeof pattern === 'string' ? key === pattern : pattern.test(key));\n\n    if (include) {\n      return include.some(match);\n    }\n\n    if (exclude) {\n      return !exclude.some(match);\n    }\n\n    return true;\n  };\n\n  getAllProperties(instance)\n    .filter(([key]) => key !== 'constructor' && filter(key))\n    .forEach(([key, object]) => {\n      const descriptor = Object.getOwnPropertyDescriptor(object, key);\n      if (descriptor && typeof descriptor.value === 'function') {\n        instance[key] = instance[key].bind(instance);\n      }\n    });\n\n  return instance;\n}\n","/* eslint no-underscore-dangle: [\"error\", { \"allow\": [\"_events\"] }] */\n/**\n * Event management class.\n *\n * @method $on    Bind a given function to the given event.\n * @method $off   Unbind the given function from the given event.\n * @method $once  Bind a given function to the given event once.\n * @method $emit  Emit an event with custom props.\n */\nexport default class EventManager {\n  /** @type {Object} An object to store the events */\n  _events = {};\n\n  /**\n   * Bind a listener function to an event.\n   *\n   * @param  {String}   event    Name of the event.\n   * @param  {Function} listener Function to be called.\n   * @return {Function}          A function to unbind the listener.\n   */\n  $on(event, listener) {\n    if (!Array.isArray(this._events[event])) {\n      this._events[event] = [];\n    }\n    this._events[event].push(listener);\n\n    return () => {\n      this.$off(event, listener);\n    };\n  }\n\n  /**\n   * Unbind a listener function from an event.\n   *\n   * @param  {String}       event    Name of the event.\n   * @param  {Function}     listener Function to be removed.\n   * @return {EventManager}          The current instance.\n   */\n  $off(event, listener) {\n    // If no event specified, we remove them all.\n    if (!event) {\n      this._events = {};\n      return this;\n    }\n    // If no listener have been specified, we remove all\n    // the listeners for the given event.\n    if (!listener) {\n      this._events[event] = [];\n      return this;\n    }\n\n    const index = this._events[event].indexOf(listener);\n\n    if (index > -1) {\n      this._events[event].splice(index, 1);\n    }\n\n    return this;\n  }\n\n  /**\n   * Emits an event.\n   *\n   * @param  {String}       event Name of the event.\n   * @param  {Array}        args  The arguments to apply to the functions bound to this event.\n   * @return {EventManager}       The current instance.\n   */\n  $emit(event, ...args) {\n    if (!Array.isArray(this._events[event])) {\n      return this;\n    }\n\n    this._events[event].forEach((listener) => {\n      listener.apply(this, args);\n    });\n    return this;\n  }\n\n  /**\n   * Bind a listener function to an event for one execution only.\n   *\n   * @param  {String}       event    Name of the event.\n   * @param  {String}       listener Function to be called.\n   * @return {EventManager}          The current instance.\n   */\n  $once(event, listener) {\n    const instance = this;\n    this.$on(event, function handler(...args) {\n      instance.$off(event, handler);\n      listener.apply(instance, args);\n    });\n    return this;\n  }\n}\n","/**\n * Verbose debug for the component.\n *\n * @param  {...any} args The arguments passed to the method\n * @return {void}\n */\nexport function debug(instance, ...args) {\n  return instance.$options.debug\n    ? window.console.log.apply(window, [instance.config.name, ...args])\n    : () => {};\n}\n\n/**\n * Test if an object has a method.\n *\n * @param  {Object}  obj The object to test\n * @param  {String}  fn  The method's name\n * @return {Boolean}\n */\nexport function hasMethod(obj, name) {\n  return typeof obj[name] === 'function';\n}\n\n/**\n * Call the given method while applying the given arguments.\n *\n * @param {String} method The method to call\n * @param {...any} args   The arguments to pass to the method\n */\nexport function callMethod(instance, method, ...args) {\n  debug(instance, 'callMethod', method, ...args);\n\n  // Prevent duplicate call of `mounted` and `destroyed`\n  // methods based on the component status\n  if (\n    (method === 'destroyed' && !instance.$isMounted) ||\n    (method === 'mounted' && instance.$isMounted)\n  ) {\n    debug(instance, 'not', method, 'because the method has already been triggered once.');\n    return instance;\n  }\n\n  instance.$emit(method, ...args);\n\n  // We always emit an event, but we do not call the method if it does not exist\n  if (!hasMethod(instance, method)) {\n    return instance;\n  }\n\n  instance[method].call(instance, ...args);\n  debug(instance, method, instance, ...args);\n\n  return instance;\n}\n","/**\n * Get a child component.\n *\n * @param  {HTMLElement}  el             The root element of the child component.\n * @param  {Base|Promise} ComponentClass A Base class or a Promise for async components.\n * @param  {Base}         parent         The parent component instance.\n * @return {Base|Promise}                A Base instance or a Promise resolving to a Base instance.\n */\nfunction getChild(el, ComponentClass, parent) {\n  // Return existing instance if it exists\n  if (el.__base__) {\n    return el.__base__;\n  }\n\n  // Return a new instance if the component class is a child of the Base class\n  if (ComponentClass.__isBase__) {\n    Object.defineProperty(ComponentClass.prototype, '__isChild__', { value: true });\n    const child = new ComponentClass(el);\n    Object.defineProperty(child, '$parent', { get: () => parent });\n    return child;\n  }\n\n  // Resolve async components\n  const asyncComponent = ComponentClass().then((module) => {\n    return getChild(el, module.default ? module.default : module, parent);\n  });\n\n  asyncComponent.__isAsync__ = true;\n\n  return asyncComponent;\n}\n\n/**\n * Get a list of elements based on the name of a component.\n * @param  {String}             nameOrSelector The name or selector to used for this component.\n * @param  {HTMLElement}        element        The root element on which to query the selector, defaults to `document`.\n * @return {Array<HTMLElement>}                A list of elements on which the component should be mounted.\n */\nexport function getComponentElements(nameOrSelector, element = document) {\n  const selector = `[data-component=\"${nameOrSelector}\"]`;\n  let elements = [];\n\n  try {\n    elements = Array.from(element.querySelectorAll(selector));\n    // eslint-disable-next-line no-empty\n  } catch {}\n\n  // If no child component found with the default selector, try a classic DOM selector\n  if (elements.length === 0) {\n    elements = Array.from(element.querySelectorAll(nameOrSelector));\n  }\n\n  return elements;\n}\n\n/**\n * Get child components.\n * @param  {Base}        instance   The component's instance.\n * @param  {HTMLElement} element    The component's root element\n * @param  {Object}      components The children components' classes\n * @return {null|Object}            Returns `null` if no child components are defined or an object of all child component instances\n */\nexport function getChildren(instance, element, components) {\n  const children = Object.entries(components).reduce((acc, [name, ComponentClass]) => {\n    const elements = getComponentElements(name, element);\n\n    if (elements.length === 0) {\n      return acc;\n    }\n\n    acc[name] = elements\n      .map((el) => getChild(el, ComponentClass, instance))\n      // Filter out terminated children\n      .filter((el) => el !== 'terminated');\n\n    if (acc[name].length === 0) {\n      delete acc[name];\n    }\n\n    return acc;\n  }, {});\n\n  instance.$emit('get:children', children);\n  return children;\n}\n\nexport default {\n  getChildren,\n};\n","'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn target.propertyIsEnumerable(symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n","import merge from 'deepmerge';\n\n/**\n * Get a component's options.\n *\n * @param  {Base}        instance The component's instance.\n * @param  {HTMLElement} element  The component's root element.\n * @param  {Object}      config   The component's default config.\n * @return {Object}               The component's merged options.\n */\nexport function getOptions(instance, element, config) {\n  let options = {};\n  if (element.dataset.options) {\n    try {\n      options = JSON.parse(element.dataset.options);\n    } catch (err) {\n      throw new Error('Can not parse the `data-options` attribute. Is it a valid JSON string?');\n    }\n  }\n\n  options = merge(config, options);\n  instance.$emit('get:options', options);\n  return options;\n}\n\n/**\n * Set a component instance options.\n *\n * @param {Base}        instance   The component's instance.\n * @param {HTMLElement} element    The component's root element.\n * @param {Object}      newOptions The new options object.\n */\nexport function setOptions(instance, element, newOptions) {\n  let options = {};\n  if (element.dataset.options) {\n    try {\n      options = JSON.parse(element.dataset.options);\n    } catch (err) {\n      throw new Error('Can not parse the `data-options` attribute. Is it a valid JSON string?');\n    }\n  }\n  options = merge(options, newOptions);\n  element.dataset.options = JSON.stringify(options);\n}\n\nexport default {\n  getOptions,\n  setOptions,\n};\n","/**\n * A ponyfill for the CSS `:scope` selector which is not supported in IE11.\n * The following method will return an array of elements similare to the\n * `:scope ${selector}` selector.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/:scope\n * @see https://github.com/jonathantneal/element-qsa-scope\n *\n * @param  {HTMLElement} element  The element from which the scope is taken.\n * @param  {String}      selector The children selector.\n * @param  {String}      uniqId   A uniq ID to prefix the selector with.\n * @return {Array}                A list of elements.\n */\nexport function scopeSelectorPonyfill(element, selector, uniqId) {\n  let list = [];\n\n  try {\n    list = Array.from(element.querySelectorAll(`:scope ${selector}`));\n  } catch (err) {\n    const attr = `data-uniq-id`;\n    const scopedSelector = `[${attr}=\"${uniqId}\"] ${selector}`;\n    element.setAttribute(attr, uniqId);\n    list = Array.from(element.querySelectorAll(scopedSelector));\n    element.removeAttribute(attr);\n  }\n\n  return list;\n}\n\n/**\n * Get all refs of a component.\n *\n * @param  {Base}        instance The component's instance.\n * @param  {HTMLElement} element  The component's root element.\n * @return {Object}               Return an object containing all the component's refs.\n */\nexport function getRefs(instance, element) {\n  const allRefs = Array.from(element.querySelectorAll(`[data-ref]`));\n  const childrenRefs = scopeSelectorPonyfill(element, '[data-component] [data-ref]', instance.$id);\n  const elements = allRefs.filter((ref) => !childrenRefs.includes(ref));\n\n  const refs = elements.reduce(($refs, $ref) => {\n    let refName = $ref.dataset.ref;\n    const $realRef = $ref.__base__ ? $ref.__base__ : $ref;\n\n    if (refName.endsWith('[]')) {\n      refName = refName.replace(/\\[\\]$/, '');\n\n      if (!$refs[refName]) {\n        $refs[refName] = [];\n      }\n    }\n\n    if ($refs[refName]) {\n      if (Array.isArray($refs[refName])) {\n        $refs[refName].push($realRef);\n      } else {\n        $refs[refName] = [$refs[refName], $realRef];\n      }\n    } else {\n      $refs[refName] = $realRef;\n    }\n\n    return $refs;\n  }, {});\n\n  instance.$emit('get:refs', refs);\n  return refs;\n}\n\nexport default {\n  getRefs,\n};\n","import { debug } from './utils';\n\n/**\n * Mount a given component which might be async.\n *\n * @param  {Base|Promise} component The component to mount.\n * @return {void}\n */\nfunction mountComponent(component) {\n  if (component.__isAsync__) {\n    component.then((instance) => instance.$mount());\n  } else {\n    component.$mount();\n  }\n}\n\n/**\n * Mount children components of a given instance.\n *\n * @param  {Base} instance The parent component's instance.\n * @return {void}\n */\nexport function mountComponents(instance) {\n  if (!instance.$children) {\n    return;\n  }\n\n  debug(instance, 'mountComponents', instance.$children);\n\n  Object.values(instance.$children).forEach(($child) => {\n    $child.forEach(mountComponent);\n  });\n}\n\n/**\n * Destroy a given component which might be async.\n *\n * @param  {Base|Promise} component The component to destroy.\n * @return {void}\n */\nfunction destroyComponent(component) {\n  if (component.__isAsync__) {\n    component.then((instance) => instance.$destroy());\n  } else {\n    component.$destroy();\n  }\n}\n\n/**\n * Destroy children components of a given instance.\n *\n * @param  {Base} instance The parent component's instance.\n * @return {void}\n */\nexport function destroyComponents(instance) {\n  if (!instance.$children) {\n    return;\n  }\n  debug(instance, 'destroyComponents', instance.$children);\n\n  Object.values(instance.$children).forEach(($child) => {\n    $child.forEach(destroyComponent);\n  });\n}\n","/**\n * Service abstract class\n */\nexport default class Service {\n  /**\n   * Class constructor, used to test the abstract class implementation.\n   *\n   * @return {Service} The current instance\n   */\n  constructor() {\n    this.callbacks = new Map();\n    this.isInit = false;\n  }\n\n  /**\n   * Getter to get the services properties.\n   * This getter MUST be implementer by the service extending this class.\n   * @return {Object}\n   */\n  get props() {\n    throw new Error('The `props` getter must be implemented.');\n  }\n\n  /**\n   * Method to initialize the service behaviors.\n   * This method MUST be implemented by the service extending this class.\n   *\n   * @return {Service} The current instance\n   */\n  init() {\n    throw new Error('The `init` method must be implemented.');\n  }\n\n  /**\n   * Method to kill the service behaviors.\n   * This method MUST be implemented by the service extending this class.\n   *\n   * @return {Service} The current instance\n   */\n  kill() {\n    throw new Error('The `kill` method must be implemented.');\n  }\n\n  /**\n   * Add a callback.\n   *\n   * @param  {String}   key      The callback's identifier\n   * @param  {Function} callback The callback function\n   * @return {Service}           The current instance\n   */\n  add(key, callback) {\n    if (this.has(key)) {\n      throw new Error(`A callback with the key \\`${key}\\` has already been registered.`);\n    }\n\n    // Initialize the service when we add the first callback\n    if (this.callbacks.size === 0 && !this.isInit) {\n      this.init();\n      this.isInit = true;\n    }\n\n    this.callbacks.set(key, callback);\n    return this;\n  }\n\n  /**\n   * Test if a callback with the given key has already been added.\n   *\n   * @param  {String}  key The identifier to test\n   * @return {Boolean}     Whether or not the identifier already exists\n   */\n  has(key) {\n    return this.callbacks.has(key);\n  }\n\n  /**\n   * Get the callback tied to the given key.\n   *\n   * @param  {String}   key The identifier to get\n   * @return {Function}     The callback function\n   */\n  get(key) {\n    return this.callbacks.get(key);\n  }\n\n  /**\n   * Remove the callback tied to the given key.\n   *\n   * @param  {String} key The identifier to remove\n   * @return {Service}    The current instance\n   */\n  remove(key) {\n    this.callbacks.delete(key);\n\n    // Kill the service when we remove the last callback\n    if (this.callbacks.size === 0 && this.isInit) {\n      this.kill();\n      this.isInit = false;\n    }\n\n    return this;\n  }\n\n  /**\n   * Trigger each added callback with the given arguments.\n   *\n   * @param  {Array}   args All the arguments to apply to the callback\n   * @return {Service}      The current instance\n   */\n  trigger(...args) {\n    this.callbacks.forEach((callback) => {\n      callback(...args);\n    });\n\n    return this;\n  }\n}\n","/**\n * Simple throttling helper that limits a\n * function to only run once every {delay}ms\n *\n * @param {Function} fn    The function to throttle\n * @param {Number}   delay The delay in ms\n */\nexport default function throttle(fn, delay = 16) {\n  let lastCall = 0;\n  return (...args) => {\n    const now = new Date().getTime();\n    if (now - lastCall < delay) {\n      return false;\n    }\n    lastCall = now;\n    return fn(...args);\n  };\n}\n","/**\n * Returns a function, that, as long as it continues to be invoked,\n * will not be triggered. The function will be called after it stops\n * being called for N milliseconds.\n *\n * @param {Function} fn    The function to call\n * @param {Number}   delay The delay in ms to wait before calling the function\n */\nexport default function debounce(fn, delay = 300) {\n  let timeout;\n  return (...args) => {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => {\n      fn(...args);\n    }, delay);\n  };\n}\n","/**\n * RequestAnimation frame polyfill.\n * @see  https://github.com/vuejs/vue/blob/ec78fc8b6d03e59da669be1adf4b4b5abf670a34/dist/vue.runtime.esm.js#L7355\n * @type {Function}\n */\nexport const getRaf = () =>\n  typeof window !== 'undefined' && window.requestAnimationFrame\n    ? window.requestAnimationFrame.bind(window)\n    : setTimeout;\n\n/**\n * Execute a callback in the next frame.\n * @param  {Function} fn The callback function to execute.\n * @return {Promise}\n */\nexport default function nextFrame(fn = () => {}) {\n  const raf = getRaf();\n  return new Promise((resolve) => {\n    raf(() => raf(() => resolve(fn())));\n  });\n}\n","import Service from '../abstracts/Service';\nimport { getRaf } from '../utils/nextFrame';\n\n/**\n * Tick service\n *\n * ```\n * import { useRaf } from '@studiometa/js/services';\n * const { add, remove, props } = useRag();\n * add(id, (props) => {});\n * remove(id);\n * props();\n * ```\n */\nclass Raf extends Service {\n  /** @type {Boolean} Whether the loop is running or not. */\n  isTicking = false;\n\n  /**\n   * Start the requestAnimationFrame loop.\n   *\n   * @return {void}\n   */\n  init() {\n    const raf = getRaf();\n\n    const loop = () => {\n      this.trigger(this.props);\n\n      if (!this.isTicking) {\n        return;\n      }\n\n      raf(loop);\n    };\n\n    this.isTicking = true;\n    loop();\n  }\n\n  /**\n   * Stop the requestAnimationFrame loop.\n   *\n   * @return {void}\n   */\n  kill() {\n    this.isTicking = false;\n  }\n\n  /**\n   * Get raf props.\n   *\n   * @todo Return elapsed time / index?\n   * @type {Object}\n   */\n  get props() {\n    return {\n      time: window.performance.now(),\n    };\n  }\n}\n\nlet instance = null;\n\nexport default () => {\n  if (!instance) {\n    instance = new Raf();\n  }\n\n  const add = instance.add.bind(instance);\n  const remove = instance.remove.bind(instance);\n  const has = instance.has.bind(instance);\n  const props = () => instance.props;\n\n  return {\n    add,\n    remove,\n    has,\n    props,\n  };\n};\n","import Service from '../abstracts/Service';\nimport throttle from '../utils/throttle';\nimport debounce from '../utils/debounce';\nimport useRaf from './raf';\n\n/**\n * Pointer service\n *\n * ```\n * import { usePointer } from '@studiometa/js/services';\n * const { add, remove, props } = usePointer();\n * add(key, (props) => {});\n * remove(key);\n * props();\n * ```\n */\nclass Pointer extends Service {\n  /** @type {Boolean} State of the pointer. */\n  isDown = false;\n\n  /** @type {Number} The y pointer position. */\n  y = window.innerHeight / 2;\n\n  /** @type {Number} The y previous pointer position. */\n  yLast = window.innerHeight / 2;\n\n  /** @type {Number} The x pointer position. */\n  x = window.innerWidth / 2;\n\n  /** @type {Number} The x previous pointer position. */\n  xLast = window.innerWidth / 2;\n\n  /** @type {Event} The latest event emitted from the pointer. */\n  event;\n\n  /**\n   * Bind the handler to the mousemove and touchmove events.\n   * Bind the up and down handler to the mousedown, mouseup, touchstart and touchend events.\n   *\n   * @return {void}\n   */\n  init() {\n    const { add, remove } = useRaf();\n    this.hasRaf = false;\n\n    const debounced = debounce((event) => {\n      this.updateValues(event);\n      remove('usePointer');\n      this.trigger(this.props);\n      this.hasRaf = false;\n    }, 50);\n\n    this.handler = throttle((event) => {\n      this.updateValues(event);\n      if (!this.hasRaf) {\n        add('usePointer', () => {\n          this.trigger(this.props);\n        });\n        this.hasRaf = true;\n      }\n      // Reset changed flags at the end of the mousemove or touchmove event\n      debounced(event);\n    }, 32).bind(this);\n\n    this.downHandler = this.downHandler.bind(this);\n    this.upHandler = this.upHandler.bind(this);\n\n    document.documentElement.addEventListener('mouseenter', this.handler, { once: true });\n    document.addEventListener('mousemove', this.handler, { passive: true });\n    document.addEventListener('touchmove', this.handler, { passive: true });\n    document.addEventListener('mousedown', this.downHandler, { passive: true });\n    document.addEventListener('touchstart', this.downHandler, { passive: true });\n    document.addEventListener('mouseup', this.upHandler, { passive: true });\n    document.addEventListener('touchend', this.upHandler, { passive: true });\n  }\n\n  /**\n   * Unbind all handlers from their bounded event.\n   *\n   * @return {void}\n   */\n  kill() {\n    document.removeEventListener('mousemove', this.handler);\n    document.removeEventListener('touchmove', this.handler);\n    document.removeEventListener('mousedown', this.downHandler);\n    document.removeEventListener('touchstart', this.downHandler);\n    document.removeEventListener('mouseup', this.upHandler);\n    document.removeEventListener('touchend', this.upHandler);\n  }\n\n  /**\n   * Handler for the pointer's down action.\n   *\n   * @return {void}\n   */\n  downHandler() {\n    this.isDown = true;\n    this.trigger(this.props);\n  }\n\n  /**\n   * Handler for the pointer's up action.\n   *\n   * @return {void}\n   */\n  upHandler() {\n    this.isDown = false;\n    this.trigger(this.props);\n  }\n\n  /**\n   * Update the pointer positions.\n   *\n   * @param  {Event} event The event object.\n   * @return {void}\n   */\n  updateValues(event) {\n    this.event = event;\n    this.yLast = this.y;\n    this.xLast = this.x;\n\n    // Check pointer Y\n    // We either get data from a touch event `event.touches[0].clientY` or from\n    // a mouse event `event.clientY`.\n    if (((event.touches || [])[0] || event || {}).clientY !== this.y) {\n      this.y = ((event.touches || [])[0] || event || {}).clientY;\n    }\n\n    // Check pointer X\n    // We either get data from a touch event `event.touches[0].clientX` or from\n    // a mouse event `event.clientX`.\n    if (((event.touches || [])[0] || event || {}).clientX !== this.x) {\n      this.x = ((event.touches || [])[0] || event || {}).clientX;\n    }\n  }\n\n  /**\n   * Get the pointer props.\n   *\n   * @type {Object}\n   */\n  get props() {\n    return {\n      event: this.event,\n      isDown: this.isDown,\n      x: this.x,\n      y: this.y,\n      changed: {\n        x: this.x !== this.xLast,\n        y: this.y !== this.yLast,\n      },\n      last: {\n        x: this.xLast,\n        y: this.yLast,\n      },\n      delta: {\n        x: this.x - this.xLast,\n        y: this.y - this.yLast,\n      },\n      progress: {\n        x: this.x / window.innerWidth,\n        y: this.y / window.innerHeight,\n      },\n      max: {\n        x: window.innerWidth,\n        y: window.innerHeight,\n      },\n    };\n  }\n}\n\nlet pointer = null;\n\n/**\n * Use the pointer.\n *\n * ```js\n * import usePointer from '@studiometa/js-toolkit/services';\n * const { add, remove, props } = usePointer();\n * add('id', () => {});\n * remove('id');\n * props();\n * ```\n */\nexport default () => {\n  if (!pointer) {\n    pointer = new Pointer();\n  }\n\n  const add = pointer.add.bind(pointer);\n  const remove = pointer.remove.bind(pointer);\n  const has = pointer.has.bind(pointer);\n  const props = () => pointer.props;\n\n  return {\n    add,\n    remove,\n    has,\n    props,\n  };\n};\n","import Service from '../abstracts/Service';\nimport debounce from '../utils/debounce';\n\n/**\n * Resize service\n *\n * ```\n * import { useResize } from '@studiometa/js/services';\n * const { add, remove, props } = useResize();\n * add(key, (props) => {});\n * remove(key);\n * props();\n * ```\n */\nclass Resize extends Service {\n  /**\n   * Bind the handler to the resize event.\n   *\n   * @return {void}\n   */\n  init() {\n    this.handler = debounce(() => {\n      this.trigger(this.props);\n    }).bind(this);\n\n    if (this.canUseResizeObserver) {\n      this.resizeObserver = new ResizeObserver(this.handler);\n      this.resizeObserver.observe(document.documentElement);\n    } else {\n      window.addEventListener('resize', this.handler);\n    }\n  }\n\n  /**\n   * Unbind the handler from the resize event.\n   *\n   * @return {void}\n   */\n  kill() {\n    if (this.canUseResizeObserver) {\n      this.resizeObserver.disconnect();\n    } else {\n      window.removeEventListener('resize', this.handler);\n    }\n    delete this.resizeObserver;\n  }\n\n  /**\n   * Get resize props.\n   *\n   * @type {Object}\n   */\n  get props() {\n    const props = {\n      width: window.innerWidth,\n      height: window.innerHeight,\n      ratio: window.innerWidth / window.innerHeight,\n      orientation: 'square',\n    };\n\n    if (props.ratio > 1) {\n      props.orientation = 'landscape';\n    }\n\n    if (props.ratio < 1) {\n      props.orientation = 'portrait';\n    }\n\n    if (this.breakpointElement) {\n      props.breakpoint = this.breakpoint;\n      props.breakpoints = this.breakpoints;\n    }\n\n    return props;\n  }\n\n  /**\n   * The element holding the breakpoints data.\n   * @return {HTMLElement}\n   */\n  get breakpointElement() {\n    return document.querySelector('[data-breakpoint]') || null;\n  }\n\n  /**\n   * Get the current breakpoint.\n   * @return {String}\n   */\n  get breakpoint() {\n    return window\n      .getComputedStyle(this.breakpointElement, '::before')\n      .getPropertyValue('content')\n      .replace(/\"/g, '');\n  }\n\n  /**\n   * Get all breakpoints.\n   * @return {Array}\n   */\n  get breakpoints() {\n    const breakpoints = window\n      .getComputedStyle(this.breakpointElement, '::after')\n      .getPropertyValue('content')\n      .replace(/\"/g, '');\n\n    return breakpoints.split(',');\n  }\n\n  /**\n   * Test if we can use the `ResizeObserver` API.\n   * @return {Boolean}\n   */\n  get canUseResizeObserver() {\n    return typeof window.ResizeObserver !== 'undefined';\n  }\n}\n\nlet resize = null;\n\nexport default () => {\n  if (!resize) {\n    resize = new Resize();\n  }\n\n  const add = resize.add.bind(resize);\n  const remove = resize.remove.bind(resize);\n  const has = resize.has.bind(resize);\n  const props = () => resize.props;\n\n  return {\n    add,\n    remove,\n    has,\n    props,\n  };\n};\n","import Service from '../abstracts/Service';\nimport throttle from '../utils/throttle';\nimport debounce from '../utils/debounce';\nimport nextFrame from '../utils/nextFrame';\n\n/**\n * Scroll service\n *\n * ```\n * import { useScroll } from '@studiometa/js-toolkit/services';\n * const { add, remove, props } = useScroll();\n * add(key, (props) => {});\n * remove(key);\n * props();\n * ```\n */\nclass Scroll extends Service {\n  /** @type {Number} The y scroll position. */\n  y = window.pageYOffset;\n\n  /** @type {Number} The y previous scroll position. */\n  yLast = window.pageYOffset;\n\n  /** @type {Number} The x scroll position. */\n  x = window.pageXOffset;\n\n  /** @type {Number} The x previous scroll position. */\n  xLast = window.pageXOffset;\n\n  /**\n   * Bind the handler to the scroll event.\n   *\n   * @return {void}\n   */\n  init() {\n    const debounced = debounce(() => {\n      this.trigger(this.props);\n      nextFrame(() => {\n        this.trigger(this.props);\n      });\n    }, 50);\n\n    this.handler = throttle(() => {\n      this.trigger(this.props);\n\n      // Reset changed flags at the end of the scroll event\n      debounced();\n    }, 32).bind(this);\n\n    // Fire the `scrolled` method on document scroll\n    document.addEventListener('scroll', this.handler, { passive: true });\n  }\n\n  /**\n   * Unbind the handler from the scroll event.\n   *\n   * @return {void}\n   */\n  kill() {\n    document.removeEventListener('scroll', this.handler);\n  }\n\n  /**\n   * Get scroll props.\n   *\n   * @type {Object}\n   */\n  get props() {\n    this.yLast = this.y;\n    this.xLast = this.x;\n\n    // Check scroll Y\n    if (window.pageYOffset !== this.y) {\n      this.y = window.pageYOffset;\n    }\n\n    // Check scroll x\n    if (window.pageXOffset !== this.x) {\n      this.x = window.pageXOffset;\n    }\n\n    return {\n      x: this.x,\n      y: this.y,\n      changed: {\n        x: this.x !== this.xLast,\n        y: this.y !== this.yLast,\n      },\n      last: {\n        x: this.xLast,\n        y: this.yLast,\n      },\n      delta: {\n        x: this.x - this.xLast,\n        y: this.y - this.yLast,\n      },\n      progress: {\n        x: this.max.x === 0 ? 1 : this.x / this.max.x,\n        y: this.max.y === 0 ? 1 : this.y / this.max.y,\n      },\n      max: this.max,\n    };\n  }\n\n  /**\n   * Get scroll max values.\n   *\n   * @type {Object}\n   */\n  get max() {\n    return {\n      x: (document.scrollingElement || document.body).scrollWidth - window.innerWidth,\n      y: (document.scrollingElement || document.body).scrollHeight - window.innerHeight,\n    };\n  }\n}\n\nlet scroll = null;\n\nexport default () => {\n  if (!scroll) {\n    scroll = new Scroll();\n  }\n\n  const add = scroll.add.bind(scroll);\n  const remove = scroll.remove.bind(scroll);\n  const has = scroll.has.bind(scroll);\n  const props = () => scroll.props;\n\n  return {\n    add,\n    remove,\n    has,\n    props,\n  };\n};\n","export default {\n  ENTER: 13,\n  SPACE: 32,\n  TAB: 9,\n  ESC: 27,\n  LEFT: 37,\n  UP: 38,\n  RIGHT: 39,\n  DOWN: 40,\n};\n","import Service from '../abstracts/Service';\nimport keyCodes from '../utils/keyCodes';\n\n/**\n * Scroll service\n *\n * ```\n * import { useKey } from '@studiometa/js-toolkit/services';\n * const { add, remove, props } = useKey();\n * add(key, (props) => {});\n * remove(key);\n * props();\n * ```\n */\nclass Key extends Service {\n  /** @type {Object} The event object. */\n  event = {};\n\n  /**\n   * Used to accumulate the number of times the `keydown` event has been triggered.\n   * @type {Number}\n   */\n  triggered = 0;\n\n  /** @type {Object} The previous event object. */\n  previousEvent = {};\n\n  /**\n   * Bind the handler to the keyboard event.\n   *\n   * @return {void}\n   */\n  init() {\n    this.handler = (event) => {\n      this.event = event;\n      this.trigger(this.props);\n    };\n    document.addEventListener('keydown', this.handler, { passive: false });\n    document.addEventListener('keyup', this.handler, { passive: false });\n  }\n\n  /**\n   * Unbind the handler from the keyboard event.\n   *\n   * @return {void}\n   */\n  kill() {\n    document.removeEventListener('keydown', this.handler);\n    document.removeEventListener('keyup', this.handler);\n  }\n\n  /**\n   * Get keyboard props.\n   *\n   * @type {Object}\n   */\n  get props() {\n    const keys = Object.entries(keyCodes).reduce((acc, [name, code]) => {\n      acc[name] = code === this.event.keyCode;\n      return acc;\n    }, {});\n\n    if (!this.previousEvent.type) {\n      this.triggered = 0;\n    }\n\n    if (this.event.type === 'keydown' && this.previousEvent.type === 'keydown') {\n      this.triggered += 1;\n    } else {\n      this.triggered = 1;\n    }\n\n    this.previousEvent = this.event;\n\n    return {\n      event: this.event,\n      triggered: this.triggered,\n      direction: this.event.type === 'keydown' ? 'down' : 'up',\n      isUp: this.event.type === 'keyup',\n      isDown: this.event.type === 'keydown',\n      ...keys,\n    };\n  }\n}\n\nlet key = null;\n\nexport default () => {\n  if (!key) {\n    key = new Key();\n  }\n\n  const add = key.add.bind(key);\n  const remove = key.remove.bind(key);\n  const has = key.has.bind(key);\n  const props = () => key.props;\n\n  return {\n    add,\n    remove,\n    has,\n    props,\n  };\n};\n","import usePointer from '../../services/pointer';\nimport useRaf from '../../services/raf';\nimport useResize from '../../services/resize';\nimport useScroll from '../../services/scroll';\nimport useKey from '../../services/key';\nimport { hasMethod, callMethod } from './utils';\n\n/**\n * Init the given service and bind it to the given instance.\n *\n * @param  {Base}     instance The Base instance.\n * @param  {String}   method   The instance to test for binding\n * @param  {Function} service  The service `use...` function\n * @return {Function}          A function to unbind the service\n */\nfunction initService(instance, method, service) {\n  if (!hasMethod(instance, method)) {\n    return () => {};\n  }\n\n  const { add, remove } = service();\n  add(instance.$id, (...args) => {\n    callMethod(instance, method, ...args);\n  });\n\n  return () => remove(instance.$id);\n}\n\n/**\n * Use the services.\n * @param  {Base} instance A Base class instance.\n * @return {Array}         A list of unbind methods.\n */\nexport default function bindServices(instance) {\n  const unbindMethods = [\n    initService(instance, 'scrolled', useScroll),\n    initService(instance, 'resized', useResize),\n    initService(instance, 'ticked', useRaf),\n    initService(instance, 'moved', usePointer),\n    initService(instance, 'keyed', useKey),\n  ];\n\n  // Fire the `loaded` method on window load\n  // @todo remove this? or move it elsewhere?\n  if (hasMethod(instance, 'loaded')) {\n    const loadedHandler = (event) => {\n      callMethod(instance, 'loaded', { event });\n    };\n    window.addEventListener('load', loadedHandler);\n    unbindMethods.push(() => {\n      window.removeEventListener('load', loadedHandler);\n    });\n  }\n\n  return unbindMethods;\n}\n","import getAllProperties from '../../utils/object/getAllProperties';\nimport { debug } from './utils';\n\n/**\n * Bind event handler methods to the root HTML element.\n *\n * @param  {Base}  instance     A Base instance.\n * @param  {Array} eventMethods A list of methods to bind.\n * @return {Array}              A list of unbind functions.\n */\nfunction bindRootEvents(instance, eventMethods) {\n  return eventMethods.map((eventMethod) => {\n    const eventName = eventMethod.replace(/^on/, '').toLowerCase();\n\n    const handler = (...args) => {\n      debug(instance, eventMethod, instance.$el, ...args);\n      instance[eventMethod](...args);\n    };\n\n    instance.$el.addEventListener(eventName, handler);\n\n    return () => {\n      instance.$el.removeEventListener(eventName, handler);\n    };\n  });\n}\n\n/**\n * Bind event handler methods to refs HTML element.\n *\n * @param  {Base}  instance     A Base instance.\n * @param  {Array} eventMethods A list of methods to bind.\n * @return {Array}              A list of unbind functions.\n */\nfunction bindRefsEvents(instance, eventMethods) {\n  const unbindMethods = [];\n\n  Object.entries(instance.$refs).forEach(([refName, $refOrRefs]) => {\n    const $refs = Array.isArray($refOrRefs) ? $refOrRefs : [$refOrRefs];\n    const refEventMethod = `on${refName.replace(/^\\w/, (c) => c.toUpperCase())}`;\n\n    eventMethods\n      .filter((eventMethod) => eventMethod.startsWith(refEventMethod))\n      .forEach((eventMethod) => {\n        $refs.forEach(($ref, index) => {\n          const eventName = eventMethod.replace(refEventMethod, '').toLowerCase();\n          const handler = (...args) => {\n            debug(instance, eventMethod, $ref, ...args, index);\n            instance[eventMethod](...args, index);\n          };\n\n          debug(instance, 'binding ref event', refName, eventName);\n\n          if ($ref.constructor && $ref.constructor.__isBase__) {\n            // eslint-disable-next-line no-param-reassign\n            $ref = $ref.$el;\n          }\n\n          $ref.addEventListener(eventName, handler);\n          const unbindMethod = () => {\n            debug(instance, 'unbinding ref event', eventMethods);\n            $ref.removeEventListener(eventName, handler);\n          };\n\n          unbindMethods.push(unbindMethod);\n        });\n      });\n  });\n\n  return unbindMethods;\n}\n\n/**\n * Bind event handler methods to children Base instance.\n * @param  {Base}  instance     A Base instance.\n * @param  {Array} eventMethods A list of methods to bind.\n * @return {Array}              A list of unbind functions.\n */\nfunction bindChildrenEvents(instance, eventMethods) {\n  const unbindMethods = [];\n\n  Object.entries(instance.$children).forEach(([childName, $children]) => {\n    const childEventMethod = `on${childName.replace(/^\\w/, (c) => c.toUpperCase())}`;\n\n    eventMethods\n      .filter((eventMethod) => eventMethod.startsWith(childEventMethod))\n      .forEach((eventMethod) => {\n        $children.forEach(($child, index) => {\n          const eventName = eventMethod.replace(childEventMethod, '').toLowerCase();\n          const handler = (...args) => {\n            debug(instance, eventMethod, $child, ...args, index);\n            instance[eventMethod](...args, index);\n          };\n\n          debug(instance, 'binding child event', childName, eventName);\n\n          const unbindMethod = $child.$on(eventName, handler);\n          unbindMethods.push(() => {\n            debug(instance, 'unbinding child event', childName, eventName);\n            unbindMethod();\n          });\n        });\n      });\n  });\n\n  return unbindMethods;\n}\n\n/**\n * Bind ref and children component's events to their corresponding method.\n *\n * @param  {Base} instance  A Base instance.\n * @return {Array}          A list of methods to unbind the events.\n */\nexport default function bindEvents(instance) {\n  const ROOT_EVENT_REGEX = /^on[A-Z][a-z]+$/;\n  const REFS_CHILDREN_EVENT_REGEX = /^on([A-Z][a-z]+)([A-Z][a-z]+)+$/;\n\n  // Get all event methods\n  const eventMethods = getAllProperties(instance).reduce(\n    (acc, [name]) => {\n      // Testing camelCase with one word: onEvent.\n      if (ROOT_EVENT_REGEX.test(name)) {\n        acc.root.push(name);\n        return acc;\n      }\n\n      // Testing camelCase with more than two words: onRefEvent.\n      if (REFS_CHILDREN_EVENT_REGEX.test(name)) {\n        acc.refsOrChildren.push(name);\n      }\n\n      return acc;\n    },\n    { root: [], refsOrChildren: [] }\n  );\n\n  const unbindMethods = [\n    ...bindRootEvents(instance, eventMethods.root),\n    ...bindRefsEvents(instance, eventMethods.refsOrChildren),\n    ...bindChildrenEvents(instance, eventMethods.refsOrChildren),\n  ];\n\n  return unbindMethods;\n}\n","import nanoid from 'nanoid/non-secure';\nimport autoBind from '../../utils/object/autoBind';\nimport EventManager from '../EventManager';\nimport { callMethod, debug } from './utils';\nimport { getChildren, getComponentElements } from './children';\nimport { getOptions, setOptions } from './options';\nimport { getRefs } from './refs';\nimport { mountComponents, destroyComponents } from './components';\nimport bindServices from './services';\nimport bindEvents from './events';\n\n/**\n * Page lifecycle class\n *\n * @method mounted   Fired when the class is instantiated\n * @method loaded    Fired on the window's load event\n * @method ticked    Fired each frame with `requestAnimationFrame`\n * @method resized   Fired when the window is resized (`resize` event)\n * @method moved     Fired when the pointer has moved (`touchmove` and `mousemove` events)\n * @method scrolled  Fired with debounce when the document is scrolled (`scroll` event)\n * @method destroyed Fired when the window is being unloaded (`unload` event)\n */\nexport default class Base extends EventManager {\n  /**\n   * Get the component's refs.\n   * @return {Object}\n   */\n  get $refs() {\n    return getRefs(this, this.$el);\n  }\n\n  /**\n   * Get the component's children components.\n   * @return {Object}\n   */\n  get $children() {\n    return getChildren(this, this.$el, this.config.components || {});\n  }\n\n  /**\n   * Get the component's merged config and options.\n   * @return {Object}\n   */\n  get $options() {\n    return getOptions(this, this.$el, this.config);\n  }\n\n  /**\n   * Set the components option.\n   * @param  {Object} value The new options values to merge with the old ones.\n   * @return {void}\n   */\n  set $options(newOptions) {\n    setOptions(this, this.$el, newOptions);\n  }\n\n  /**\n   * Class constructor where all the magic takes place.\n   *\n   * @param  {HTMLElement} element The component's root element.\n   * @return {Base}                A Base instance.\n   */\n  constructor(element) {\n    super();\n\n    if (!this.config) {\n      throw new Error('The `config` getter must be defined.');\n    }\n\n    if (!this.config.name) {\n      throw new Error('The `config.name` property is required.');\n    }\n\n    if (!element) {\n      throw new Error('The root element must be defined.');\n    }\n\n    Object.defineProperties(this, {\n      $id: {\n        value: `${this.config.name}-${nanoid()}`,\n      },\n      $isMounted: {\n        value: false,\n        writable: true,\n      },\n      $el: {\n        value: element,\n      },\n    });\n\n    if (!this.$el.__base__) {\n      Object.defineProperty(this.$el, '__base__', {\n        get: () => this,\n        configurable: true,\n      });\n    }\n\n    // Autobind all methods to the instance\n    autoBind(this, {\n      exclude: [\n        '$mount',\n        '$update',\n        '$destroy',\n        '$terminate',\n        '$log',\n        '$on',\n        '$once',\n        '$off',\n        '$emit',\n        'mounted',\n        'loaded',\n        'ticked',\n        'resized',\n        'moved',\n        'keyed',\n        'scrolled',\n        'destroyed',\n        'terminated',\n        ...(this._excludeFromAutoBind || []),\n      ],\n    });\n\n    let unbindMethods = [];\n    this.$on('mounted', () => {\n      mountComponents(this);\n      unbindMethods = [...bindServices(this), ...bindEvents(this)];\n      this.$isMounted = true;\n    });\n\n    this.$on('updated', () => {\n      unbindMethods.forEach((method) => method());\n      mountComponents(this);\n      unbindMethods = [...bindServices(this), ...bindEvents(this)];\n    });\n\n    this.$on('destroyed', () => {\n      this.$isMounted = false;\n      unbindMethods.forEach((method) => method());\n      destroyComponents(this);\n    });\n\n    // Mount class which are not used as another component's child.\n    if (!this.__isChild__) {\n      this.$mount();\n      Object.defineProperty(this, '$parent', { get: () => null });\n    }\n\n    debug(this, 'constructor', this);\n    return this;\n  }\n\n  /**\n   * Small helper to log stuff.\n   *\n   * @param  {...any} args The arguments passed to the method\n   * @return {void}\n   */\n  $log(...args) {\n    return this.$options.log\n      ? window.console.log.apply(window, [this.config.name, ...args])\n      : () => {};\n  }\n\n  /**\n   * Trigger the `mounted` callback.\n   */\n  $mount() {\n    debug(this, '$mount');\n    callMethod(this, 'mounted');\n    return this;\n  }\n\n  /**\n   * Update the instance children.\n   */\n  $update() {\n    debug(this, '$update');\n    callMethod(this, 'updated');\n    return this;\n  }\n\n  /**\n   * Trigger the `destroyed` callback.\n   */\n  $destroy() {\n    debug(this, '$destroy');\n    callMethod(this, 'destroyed');\n    return this;\n  }\n\n  /**\n   * Terminate a child instance when it is not needed anymore.\n   * @return {void}\n   */\n  $terminate() {\n    debug(this, '$terminate');\n\n    // First, destroy the component.\n    this.$destroy();\n\n    // Execute the `terminated` hook if it exists\n    callMethod(this, 'terminated');\n\n    // Delete the reference to the instance\n    delete this.$el.__base__;\n\n    // And update its status to prevent re-instantiation when accessing the\n    // parent's `$children` property\n    Object.defineProperty(this.$el, '__base__', {\n      value: 'terminated',\n      configurable: false,\n      writable: false,\n    });\n  }\n\n  /**\n   * Factory method to generate multiple instance of the class.\n   *\n   * @param  {String}      selector The selector on which to mount each instance.\n   * @return {Array<Base>}          A list of the created instance.\n   */\n  static $factory(nameOrSelector) {\n    if (!nameOrSelector) {\n      throw new Error(\n        'The $factory method requires a componentâ€™s name or selector to be specified.'\n      );\n    }\n\n    return getComponentElements(nameOrSelector).map((el) => new this(el));\n  }\n}\n\nBase.__isBase__ = true;\n","import Base from './abstracts/Base';\n\n/**\n * Define a component without a class.\n *\n * @param  {Object} options The component's object\n * @return {Base}           A component's class.\n */\nexport function defineComponent(options) {\n  const { config, methods, ...hooks } = options;\n\n  if (!config) {\n    throw new Error('The `config` property is required.');\n  }\n\n  if (!config.name) {\n    throw new Error('The `config.name` property is required.');\n  }\n\n  /**\n   * Component class.\n   */\n  class Component extends Base {\n    /**\n     * Component config.\n     */\n    get config() {\n      return config;\n    }\n  }\n\n  const allowedHooks = [\n    'mounted',\n    'loaded',\n    'ticked',\n    'resized',\n    'moved',\n    'keyed',\n    'scrolled',\n    'destroyed',\n    'terminated',\n  ];\n\n  const filteredHooks = Object.entries(hooks).reduce((acc, [name, fn]) => {\n    if (allowedHooks.includes(name)) {\n      acc[name] = fn;\n    } else {\n      throw new Error(\n        `\n          The \"${name}\" method is not a Base lifecycle hook,\n          it should be placed in the \"method\" property.\n          The following hooks are available: ${allowedHooks.join(', ')}\n        `\n      );\n    }\n\n    return acc;\n  }, {});\n\n  [...Object.entries(methods || {}), ...Object.entries(filteredHooks)].forEach(([name, fn]) => {\n    Component.prototype[name] = fn;\n  });\n\n  return Component;\n}\n\n/**\n * Create a Base instance with the given object configuration.\n * @param {HTMLElement|String} elementOrSelector The instance root HTML element.\n * @param {Object}             options           The Base class configuration.\n */\nexport function createBase(elementOrSelector, options) {\n  const Component = defineComponent(options);\n  const element =\n    typeof elementOrSelector === 'string'\n      ? document.querySelector(elementOrSelector)\n      : elementOrSelector;\n  return new Component(element);\n}\n\nexport default Base;\n","/**\n * Test if the given value is an object.\n *\n * @param  {*}       value The value to test.\n * @return {Boolean}       Whether or not the value is an object.\n */\nexport default function isObject(value) {\n  return typeof value === 'object' && !!value && value.toString() === '[object Object]';\n}\n","import isObject from '../object/isObject';\n\n/**\n * Manage a list of style properties on an element.\n *\n * @param {HTMLElement}         element The element to update.\n * @param {CSSStyleDeclaration} styles  An object of styles properties and values.\n * @param {String}              method  The method to use: add or remove.\n */\nexport default function setStyles(element, styles, method = 'add') {\n  if (!element || !styles || !isObject(styles)) {\n    return;\n  }\n\n  Object.entries(styles).forEach(([prop, value]) => {\n    element.style[prop] = method === 'add' ? value : '';\n  });\n}\n\n/**\n * Add class names to an element.\n *\n * @param {HTMLElement} element    The element to update.\n * @param {String}      classNames A string of class names.\n * @return {void}\n */\nexport function add(element, classNames) {\n  setStyles(element, classNames);\n}\n\n/**\n * Remove class names from an element.\n *\n * @param  {HTMLElement} element    The element to update.\n * @param  {String}      classNames A string of class names.\n * @return {void}\n */\nexport function remove(element, classNames) {\n  setStyles(element, classNames, 'remove');\n}\n","/**\n * Manage a list of classes as string on an element.\n *\n * @param {HTMLElement} element    The element to update.\n * @param {String}      classNames A string of class names.\n * @param {String}      method     The method to use: add, remove or toggle.\n */\nfunction setClasses(element, classNames, method = 'add') {\n  if (!element || !classNames) {\n    return;\n  }\n\n  classNames.split(' ').forEach((className) => {\n    element.classList[method](className);\n  });\n}\n\n/**\n * Add class names to an element.\n *\n * @param {HTMLElement} element    The element to update.\n * @param {String}      classNames A string of class names.\n * @return {void}\n */\nexport function add(element, classNames) {\n  setClasses(element, classNames);\n}\n\n/**\n * Remove class names from an element.\n *\n * @param  {HTMLElement} element    The element to update.\n * @param  {String}      classNames A string of class names.\n * @return {void}\n */\nexport function remove(element, classNames) {\n  setClasses(element, classNames, 'remove');\n}\n\n/**\n * Toggle class names from an element.\n *\n * @param  {HTMLElement} element    The element to update.\n * @param  {String}      classNames A string of class names.\n * @return {void}\n */\nexport function toggle(element, classNames) {\n  setClasses(element, classNames, 'toggle');\n}\n","/* eslint no-underscore-dangle: [\"error\", { \"allow\": [\"__isTransitioning__\", \"__transitionEndHandler__\"] }] */\nimport nextFrame from '../nextFrame';\nimport * as classes from './classes';\nimport * as styles from './styles';\n\n/**\n * Update either the classes or the styles of an element with the given method.\n *\n * @param {HTMLElement}   element         The element to update.\n * @param {String|Object} classesOrStyles The classes or styles to apply.\n * @param {String}        method          The method to use, one of `add` or `remove`.\n */\nexport function setClassesOrStyles(element, classesOrStyles, method = 'add') {\n  if (typeof classesOrStyles === 'string') {\n    classes[method](element, classesOrStyles, method);\n  } else {\n    styles[method](element, classesOrStyles, method);\n  }\n}\n\n/**\n * Test if the given element has a transition duration.\n *\n * @param  {HTMLElement} element The element to test.\n * @return {Boolean}             The result of the test.\n */\nfunction testTransition(element) {\n  if (typeof window === 'undefined') {\n    return false;\n  }\n\n  const { transitionDuration } = window.getComputedStyle(element);\n  return !!transitionDuration && transitionDuration !== '0s';\n}\n\n/**\n * Apply the from state.\n *\n * @param {HTMLElement}   element         The target element.\n * @param {String|Object} classesOrStyles The classes or styles definition.\n * @return {Promise}\n */\nasync function start(element, classesOrStyles) {\n  element.__isTransitioning__ = true;\n  setClassesOrStyles(element, classesOrStyles.from);\n  await nextFrame();\n  setClassesOrStyles(element, classesOrStyles.active);\n  await nextFrame();\n}\n\n/**\n * Apply the active state.\n *\n * @param {HTMLElement}   element         The target element.\n * @param {String|Object} classesOrStyles The classes or styles definition.\n * @return {Promise}\n */\nasync function next(element, classesOrStyles) {\n  const hasTransition = testTransition(element);\n\n  /* eslint-disable-next-line */\n  return new Promise(async resolve => {\n    if (hasTransition) {\n      element.__transitionEndHandler__ = resolve;\n      element.addEventListener('transitionend', element.__transitionEndHandler__, false);\n    }\n    setClassesOrStyles(element, classesOrStyles.from, 'remove');\n    setClassesOrStyles(element, classesOrStyles.to);\n    await nextFrame();\n    if (!hasTransition) {\n      resolve();\n    }\n  });\n}\n\n/**\n * Apply the final state.\n *\n * @param {HTMLElement}   element         The target element.\n * @param {String|Object} classesOrStyles The classes or styles definition.\n * @param {String}        mode            Whether to remove or keep the `to`  classes/styles.\n * @return {void}\n */\nfunction end(element, classesOrStyles, mode = 'remove') {\n  element.removeEventListener('transitionend', element.__transitionEndHandler__, false);\n  if (mode === 'remove') {\n    setClassesOrStyles(element, classesOrStyles.to, 'remove');\n  }\n  setClassesOrStyles(element, classesOrStyles.active, 'remove');\n  delete element.__isTransitioning__;\n  delete element.__transitionEndHandler__;\n}\n\n/**\n * Manage CSS transition with class.\n *\n * This is heavily inspired by the Vue `<transition>` component\n * and the `@barba/css` package, many thanks to them!\n *\n * @param  {HTMLElement}   element The target element.\n * @param  {String|Object} name    The name of the transition or an object with the hooks classesOrStyles.\n * @param  {String}        endMode    Whether to remove or keep the `to` classes/styles\n * @return {Promise}               A promise resolving at the end of the transition.\n */\nexport default async function transition(element, name, endMode = 'remove') {\n  const classesOrStyles =\n    typeof name === 'string'\n      ? {\n          from: `${name}-from`,\n          active: `${name}-active`,\n          to: `${name}-to`,\n        }\n      : {\n          from: '',\n          active: '',\n          to: '',\n          ...name,\n        };\n\n  // End any previous transition running on the element.\n  if (element.__isTransitioning__) {\n    end(element, classesOrStyles);\n  }\n\n  await start(element, classesOrStyles);\n  await next(element, classesOrStyles);\n  end(element, classesOrStyles, endMode);\n  return Promise.resolve();\n}\n","import Base from '../../abstracts/Base';\nimport * as styles from '../../utils/css/styles';\nimport transition from '../../utils/css/transition';\n\n/**\n * AccordionItem class.\n */\nexport default class AccordionItem extends Base {\n  /**\n   * AccordionItem config\n   * @return {Object}\n   */\n  get config() {\n    return {\n      name: 'AccordionItem',\n      isOpen: false,\n      styles: {\n        container: {\n          open: '',\n          active: '',\n          closed: '',\n        },\n      },\n    };\n  }\n\n  /**\n   * Add aria-attributes on mounted.\n   * @return {void}\n   */\n  mounted() {\n    if (this.$parent && this.$parent.$options.item) {\n      this.$options = this.$parent.$options.item;\n    }\n\n    this.$refs.btn.setAttribute('id', this.$id);\n    this.$refs.btn.setAttribute('aria-controls', this.contentId);\n    this.$refs.content.setAttribute('aria-labelledby', this.$id);\n    this.$refs.content.setAttribute('id', this.contentId);\n\n    this.isOpen = this.$options.isOpen;\n    this.updateAttributes(this.isOpen);\n\n    if (!this.isOpen) {\n      styles.add(this.$refs.container, { visibility: 'invisible', height: 0 });\n    }\n\n    // Update refs styles on mount\n    const { container, ...otherStyles } = this.$options.styles;\n    Object.entries(otherStyles)\n      .filter(([refName]) => this.$refs[refName])\n      .forEach(([refName, { open, closed } = {}]) => {\n        transition(this.$refs[refName], { to: this.isOpen ? open : closed }, 'keep');\n      });\n  }\n\n  /**\n   * Handler for the click event on the `btn` ref.\n   * @return {void}\n   */\n  onBtnClick() {\n    if (this.isOpen) {\n      this.close();\n    } else {\n      this.open();\n    }\n  }\n\n  /**\n   * Get the content ID.\n   * @return {String}\n   */\n  get contentId() {\n    return `content-${this.$id}`;\n  }\n\n  /**\n   * Update the refs' attributes according to the given type.\n   *\n   * @param  {Boolean} isOpen The state of the item.\n   * @return {void}\n   */\n  updateAttributes(isOpen) {\n    this.$refs.content.setAttribute('aria-hidden', isOpen ? 'false' : 'true');\n    this.$refs.btn.setAttribute('aria-expanded', isOpen ? 'true' : 'false');\n  }\n\n  /**\n   * Open an item.\n   * @return {void}\n   */\n  async open() {\n    if (this.isOpen) {\n      return;\n    }\n\n    this.$log('open');\n    this.$emit('open');\n\n    this.isOpen = true;\n    this.updateAttributes(this.isOpen);\n\n    styles.remove(this.$refs.container, { visibility: 'invisible' });\n    const { container, ...otherStyles } = this.$options.styles;\n\n    await Promise.all([\n      transition(this.$refs.container, {\n        from: { height: 0 },\n        active: container.active,\n        to: { height: `${this.$refs.content.offsetHeight}px` },\n      }).then(() => {\n        // Remove style only if the item has not been closed before the end\n        if (this.isOpen) {\n          styles.remove(this.$refs.content, { position: 'absolute' });\n        }\n\n        return Promise.resolve();\n      }),\n      ...Object.entries(otherStyles)\n        .filter(([refName]) => this.$refs[refName])\n        .map(([refName, { open, active, closed } = {}]) =>\n          transition(\n            this.$refs[refName],\n            {\n              from: closed,\n              active,\n              to: open,\n            },\n            'keep'\n          )\n        ),\n    ]);\n  }\n\n  /**\n   * Close an item.\n   * @return {void}\n   */\n  async close() {\n    if (!this.isOpen) {\n      return;\n    }\n\n    this.$log('close');\n    this.$emit('close');\n\n    this.isOpen = false;\n\n    const height = this.$refs.container.offsetHeight;\n    styles.add(this.$refs.content, { position: 'absolute' });\n    const { container, ...otherStyles } = this.$options.styles;\n\n    await Promise.all([\n      transition(this.$refs.container, {\n        from: { height: `${height}px` },\n        active: container.active,\n        to: { height: 0 },\n      }).then(() => {\n        // Add end styles only if the item has not been re-opened before the end\n        if (!this.isOpen) {\n          styles.add(this.$refs.container, { height: 0, visibility: 'invisible' });\n          this.updateAttributes(this.isOpen);\n        }\n        return Promise.resolve();\n      }),\n      ...Object.entries(otherStyles)\n        .filter(([refName]) => this.$refs[refName])\n        .map(([refName, { open, active, closed } = {}]) =>\n          transition(\n            this.$refs[refName],\n            {\n              from: open,\n              active,\n              to: closed,\n            },\n            'keep'\n          )\n        ),\n    ]);\n  }\n}\n","import Base from '../../abstracts/Base';\nimport AccordionItem from './AccordionItem';\n\n/**\n * Accordion class.\n */\nexport default class Accordion extends Base {\n  /**\n   * Accordion config.\n   * @return {Object}\n   */\n  get config() {\n    return {\n      name: 'Accordion',\n      autoclose: true,\n      item: null,\n      components: {\n        AccordionItem,\n      },\n    };\n  }\n\n  /**\n   * Init autoclose behavior on mounted.\n   * @return {void}\n   */\n  mounted() {\n    this.unbindMethods = this.$children.AccordionItem.map((item, index) => {\n      const unbindOpen = item.$on('open', () => {\n        this.$emit('open', item, index);\n        if (this.$options.autoclose) {\n          this.$children.AccordionItem.filter((el, i) => index !== i).forEach((it) => it.close());\n        }\n      });\n      const unbindClose = item.$on('close', () => {\n        this.$emit('close', item, index);\n      });\n\n      return () => {\n        unbindOpen();\n        unbindClose();\n      };\n    });\n  }\n\n  /**\n   * Destroy autoclose behavior on destroyed.\n   * @return {void}\n   */\n  destroyed() {\n    this.unbindMethods.forEach((unbind) => unbind());\n  }\n}\n","import Base from '../abstracts/Base';\nimport useResize from '../services/resize';\nimport nextFrame from '../utils/nextFrame';\n\n/**\n * MediaQuery component.\n *\n * <div data-component=\"MediaQuery\" data-active-breakpoints=\"l xl\">\n *   <div data-component=\"Foo\"></div>\n * </div>\n */\nexport default class MediaQuery extends Base {\n  /**\n   * Component's configuration.\n   *\n   * @return {Object}\n   */\n  get config() {\n    return {\n      name: 'MediaQuery',\n    };\n  }\n\n  /**\n   * Mounted hook.\n   */\n  mounted() {\n    this.test();\n    nextFrame(() => this.test());\n  }\n\n  /**\n   * Resized hook.\n   */\n  resized() {\n    this.test();\n  }\n\n  /**\n   * Get the first element child of the component, as it must be another Base component that could\n   * be either $mounted or $destroyed.\n   *\n   * @return {Base|Boolean}\n   */\n  get child() {\n    const child = this.$el.firstElementChild ? this.$el.firstElementChild.__base__ : false;\n\n    if (!child) {\n      throw new Error(\n        'The first and only child of the MediaQuery component must be another Base component.'\n      );\n    }\n\n    return child;\n  }\n\n  /**\n   * Get the current active breakpoint from the `useResize` service.\n   *\n   * @return {String}\n   */\n  get currentBreakpoint() {\n    return useResize().props().breakpoint;\n  }\n\n  /**\n   * Get a list of breakpoints in which the child component should be $mounted.\n   *\n   * @return {Array}\n   */\n  get activeBreakpoints() {\n    if (this.$el.dataset.activeBreakpoints) {\n      return this.$el.dataset.activeBreakpoints.split(' ');\n    }\n\n    return [];\n  }\n\n  /**\n   * Test if the child component should be either $mounted or $destroyed based on the current active\n   * breakpoint and the given list of breakpoints.\n   *\n   * @return {void}\n   */\n  test() {\n    const isInBreakpoints = this.activeBreakpoints.includes(this.currentBreakpoint);\n\n    if (isInBreakpoints && !this.child.$isMounted) {\n      this.child.$mount();\n      return;\n    }\n\n    if (!isInBreakpoints && this.child.$isMounted) {\n      this.child.$destroy();\n    }\n  }\n}\n","import keyCodes from './keyCodes';\n\nconst FOCUSABLE_ELEMENTS = [\n  'a[href]:not([tabindex^=\"-\"]):not([inert])',\n  'area[href]:not([tabindex^=\"-\"]):not([inert])',\n  'input:not([disabled]):not([inert])',\n  'select:not([disabled]):not([inert])',\n  'textarea:not([disabled]):not([inert])',\n  'button:not([disabled]):not([inert])',\n  'iframe:not([tabindex^=\"-\"]):not([inert])',\n  'audio:not([tabindex^=\"-\"]):not([inert])',\n  'video:not([tabindex^=\"-\"]):not([inert])',\n  '[contenteditable]:not([tabindex^=\"-\"]):not([inert])',\n  '[tabindex]:not([tabindex^=\"-\"]):not([inert])',\n];\n\n/**\n * Use a trap/untrap tabs logic.\n *\n * @return {Object} An object containing the trap and untrap methods.\n */\nexport default function useFocusTrap() {\n  let focusedBefore;\n\n  /**\n   * Save the current active element.\n   *\n   * @return {void}\n   */\n  function saveActiveElement() {\n    focusedBefore = document.activeElement;\n  }\n\n  /**\n   * Trap tab navigation inside the given element.\n   *\n   * @param  {HTMLElement} element The element in which to trap the tabulations.\n   * @param  {Event}       event   The keydown or keyup event.\n   * @return {void}\n   */\n  function trap(element, event) {\n    if (event.keyCode !== keyCodes.TAB) {\n      return;\n    }\n\n    // Save the previous focused element\n    if (!focusedBefore) {\n      focusedBefore = document.activeElement;\n    }\n\n    const focusableChildren = Array.from(element.querySelectorAll(FOCUSABLE_ELEMENTS.join(', ')));\n    const focusedItemIndex = focusableChildren.indexOf(document.activeElement);\n\n    if (!focusableChildren.length) {\n      return;\n    }\n\n    if (focusedItemIndex < 0) {\n      focusableChildren[0].focus();\n      event.preventDefault();\n    }\n\n    // If the SHIFT key is being pressed while tabbing (moving backwards) and\n    // the currently focused item is the first one, move the focus to the last\n    // focusable item from the dialog element\n    if (event.shiftKey && focusedItemIndex === 0) {\n      focusableChildren[focusableChildren.length - 1].focus();\n      event.preventDefault();\n    }\n\n    // If the SHIFT key is not being pressed (moving forwards) and the currently\n    // focused item is the last one, move the focus to the first focusable item\n    // from the dialog element\n    else if (!event.shiftKey && focusedItemIndex === focusableChildren.length - 1) {\n      focusableChildren[0].focus();\n      event.preventDefault();\n    }\n  }\n\n  /**\n   * Untrap the tab navigation.\n   *\n   * @return {void}\n   */\n  function untrap() {\n    if (focusedBefore && typeof focusedBefore.focus === 'function') {\n      focusedBefore.focus();\n      focusedBefore = null;\n    }\n  }\n\n  return { trap, untrap, saveActiveElement };\n}\n","import Base from '../abstracts/Base';\nimport transition from '../utils/css/transition';\nimport focusTrap from '../utils/focusTrap';\n\nconst { trap, untrap, saveActiveElement } = focusTrap();\n\n/**\n * Modal class.\n */\nexport default class Modal extends Base {\n  /**\n   * Modal options.\n   */\n  get config() {\n    return {\n      name: 'Modal',\n      move: false,\n      autofocus: '[autofocus]',\n      styles: {\n        modal: {\n          closed: {\n            opacity: 0,\n            pointerEvents: 'none',\n            visibility: 'hidden',\n          },\n        },\n      },\n    };\n  }\n\n  /**\n   * Open the modal on click on the `open` ref.\n   *\n   * @return {Function} The component's `open` method.\n   */\n  get onOpenClick() {\n    return this.open;\n  }\n\n  /**\n   * Close the modal on click on the `close` ref.\n   *\n   * @return {Function} The component's `close` method.\n   */\n  get onCloseClick() {\n    return this.close;\n  }\n\n  /**\n   * Close the modal on click on the `overlay` ref.\n   *\n   * @return {Function} The component's `close` method.\n   */\n  get onOverlayClick() {\n    return this.close;\n  }\n\n  /**\n   * Initialize the component's behaviours.\n   *\n   * @return {Modal} The current instance.\n   */\n  mounted() {\n    this.isOpen = false;\n    this.close();\n\n    if (this.$options.move) {\n      const target = document.querySelector(this.$options.move) || document.body;\n      const refsBackup = this.$refs;\n\n      this.refModalPlaceholder = document.createComment('');\n      this.refModalParentBackup = this.$refs.modal.parentElement || this.$el;\n      this.refModalParentBackup.insertBefore(this.refModalPlaceholder, this.$refs.modal);\n\n      this.refModalUnbindGetRefFilter = this.$on('get:refs', (refs) => {\n        Object.entries(refsBackup).forEach(([key, ref]) => {\n          if (!refs[key]) {\n            refs[key] = ref;\n          }\n        });\n      });\n      target.appendChild(this.$refs.modal);\n    }\n\n    return this;\n  }\n\n  /**\n   * Unbind all events on destroy.\n   *\n   * @return {Modal} The Modal instance.\n   */\n  destroyed() {\n    this.close();\n\n    if (this.$options.move) {\n      this.refModalParentBackup.insertBefore(this.$refs.modal, this.refModalPlaceholder);\n      this.refModalUnbindGetRefFilter();\n      this.refModalPlaceholder.remove();\n      delete this.refModalPlaceholder;\n      delete this.refModalParentBackup;\n      delete this.refModalUnbindGetRefFilter;\n    }\n\n    return this;\n  }\n\n  /**\n   * Close the modal on `ESC` and trap the tabulation.\n   *\n   * @param  {KeyboardEvent} options.event  The original keyboard event\n   * @param  {Boolean}       options.isUp   Is it a keyup event?\n   * @param  {Boolean}       options.isDown Is it a keydown event?\n   * @param  {Boolean}       options.ESC    Is it the ESC key?\n   * @return {void}\n   */\n  keyed({ event, isUp, isDown, ESC }) {\n    if (!this.isOpen) {\n      return;\n    }\n\n    if (isDown) {\n      trap(this.$refs.modal, event);\n    }\n\n    if (ESC && isUp) {\n      this.close();\n    }\n  }\n\n  /**\n   * Open the modal.\n   *\n   * @return {Modal} The Modal instance.\n   */\n  async open() {\n    if (this.isOpen) {\n      return Promise.resolve(this);\n    }\n\n    this.$refs.modal.setAttribute('aria-hidden', 'false');\n    document.documentElement.style.overflow = 'hidden';\n\n    this.isOpen = true;\n    this.$emit('open');\n\n    return Promise.all(\n      Object.entries(this.$options.styles).map(([refName, { open, active, closed } = {}]) =>\n        transition(\n          this.$refs[refName],\n          {\n            from: closed,\n            active,\n            to: open,\n          },\n          'keep'\n        )\n      )\n    ).then(() => {\n      if (this.$options.autofocus && this.$refs.modal.querySelector(this.$options.autofocus)) {\n        saveActiveElement();\n        this.$refs.modal.querySelector(this.$options.autofocus).focus();\n      }\n      return Promise.resolve(this);\n    });\n  }\n\n  /**\n   * Close the modal.\n   *\n   * @return {Modal} The Modal instance.\n   */\n  async close() {\n    if (!this.isOpen) {\n      return Promise.resolve(this);\n    }\n\n    this.$refs.modal.setAttribute('aria-hidden', 'true');\n    document.documentElement.style.overflow = '';\n\n    this.isOpen = false;\n    untrap();\n    this.$emit('close');\n\n    return Promise.all(\n      Object.entries(this.$options.styles).map(([refName, { open, active, closed } = {}]) =>\n        transition(\n          this.$refs[refName],\n          {\n            from: open,\n            active,\n            to: closed,\n          },\n          'keep'\n        )\n      )\n    ).then(() => Promise.resolve(this));\n  }\n}\n","import Base from '../abstracts/Base';\nimport transition from '../utils/css/transition';\n\n/**\n * Tabs class.\n */\nexport default class Tabs extends Base {\n  /**\n   * Tabs options.\n   */\n  get config() {\n    return {\n      name: 'Tabs',\n      styles: {\n        content: {\n          closed: {\n            position: 'absolute',\n            opacity: 0,\n            pointerEvents: 'none',\n            visibility: 'hidden',\n          },\n        },\n      },\n    };\n  }\n\n  /**\n   * Initialize the component's behaviours.\n   *\n   * @return {Tabs} The current instance.\n   */\n  mounted() {\n    this.items = this.$refs.btn.map((btn, index) => {\n      const id = `${this.$id}-${index}`;\n      const content = this.$refs.content[index];\n      btn.setAttribute('id', id);\n      content.setAttribute('aria-labelledby', id);\n\n      const item = { btn, content, isEnabled: index > 0 };\n      if (index > 0) {\n        this.disableItem(item);\n      } else {\n        this.enableItem(item);\n      }\n      return item;\n    });\n\n    return this;\n  }\n\n  /**\n   * Switch tab on button click.\n   *\n   * @param  {Event}  event The click event object.\n   * @param  {Number} index The index of the clicked button.\n   * @return {void}\n   */\n  onBtnClick(event, index) {\n    this.items.forEach((item, i) => {\n      if (i !== index) {\n        this.disableItem(item);\n      }\n    });\n\n    this.enableItem(this.items[index]);\n  }\n\n  /**\n   * Enable the given tab and its associated content.\n   *\n   * @param  {HTMLElement} btn     The tab element.\n   * @param  {HTMLElement} content The content element.\n   * @return {Tabs}                The Tabs instance.\n   */\n  async enableItem(item) {\n    if (!item || item.isEnabled) {\n      return Promise.resolve(this);\n    }\n\n    item.isEnabled = true;\n    const { btn, content } = item;\n    const btnStyles = this.$options.styles.btn || {};\n    const contentStyles = this.$options.styles.content || {};\n\n    content.setAttribute('aria-hidden', 'false');\n    this.$emit('enable', item);\n\n    return Promise.all([\n      transition(\n        btn,\n        {\n          from: btnStyles.closed,\n          active: btnStyles.active,\n          to: btnStyles.open,\n        },\n        'keep'\n      ),\n      transition(\n        content,\n        {\n          from: contentStyles.closed,\n          active: contentStyles.active,\n          to: contentStyles.open,\n        },\n        'keep'\n      ),\n    ]).then(() => Promise.resolve(this));\n  }\n\n  /**\n   * Disable the given tab and its associated content.\n   *\n   * @param  {HTMLElement} btn     The tab element.\n   * @param  {HTMLElement} content The content element.\n   * @return {Tabs}                The Tabs instance.\n   */\n  async disableItem(item) {\n    if (!item || !item.isEnabled) {\n      return Promise.resolve(this);\n    }\n\n    item.isEnabled = false;\n    const { btn, content } = item;\n    const btnStyles = this.$options.styles.btn || {};\n    const contentStyles = this.$options.styles.content || {};\n\n    content.setAttribute('aria-hidden', 'true');\n    this.$emit('disable', item);\n\n    return Promise.all([\n      transition(\n        btn,\n        {\n          from: btnStyles.open,\n          active: btnStyles.active,\n          to: btnStyles.closed,\n        },\n        'keep'\n      ),\n      transition(\n        content,\n        {\n          from: contentStyles.open,\n          active: contentStyles.active,\n          to: contentStyles.closed,\n        },\n        'keep'\n      ),\n    ]).then(() => Promise.resolve(this));\n  }\n}\n","import useResize from '../services/resize';\n\n/**\n * Test the breakpoins of the given Base instance and return the hook to call.\n *\n * @param  {Base}           instance The component's instance.\n * @return {String|Boolean}          The action to call ($mount|$destroy) or false.\n */\nfunction testBreakpoints(breakpoints) {\n  const { breakpoint } = useResize().props();\n  breakpoints.forEach(([breakpointKeys, instance]) => {\n    if (breakpointKeys.includes(breakpoint)) {\n      instance.$mount();\n    } else {\n      instance.$destroy();\n    }\n  });\n}\n\n/**\n * A cache object to hold each Base sub-instances.\n * @type {Object}\n */\nconst instances = {};\n\n/**\n * BreakpointManager class.\n */\nexport default (BaseClass, breakpoints) => {\n  if (!Array.isArray(breakpoints)) {\n    throw new Error('[withBreakpointManager] The `breakpoints` parameter must be an array.');\n  }\n\n  if (breakpoints.length < 2) {\n    throw new Error('[withBreakpointManager] You must define at least 2 breakpoints.');\n  }\n\n  const { add, props } = useResize();\n\n  // Do nothing if no breakpoint has been defined.\n  // @see https://js-toolkit.meta.fr/services/resize.html#breakpoint\n  if (!props().breakpoint) {\n    throw new Error(`The \\`BreakpointManager\\` class requires breakpoints to be defined.`);\n  }\n\n  return class BreakpointManager extends BaseClass {\n    /**\n     * Watch for the document resize to test the breakpoints.\n     * @param  {HTMLElement} element The component's root element.\n     * @return {BreakpointManager}          The current instance.\n     */\n    constructor(element) {\n      super(element);\n\n      instances[this.$id] = breakpoints.map(([bk, ComponentClass]) => {\n        // eslint-disable-next-line no-underscore-dangle\n        ComponentClass.prototype.__isChild__ = true;\n        const instance = new ComponentClass(this.$el);\n        Object.defineProperty(instance, '$parent', { get: () => this });\n        return [bk, instance];\n      });\n\n      add(`BreakpointManager-${this.$id}`, () => {\n        testBreakpoints(instances[this.$id]);\n      });\n\n      return this;\n    }\n\n    /**\n     * Override the default $mount method to prevent component's from being\n     * mounted when they should not.\n     * @return {Base} The Base instance.\n     */\n    $mount() {\n      testBreakpoints(instances[this.$id]);\n\n      return super.$mount();\n    }\n\n    /**\n     * Destroy all instances when the main one is destroyed.\n     * @return {Base} The Base instance.\n     */\n    $destroy() {\n      if (Array.isArray(instances[this.$id])) {\n        instances[this.$id].forEach(([, instance]) => {\n          instance.$destroy();\n        });\n      }\n\n      return super.$destroy();\n    }\n  };\n};\n","import useResize from '../services/resize';\n\n/**\n * Test the breakpoins of the given Base instance and return the hook to call.\n *\n * @param  {BreakpointObserver} instance The component's instance.\n * @return {Sring}                       The action to trigger.\n */\nfunction testBreakpoints(instance, breakpoint = useResize().props().breakpoint) {\n  const { activeBreakpoints, inactiveBreakpoints } = instance.$options;\n  const isInActiveBreakpoint =\n    activeBreakpoints && activeBreakpoints.split(' ').includes(breakpoint);\n  const isInInactiveBreakpoint =\n    inactiveBreakpoints && inactiveBreakpoints.split(' ').includes(breakpoint);\n\n  if (\n    (activeBreakpoints && isInActiveBreakpoint) ||\n    (inactiveBreakpoints && !isInInactiveBreakpoint)\n  ) {\n    return '$mount';\n  }\n\n  return '$destroy';\n}\n\n/**\n * Test if the given instance is configured for breakpoints.\n * @param  {Base}    instance A Base class instance.\n * @return {Boolean}          True if configured correctly, false otherwise.\n */\nfunction hasBreakpointConfiguration(instance) {\n  const { activeBreakpoints, inactiveBreakpoints } = instance.$options;\n  return Boolean(activeBreakpoints || inactiveBreakpoints);\n}\n\n/**\n * Test if the given instance has a conflicting configuration for breakpoints.\n * @param  {Base} instance A Base class instance.\n * @return {void}\n */\nfunction testConflictingBreakpointConfiguration(instance) {\n  const { activeBreakpoints, inactiveBreakpoints, name } = instance.$options;\n  if (activeBreakpoints && inactiveBreakpoints) {\n    throw new Error(\n      `[${name}] Incorrect configuration: the \\`activeBreakpoints\\` and \\`inactiveBreakpoints\\` are not compatible.`\n    );\n  }\n}\n\n/**\n * Add the current instance to the resize service.\n * @param {String} key      The key for the resize service callback.\n * @param {Base}   instance The instance to observe.\n */\nfunction addToResize(key, instance) {\n  testConflictingBreakpointConfiguration(instance);\n  const { add, has } = useResize();\n\n  if (!has(key)) {\n    add(key, function onResize({ breakpoint }) {\n      const action = testBreakpoints(instance, breakpoint);\n\n      // Always destroy before mounting\n      if (action === '$destroy' && instance.$isMounted) {\n        instance[action]();\n      } else if (action === '$mount' && !instance.$isMounted) {\n        setTimeout(() => instance[action](), 0);\n      }\n    });\n  }\n}\n\n/**\n * BreakpointObserver class.\n */\nexport default (BaseClass) =>\n  class BreakpointObserver extends BaseClass {\n    /**\n     * Watch for the document resize to test the breakpoints.\n     * @param  {HTMLElement} element The component's root element.\n     * @return {BreakpointObserver}          The current instance.\n     */\n    constructor(element) {\n      super(element);\n\n      const { add, has, remove, props } = useResize();\n      const { name } = this.$options;\n\n      // Do nothing if no breakpoint has been defined.\n      // @see https://js-toolkit.meta.fr/services/resize.html#breakpoint\n      if (!props().breakpoint) {\n        throw new Error(\n          `[${name}] The \\`BreakpointObserver\\` class requires breakpoints to be defined.`\n        );\n      }\n\n      const key = `BreakpointObserver-${this.$id}`;\n\n      // Watch change on the `data-options` attribute to emit the `set:options` event.\n      const mutationObserver = new MutationObserver(([mutation]) => {\n        if (mutation.type === 'attributes' && mutation.attributeName === 'data-options') {\n          // Stop here silently when no breakpoint configuration given.\n          if (!hasBreakpointConfiguration(this)) {\n            this.$mount();\n            remove(key);\n            return;\n          }\n\n          addToResize(key, this);\n        }\n      });\n      mutationObserver.observe(this.$el, { attributes: true });\n\n      // Stop here silently when no breakpoint configuration given.\n      if (!hasBreakpointConfiguration(this)) {\n        return this;\n      }\n\n      addToResize(key, this);\n      return this;\n    }\n\n    /**\n     * Override the default $mount method to prevent component's from being\n     * mounted when they should not.\n     * @return {BreakpointObserver} The component's instance.\n     */\n    $mount() {\n      // Execute normal behavior when no breakpoint configuration given.\n      if (!hasBreakpointConfiguration(this)) {\n        return super.$mount();\n      }\n\n      const action = testBreakpoints(this);\n      if (action === '$mount') {\n        return super.$mount();\n      }\n\n      return this;\n    }\n  };\n","import { debug } from '../abstracts/Base/utils';\n\n/**\n * Create an array of number between 0 and 1 from the given length.\n * @param  {Number} length The length of the array.\n * @return {Array}        An array of number.\n */\nfunction createArrayOfNumber(length) {\n  return [...new Array(length + 1)].map((val, index) => index / length);\n}\n\n/**\n * IntersectionObserver decoration.\n */\nexport default (BaseClass, defaultOptions = { threshold: createArrayOfNumber(100) }) =>\n  class extends BaseClass {\n    /**\n     * Add the `intersected` method to the list of method to exclude from the `autoBind` call.\n     */\n    get _excludeFromAutoBind() {\n      return [...(super._excludeFromAutoBind || []), 'intersected'];\n    }\n\n    /**\n     * Create an observer when the class in instantiated.\n     *\n     * @param  {HTMLElement} element The component's root element.\n     * @return {Base}                The class instace.\n     */\n    constructor(element) {\n      super(element);\n\n      if (!this.intersected || typeof this.intersected !== 'function') {\n        throw new Error('[withIntersectionObserver] The `intersected` method must be defined.');\n      }\n\n      this.$observer = new IntersectionObserver(\n        (entries) => {\n          debug(this, 'intersected', entries);\n          this.$emit('intersected', entries);\n          this.intersected(entries);\n        },\n        { ...defaultOptions, ...(this.$options.intersectionObserver || {}) }\n      );\n\n      if (this.$isMounted) {\n        this.$observer.observe(this.$el);\n      }\n\n      this.$on('mounted', () => {\n        this.$observer.observe(this.$el);\n      });\n\n      this.$on('destroyed', () => {\n        this.$observer.unobserve(this.$el);\n      });\n\n      return this;\n    }\n  };\n","/**\n * Format a CSS transform matrix with the given values.\n *\n * @param  {Number} options.scaleX     The scale on the x axis.\n * @param  {Number} options.scaleY     The scale on the y axis.\n * @param  {Number} options.skewX      The skew on the x axis.\n * @param  {Number} options.skewY      The skew on the y axis.\n * @param  {Number} options.translateX The translate on the x axis.\n * @param  {Number} options.translateY The translate on the y axis.\n * @return {String}                    A formatted CSS matrix transform.\n */\nexport default function matrix(transform) {\n  // eslint-disable-next-line no-param-reassign\n  transform = transform || {};\n  return `matrix(${transform.scaleX || 1}, ${transform.skewX || 0}, ${transform.skewY || 0}, ${\n    transform.scaleY || 1\n  }, ${transform.translateX || 0}, ${transform.translateY || 0})`;\n}\n","/**\n * Smooth step from currentValue to targetValue\n *\n * @param  {Int} targetValue we want to reech\n * @param  {Int} currentValue\n * @param  {Int} speed to reech target value\n * @return {Int}\n */\nexport default function damp(targetValue, currentValue, speed = 0.5) {\n  const value = currentValue + (targetValue - currentValue) * speed;\n  return Math.abs(targetValue - currentValue) < 0.001 ? targetValue : value;\n}\n","/**\n * Interpolate the ratio between a given interval.\n *\n * @param  {Number} min   The interval minimum value.\n * @param  {Number} max   The inverval maximum value.\n * @param  {Number} ratio The ratio to get.\n * @return {Number}       The value between min and max corresponding to ratio.\n */\nexport default function lerp(min, max, ratio) {\n  return (1 - ratio) * min + ratio * max;\n}\n","/**\n * Maps the value from one range of [inputMin..inputMax] to another range of [outputMin..outputMax].\n *\n * @param  {Number} value     The value to map.\n * @param  {Number} inputMin  The input's minimum value.\n * @param  {Number} inputMax  The input's maximum value.\n * @param  {Number} ouptutMin The output's minimum value.\n * @param  {Number} outputMax The intput's maximum value.\n * @return {Number}           The input value mapped to the output range.\n */\nexport default function map(value, inputMin, inputMax, outputMin, outputMax) {\n  return ((value - inputMin) * (outputMax - outputMin)) / (inputMax - inputMin) + outputMin;\n}\n","/**\n * Round a value with a given number of decimals.\n *\n * @param  {Number} value    The number to round.\n * @param  {Number} decimals The number of decimals to keep.\n * @return {Number}          A rounded number to the given decimals length.\n */\nexport default function round(value, decimals = 0) {\n  return Number(value.toFixed(decimals));\n}\n","import isObject from './object/isObject';\n\n/**\n * Set a param in a URLSearchParam instance.\n * @param  {URLSearchParams}                    params The params to update.\n * @param  {String}                             name   The name of the param to update.\n * @param  {String|Number|Boolean|Array|Object} value  The value for this param.\n * @return {URLSearchParams}                           The updated URLSearchParams instance.\n */\nfunction updateUrlSearchParam(params, name, value) {\n  if (!value) {\n    if (params.has(name)) {\n      params.delete(name);\n    }\n    return params;\n  }\n\n  if (Array.isArray(value)) {\n    value.forEach((val, index) => {\n      const arrayName = `${name}[${index}]`;\n      updateUrlSearchParam(params, arrayName, val);\n    });\n    return params;\n  }\n\n  if (isObject(value)) {\n    Object.entries(value).forEach(([key, val]) => {\n      const objectName = `${name}[${key}]`;\n      updateUrlSearchParam(params, objectName, val);\n    });\n    return params;\n  }\n\n  params.set(name, value);\n  return params;\n}\n\n/**\n * Transform an object to an URLSearchParams instance.\n *\n * @param  {Object}          obj           The object to convert.\n * @param  {String}          defaultSearch A string of defaults search params.\n * @return {URLSearchParams}\n */\nfunction objectToURLSearchParams(obj, defaultSearch = window.location.search) {\n  return Object.entries(obj).reduce(\n    (urlSearchParams, [name, value]) => updateUrlSearchParam(urlSearchParams, name, value),\n    new URLSearchParams(defaultSearch)\n  );\n}\n\n/**\n * Update the history with a new state.\n * @param {String} mode             Wether to push or replace the new state.\n * @param {String} options.path     The new pathname.\n * @param {Object} options.search   The new search params.\n * @param {Object} options.hash     The new hash.\n */\nfunction updateHistory(\n  mode,\n  { path = window.location.pathname, search = {}, hash = window.location.hash },\n  data = {},\n  title = ''\n) {\n  if (!window.history) {\n    return;\n  }\n\n  let url = path;\n\n  const mergedSearch = objectToURLSearchParams(search);\n  if (mergedSearch.toString()) {\n    url += `?${mergedSearch.toString()}`;\n  }\n\n  if (hash) {\n    if (hash.startsWith('#')) {\n      url += hash;\n    } else {\n      url += `#${hash}`;\n    }\n  }\n\n  const method = `${mode}State`;\n  window.history[method](data, title, url);\n}\n\n/**\n * Push a new state.\n *\n * @param {Object} options The new state.\n * @param {Object} data    The data for the new state.\n * @param {String} title   The title for the new state.\n */\nexport function push(options, data, title) {\n  updateHistory('push', options, data, title);\n}\n\n/**\n * Replace a new state.\n *\n * @param {Object} options The new state.\n * @param {Object} data    The data for the new state.\n * @param {String} title   The title for the new state.\n */\nexport function replace(options, data, title) {\n  updateHistory('replace', options, data, title);\n}\n"],"names":["getAllProperties","object","props","proto","Object","getPrototypeOf","prototype","getOwnPropertyNames","map","name","reduce","acc","val","autoBind","instance","include","exclude","filter","key","match","pattern","test","some","forEach","descriptor","getOwnPropertyDescriptor","value","bind","EventManager","_events","$on","event","listener","Array","isArray","push","$off","index","indexOf","splice","$emit","apply","$once","handler","debug","$options","window","console","log","config","hasMethod","obj","callMethod","method","args","$isMounted","call","getChild","el","ComponentClass","parent","__base__","__isBase__","defineProperty","child","get","asyncComponent","then","module","default","__isAsync__","getComponentElements","nameOrSelector","element","document","selector","elements","from","querySelectorAll","length","getChildren","components","children","entries","getOptions","options","dataset","JSON","parse","err","Error","merge","setOptions","newOptions","stringify","scopeSelectorPonyfill","uniqId","list","attr","scopedSelector","setAttribute","removeAttribute","getRefs","allRefs","childrenRefs","$id","ref","includes","refs","$refs","$ref","refName","$realRef","endsWith","replace","mountComponent","component","$mount","mountComponents","$children","values","$child","destroyComponent","$destroy","destroyComponents","Service","callbacks","Map","isInit","init","kill","add","callback","has","size","set","remove","delete","trigger","throttle","fn","delay","lastCall","now","Date","getTime","debounce","timeout","clearTimeout","setTimeout","getRaf","requestAnimationFrame","nextFrame","raf","Promise","resolve","Raf","isTicking","loop","time","performance","Pointer","isDown","y","innerHeight","yLast","x","innerWidth","xLast","useRaf","hasRaf","debounced","updateValues","downHandler","upHandler","documentElement","addEventListener","once","passive","removeEventListener","touches","clientY","clientX","changed","last","delta","progress","max","pointer","Resize","canUseResizeObserver","resizeObserver","ResizeObserver","observe","disconnect","width","height","ratio","orientation","breakpointElement","breakpoint","breakpoints","querySelector","getComputedStyle","getPropertyValue","split","resize","Scroll","pageYOffset","pageXOffset","scrollingElement","body","scrollWidth","scrollHeight","scroll","ENTER","SPACE","TAB","ESC","LEFT","UP","RIGHT","DOWN","Key","triggered","previousEvent","keys","keyCodes","code","keyCode","type","direction","isUp","initService","service","bindServices","unbindMethods","useScroll","useResize","usePointer","useKey","loadedHandler","bindRootEvents","eventMethods","eventMethod","eventName","toLowerCase","$el","bindRefsEvents","$refOrRefs","refEventMethod","c","toUpperCase","startsWith","constructor","unbindMethod","bindChildrenEvents","childName","childEventMethod","bindEvents","ROOT_EVENT_REGEX","REFS_CHILDREN_EVENT_REGEX","root","refsOrChildren","Base","defineProperties","nanoid","writable","configurable","_excludeFromAutoBind","__isChild__","$log","$update","$terminate","$factory","defineComponent","methods","hooks","Component","allowedHooks","filteredHooks","join","createBase","elementOrSelector","isObject","toString","setStyles","styles","prop","style","classNames","setClasses","className","classList","toggle","transition","endMode","classesOrStyles","active","to","__isTransitioning__","end","start","next","hasTransition","testTransition","__transitionEndHandler__","setClassesOrStyles","classes","transitionDuration","mode","AccordionItem","mounted","$parent","item","btn","contentId","content","isOpen","updateAttributes","container","visibility","otherStyles","open","closed","onBtnClick","close","all","offsetHeight","position","Accordion","unbindOpen","autoclose","i","it","unbindClose","destroyed","unbind","MediaQuery","resized","isInBreakpoints","activeBreakpoints","currentBreakpoint","firstElementChild","FOCUSABLE_ELEMENTS","useFocusTrap","focusedBefore","saveActiveElement","activeElement","trap","focusableChildren","focusedItemIndex","focus","preventDefault","shiftKey","untrap","focusTrap","Modal","move","target","refsBackup","refModalPlaceholder","createComment","refModalParentBackup","modal","parentElement","insertBefore","refModalUnbindGetRefFilter","appendChild","keyed","overflow","autofocus","opacity","pointerEvents","Tabs","items","id","isEnabled","disableItem","enableItem","btnStyles","contentStyles","testBreakpoints","breakpointKeys","instances","BaseClass","bk","inactiveBreakpoints","isInActiveBreakpoint","isInInactiveBreakpoint","hasBreakpointConfiguration","Boolean","testConflictingBreakpointConfiguration","addToResize","onResize","action","mutationObserver","MutationObserver","mutation","attributeName","attributes","createArrayOfNumber","defaultOptions","threshold","intersected","$observer","IntersectionObserver","intersectionObserver","unobserve","matrix","transform","scaleX","skewX","skewY","scaleY","translateX","translateY","damp","targetValue","currentValue","speed","Math","abs","lerp","min","inputMin","inputMax","outputMin","outputMax","round","decimals","Number","toFixed","updateUrlSearchParam","params","arrayName","objectName","objectToURLSearchParams","defaultSearch","location","search","urlSearchParams","URLSearchParams","updateHistory","data","title","path","pathname","hash","history","url","mergedSearch"],"mappings":"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"}