{"version":3,"file":"full.umd.js","sources":["../node_modules/nanoid/non-secure/index.js","../src/utils/object/getAllProperties.js","../src/utils/object/autoBind.js","../src/abstracts/EventManager.js","../src/abstracts/Base/utils.js","../src/abstracts/Base/children.js","../node_modules/deepmerge/dist/cjs.js","../node_modules/lower-case/dist.es2015/index.js","../node_modules/no-case/dist.es2015/index.js","../src/utils/object/isObject.js","../src/abstracts/Base/classes/Options.js","../src/abstracts/Base/options.js","../src/abstracts/Base/refs.js","../src/abstracts/Base/components.js","../src/abstracts/Service.js","../src/utils/throttle.js","../src/utils/debounce.js","../src/utils/nextFrame.js","../src/services/raf.js","../src/services/pointer.js","../src/services/resize.js","../src/services/scroll.js","../src/utils/keyCodes.js","../src/services/key.js","../src/services/load.js","../src/abstracts/Base/classes/Services.js","../src/abstracts/Base/events.js","../src/abstracts/Base/index.js","../src/index.js","../src/utils/css/styles.js","../src/utils/css/classes.js","../src/utils/css/transition.js","../src/components/Accordion/AccordionItem.js","../src/components/Accordion/index.js","../src/utils/math/damp.js","../src/utils/css/matrix.js","../src/components/Cursor.js","../src/utils/focusTrap.js","../src/components/Modal.js","../src/components/Tabs.js","../src/decorators/withBreakpointManager.js","../src/decorators/withBreakpointObserver.js","../src/decorators/withIntersectionObserver.js","../src/utils/math/lerp.js","../src/utils/math/map.js","../src/utils/math/round.js","../src/utils/history.js"],"sourcesContent":["// This alphabet uses `A-Za-z0-9_-` symbols. The genetic algorithm helped\n// optimize the gzip compression for this alphabet.\nlet urlAlphabet =\n  'ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW'\n\nlet customAlphabet = (alphabet, size) => {\n  return () => {\n    let id = ''\n    // A compact alternative for `for (var i = 0; i < step; i++)`.\n    let i = size\n    while (i--) {\n      // `| 0` is more compact and faster than `Math.floor()`.\n      id += alphabet[(Math.random() * alphabet.length) | 0]\n    }\n    return id\n  }\n}\n\nlet nanoid = (size = 21) => {\n  let id = ''\n  // A compact alternative for `for (var i = 0; i < step; i++)`.\n  let i = size\n  while (i--) {\n    // `| 0` is more compact and faster than `Math.floor()`.\n    id += urlAlphabet[(Math.random() * 64) | 0]\n  }\n  return id\n}\n\nexport { nanoid, customAlphabet }\n","/**\n * Gets all non-builtin properties up the prototype chain.\n *\n * @param  {Object} object The object to get the propeties from.\n * @param  {Array=} [props=[]] The already existing properties.\n * @return {Array<[String, Object]>} An array of properties and the prototype they belong to.\n */\nexport default function getAllProperties(object, props = []) {\n  const proto = Object.getPrototypeOf(object);\n\n  if (proto === Object.prototype) {\n    return props;\n  }\n\n  return getAllProperties(\n    proto,\n    Object.getOwnPropertyNames(proto)\n      .map((name) => [name, proto])\n      .reduce((acc, val) => [...acc, val], props)\n  );\n}\n","import getAllProperties from './getAllProperties';\n\n/**\n * Auto-bind methods to an instance.\n *\n * @param  {Object}               instance          The instance.\n * @param  {Object}               options           Define specific methods to include or exlude.\n * @param  {Array<String|RegExp>} [options.include] Methods to include.\n * @param  {Array<String|RegExp>} [options.exclude] Methods to exclude.\n * @return {Object}                                 The instance.\n */\nexport default function autoBind(instance, options) {\n  const { exclude, include } = options || {};\n  const filter = (key) => {\n    const match = (pattern) => (typeof pattern === 'string' ? key === pattern : pattern.test(key));\n\n    if (include) {\n      return include.some(match);\n    }\n\n    if (exclude) {\n      return !exclude.some(match);\n    }\n\n    return true;\n  };\n\n  getAllProperties(instance)\n    .filter(([key]) => key !== 'constructor' && filter(key))\n    .forEach(([key, object]) => {\n      const descriptor = Object.getOwnPropertyDescriptor(object, key);\n      if (descriptor && typeof descriptor.value === 'function') {\n        instance[key] = instance[key].bind(instance);\n      }\n    });\n\n  return instance;\n}\n","/* eslint no-underscore-dangle: [\"error\", { \"allow\": [\"_events\"] }] */\n/**\n * Event management class.\n */\nexport default class EventManager {\n  /** @type {{[eventName:string]: Array<Function>}} An object to store the events */\n  _events = {};\n\n  /**\n   * Bind a listener function to an event.\n   *\n   * @param  {String}   event    Name of the event.\n   * @param  {Function} listener Function to be called.\n   * @return {Function}          A function to unbind the listener.\n   */\n  $on(event, listener) {\n    if (!Array.isArray(this._events[event])) {\n      this._events[event] = [];\n    }\n    this._events[event].push(listener);\n\n    return () => {\n      this.$off(event, listener);\n    };\n  }\n\n  /**\n   * Unbind a listener function from an event.\n   *\n   * @param  {String}       event    Name of the event.\n   * @param  {Function}     listener Function to be removed.\n   * @return {EventManager}          The current instance.\n   */\n  $off(event, listener) {\n    // If no event specified, we remove them all.\n    if (!event) {\n      this._events = {};\n      return this;\n    }\n    // If no listener have been specified, we remove all\n    // the listeners for the given event.\n    if (!listener) {\n      this._events[event] = [];\n      return this;\n    }\n\n    const index = this._events[event].indexOf(listener);\n\n    if (index > -1) {\n      this._events[event].splice(index, 1);\n    }\n\n    return this;\n  }\n\n  /**\n   * Emits an event.\n   *\n   * @param  {String}       event Name of the event.\n   * @param  {Array}        args  The arguments to apply to the functions bound to this event.\n   * @return {EventManager}       The current instance.\n   */\n  $emit(event, ...args) {\n    if (!Array.isArray(this._events[event])) {\n      return this;\n    }\n\n    this._events[event].forEach((listener) => {\n      listener.apply(this, args);\n    });\n    return this;\n  }\n\n  /**\n   * Bind a listener function to an event for one execution only.\n   *\n   * @param  {String}       event    Name of the event.\n   * @param  {Function}     listener Function to be called.\n   * @return {EventManager}          The current instance.\n   */\n  $once(event, listener) {\n    const instance = this;\n    this.$on(\n      event,\n      /**\n       * @param {...any} args\n       */\n      function handler(...args) {\n        instance.$off(event, handler);\n        listener.apply(instance, args);\n      }\n    );\n    return this;\n  }\n}\n","/**\n * @typedef {import('./index').default} Base\n * @typedef {import('./index').BaseConfig} BaseConfig\n */\n\n/**\n * Get the config from a Base instance, either the new static one or the old getter one.\n *\n * @param  {Base}       instance The instance to get the config from.\n * @return {BaseConfig}         A Base class configuration object.\n */\nexport function getConfig(instance) {\n  // @ts-ignore\n  const config = instance.constructor.config || instance.config;\n\n  if (!config) {\n    throw new Error('The `config` property must be defined.');\n  }\n\n  if (!config.name) {\n    throw new Error('The `config.name` property is required.');\n  }\n\n  // @ts-ignore\n  if (instance.config && !instance.constructor.config) {\n    console.warn(\n      `[${config.name}]`,\n      'Defining the `config` as a getter is deprecated, replace it with a static property.'\n    );\n  }\n\n  return config;\n}\n\n/**\n * Display a console warning for the given instance.\n *\n * @param {Base}      instance A Base instance.\n * @param {...String} msg   Values to display in the console.\n */\nexport function warn(instance, ...msg) {\n  const { name } = getConfig(instance);\n  console.warn(`[${name}]`, ...msg);\n}\n\n/**\n * Display a console log for the given instance.\n *\n * @param {Base}   instance The instance to log information from.\n * @param {...any} msg      The data to print to the console.\n */\nexport function log(instance, ...msg) {\n  const { name } = getConfig(instance);\n  console.log(`[${name}]`, ...msg);\n}\n\n/**\n * Verbose debug for the component.\n *\n * @param {Base}   instance The instance to debug.\n * @param {...any} args     The data to print.\n */\nexport function debug(instance, ...args) {\n  if (typeof process !== 'undefined' && process?.env?.NODE_ENV === 'development') {\n    if (instance.$options.debug) {\n      log(instance, ...args);\n    }\n  }\n}\n\n/**\n * Test if an object has a method.\n *\n * @param  {Object}  obj  The object to test\n * @param  {String}  name The method's name\n * @return {Boolean}\n */\nexport function hasMethod(obj, name) {\n  return typeof obj[name] === 'function';\n}\n\n/**\n * Call the given method while applying the given arguments.\n *\n * @param {Base}   instance The Base instance on which to trigger the method.\n * @param {String} method   The method to call.\n * @param {...any} args     The arguments to pass to the method.\n */\nexport function callMethod(instance, method, ...args) {\n  debug(instance, 'callMethod', method, ...args);\n\n  // Prevent duplicate call of `mounted` and `destroyed`\n  // methods based on the component status\n  if (\n    (method === 'destroyed' && !instance.$isMounted) ||\n    (method === 'mounted' && instance.$isMounted)\n  ) {\n    debug(instance, 'not', method, 'because the method has already been triggered once.');\n    return instance;\n  }\n\n  instance.$emit(method, ...args);\n\n  // We always emit an event, but we do not call the method if it does not exist\n  if (!hasMethod(instance, method)) {\n    return instance;\n  }\n\n  instance[method].call(instance, ...args);\n  debug(instance, method, instance, ...args);\n\n  return instance;\n}\n","import { debug } from './utils';\n\n/**\n * @typedef {import('./index.js').default} Base\n * @typedef {import('./index.js').BaseComponent} BaseComponent\n * @typedef {import('./index.js').BaseAsyncComponent} BaseAsyncComponent\n * @typedef {import('./index.js').BaseConfigComponents} BaseConfigComponents\n */\n\n/**\n * Get a child component.\n *\n * @param {HTMLElement & { __base__?: Base | 'terminated' }} el\n *   The root element of the child component.\n * @param {BaseComponent|BaseAsyncComponent} ComponentClass\n *   A Base class or a Promise for async components.\n * @param {Base} parent\n *   The parent component instance.\n * @return {Base|Promise|'terminated'}\n *   A Base instance or a Promise resolving to a Base instance.\n */\nfunction getChild(el, ComponentClass, parent) {\n  // Return existing instance if it exists\n  if (el.__base__) {\n    return el.__base__;\n  }\n\n  // Return a new instance if the component class is a child of the Base class\n  if ('$isBase' in ComponentClass) {\n    const child = new ComponentClass(el);\n    Object.defineProperty(child, '$parent', { get: () => parent });\n    return child;\n  }\n\n  // Resolve async components\n  return ComponentClass().then((module) => {\n    // @ts-ignore\n    return getChild(el, module.default ?? module, parent);\n  });\n}\n\n/**\n * Get a list of elements based on the name of a component.\n *\n * @param {String} nameOrSelector\n *   The name or selector to used for this component.\n * @param {HTMLElement|Document} element\n *   The root element on which to query the selector, defaults to `document`.\n * @return {Array<HTMLElement>}\n *   A list of elements on which the component should be mounted.\n */\nexport function getComponentElements(nameOrSelector, element = document) {\n  const selector = `[data-component=\"${nameOrSelector}\"]`;\n  let elements = [];\n\n  try {\n    elements = Array.from(element.querySelectorAll(selector));\n    // eslint-disable-next-line no-empty\n  } catch {}\n\n  // If no child component found with the default selector, try a classic DOM selector\n  if (elements.length === 0) {\n    elements = Array.from(element.querySelectorAll(nameOrSelector));\n  }\n\n  return elements;\n}\n\n/**\n * Get child components.\n * @param  {Base}                 instance   The component's instance.\n * @param  {HTMLElement}          element    The component's root element\n * @param  {BaseConfigComponents} components The children components' classes\n * @return {null|Object}                     Returns `null` if no child components are defined or an object of all child component instances\n */\nexport function getChildren(instance, element, components) {\n  debug(instance, 'before:getChildren', element, components);\n  const children = Object.entries(components).reduce((acc, [name, ComponentClass]) => {\n    Object.defineProperty(acc, name, {\n      get() {\n        const elements = getComponentElements(name, element);\n\n        if (elements.length === 0) {\n          return [];\n        }\n\n        return (\n          elements\n            .map((el) => getChild(el, ComponentClass, instance))\n            // Filter out terminated children\n            // @ts-ignore\n            .filter((el) => el !== 'terminated')\n        );\n      },\n      enumerable: true,\n      configurable: true,\n    });\n\n    return acc;\n  }, {});\n\n  instance.$emit('get:children', children);\n  debug(instance, 'after:getChildren', children);\n  return children;\n}\n\nexport default {\n  getChildren,\n};\n","'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn target.propertyIsEnumerable(symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n","/**\n * Source: ftp://ftp.unicode.org/Public/UCD/latest/ucd/SpecialCasing.txt\n */\nvar SUPPORTED_LOCALE = {\n    tr: {\n        regexp: /\\u0130|\\u0049|\\u0049\\u0307/g,\n        map: {\n            İ: \"\\u0069\",\n            I: \"\\u0131\",\n            İ: \"\\u0069\",\n        },\n    },\n    az: {\n        regexp: /\\u0130/g,\n        map: {\n            İ: \"\\u0069\",\n            I: \"\\u0131\",\n            İ: \"\\u0069\",\n        },\n    },\n    lt: {\n        regexp: /\\u0049|\\u004A|\\u012E|\\u00CC|\\u00CD|\\u0128/g,\n        map: {\n            I: \"\\u0069\\u0307\",\n            J: \"\\u006A\\u0307\",\n            Į: \"\\u012F\\u0307\",\n            Ì: \"\\u0069\\u0307\\u0300\",\n            Í: \"\\u0069\\u0307\\u0301\",\n            Ĩ: \"\\u0069\\u0307\\u0303\",\n        },\n    },\n};\n/**\n * Localized lower case.\n */\nexport function localeLowerCase(str, locale) {\n    var lang = SUPPORTED_LOCALE[locale.toLowerCase()];\n    if (lang)\n        return lowerCase(str.replace(lang.regexp, function (m) { return lang.map[m]; }));\n    return lowerCase(str);\n}\n/**\n * Lower case as a function.\n */\nexport function lowerCase(str) {\n    return str.toLowerCase();\n}\n//# sourceMappingURL=index.js.map","import { lowerCase } from \"lower-case\";\n// Support camel case (\"camelCase\" -> \"camel Case\" and \"CAMELCase\" -> \"CAMEL Case\").\nvar DEFAULT_SPLIT_REGEXP = [/([a-z0-9])([A-Z])/g, /([A-Z])([A-Z][a-z])/g];\n// Remove all non-word characters.\nvar DEFAULT_STRIP_REGEXP = /[^A-Z0-9]+/gi;\n/**\n * Normalize the string into something other libraries can manipulate easier.\n */\nexport function noCase(input, options) {\n    if (options === void 0) { options = {}; }\n    var _a = options.splitRegexp, splitRegexp = _a === void 0 ? DEFAULT_SPLIT_REGEXP : _a, _b = options.stripRegexp, stripRegexp = _b === void 0 ? DEFAULT_STRIP_REGEXP : _b, _c = options.transform, transform = _c === void 0 ? lowerCase : _c, _d = options.delimiter, delimiter = _d === void 0 ? \" \" : _d;\n    var result = replace(replace(input, splitRegexp, \"$1\\0$2\"), stripRegexp, \"\\0\");\n    var start = 0;\n    var end = result.length;\n    // Trim the delimiter from around the output string.\n    while (result.charAt(start) === \"\\0\")\n        start++;\n    while (result.charAt(end - 1) === \"\\0\")\n        end--;\n    // Transform each token independently.\n    return result.slice(start, end).split(\"\\0\").map(transform).join(delimiter);\n}\n/**\n * Replace `re` in the input string with the replacement value.\n */\nfunction replace(input, re, value) {\n    if (re instanceof RegExp)\n        return input.replace(re, value);\n    return re.reduce(function (input, re) { return input.replace(re, value); }, input);\n}\n//# sourceMappingURL=index.js.map","/**\n * Test if the given value is an object.\n *\n * @param {*} value The value to test.\n * @return {Boolean} Whether or not the value is an object.\n */\nexport default function isObject(value) {\n  return typeof value === 'object' && !!value && value.toString() === '[object Object]';\n}\n","import deepmerge from 'deepmerge';\nimport { noCase } from 'no-case';\nimport isObject from '../../../utils/object/isObject';\n\n/**\n * @typedef {StringConstructor|NumberConstructor|BooleanConstructor|ArrayConstructor|ObjectConstructor} OptionType\n * @typedef {{ [name:string]: OptionType | { type: OptionType, default: String|Number|Boolean|(() => Array|Object)} }} OptionsSchema\n * @typedef {{ [optionName:string]: any }} OptionsInterface\n */\n\n/**\n * Get the attribute name based on the given option name.\n * @param {String} name The option name.\n */\nfunction getAttributeName(name) {\n  return `data-option-${noCase(name, { delimiter: '-' })}`;\n}\n\n/**\n * Class options to manage options as data attributes on an HTML element.\n * @augments {OptionsInterface}\n */\nexport default class Options {\n  /** @type {HTMLElement} The HTML element holding the options attributes. */\n  #element;\n\n  /** @type {Object} An object to store Array and Object values for reference. */\n  #values = {};\n\n  /** @type {Array} List of allowed types. */\n  static types = [String, Number, Boolean, Array, Object];\n\n  /**\n   * The default values to return for each available type.\n   * @type {Object}\n   */\n  #defaultValues = {\n    String: '',\n    Number: 0,\n    Boolean: false,\n    Array: () => [],\n    Object: () => ({}),\n  };\n\n  /**\n   * Class constructor.\n   *\n   * @param {HTMLElement}   element The HTML element storing the options.\n   * @param {OptionsSchema} schema  A Base class config.\n   */\n  constructor(element, schema) {\n    this.#element = element;\n\n    Object.entries(schema).forEach(([name, config]) => {\n      const isObjectConfig = !Options.types.includes(config);\n      /** @type {OptionType} */\n      // @ts-ignore\n      const type = isObjectConfig ? config.type : config;\n\n      if (!Options.types.includes(type)) {\n        throw new Error(\n          `The \"${name}\" option has an invalid type. The allowed types are: String, Number, Boolean, Array and Object.`\n        );\n      }\n\n      // @ts-ignore\n      const defaultValue = isObjectConfig ? config.default : this.#defaultValues[type.name];\n\n      if ((type === Array || type === Object) && typeof defaultValue !== 'function') {\n        throw new Error(\n          `The default value for options of type \"${type.name}\" must be returned by a function.`\n        );\n      }\n\n      Object.defineProperty(this, name, {\n        get() {\n          return this.get(name, type, defaultValue);\n        },\n        set(value) {\n          this.set(name, type, value);\n        },\n        enumerable: true,\n      });\n    });\n\n    return this;\n  }\n\n  /**\n   * Get an option value.\n   *\n   * @param {String} name The option name.\n   * @param {ArrayConstructor|ObjectConstructor|StringConstructor|NumberConstructor|BooleanConstructor} type The option data's type.\n   * @param {any} defaultValue The default value for this option.\n   */\n  get(name, type, defaultValue) {\n    const attributeName = getAttributeName(name);\n    const hasAttribute = this.#element.hasAttribute(attributeName);\n\n    if (type === Boolean) {\n      if (!hasAttribute && defaultValue) {\n        this.#element.setAttribute(attributeName, '');\n      }\n      return hasAttribute || defaultValue;\n    }\n\n    const value = this.#element.getAttribute(attributeName);\n\n    if (type === Number) {\n      return hasAttribute ? Number(value) : defaultValue;\n    }\n\n    if (type === Array || type === Object) {\n      const val = deepmerge(\n        defaultValue(),\n        hasAttribute ? JSON.parse(value) : this.#defaultValues[type.name]()\n      );\n\n      if (!this.#values[name]) {\n        this.#values[name] = val;\n      } else if (val !== this.#values[name]) {\n        // When getting the value, wait for the next loop to update the data attribute\n        // with the new value. This is a simple trick to avoid using a Proxy to watch\n        // for any deep changes on an array or object. It should not break anything as\n        // the original value is read once from the data attribute and is then read from\n        // the private property `#values`.\n        setTimeout(() => {\n          this.#element.setAttribute(attributeName, JSON.stringify(this.#values[name]));\n        }, 0);\n      }\n\n      return this.#values[name];\n    }\n\n    return hasAttribute ? value : defaultValue;\n  }\n\n  /**\n   * Set an option value.\n   *\n   * @param {String} name The option name.\n   * @param {ArrayConstructor|ObjectConstructor|StringConstructor|NumberConstructor|BooleanConstructor} type The option data's type.\n   * @param {any} value The new value for this option.\n   */\n  set(name, type, value) {\n    const attributeName = getAttributeName(name);\n\n    if (value.constructor.name !== type.name) {\n      const val = Array.isArray(value) || isObject(value) ? JSON.stringify(value) : value;\n      throw new TypeError(\n        `The \"${val}\" value for the \"${name}\" option must be of type \"${type.name}\"`\n      );\n    }\n\n    switch (type) {\n      case Boolean:\n        if (value) {\n          this.#element.setAttribute(attributeName, '');\n        } else {\n          this.#element.removeAttribute(attributeName);\n        }\n        break;\n      case Array:\n      case Object:\n        this.#values[name] = value;\n        this.#element.setAttribute(attributeName, JSON.stringify(value));\n        break;\n      default:\n        this.#element.setAttribute(attributeName, value);\n    }\n  }\n}\n","import Options from './classes/Options';\nimport { warn } from './utils';\n\n/**\n * @typedef {import('./index').default} Base\n * @typedef {import('./index').BaseOptions} BaseOptions\n * @typedef {import('./classes/Options').OptionsSchema} OptionsSchema\n */\n\n/**\n * Get the legacy options from the `config` properties.\n *\n * @param {Base}   instance The component's instance.\n * @param {Object} config   The component's config.\n * @return {OptionsSchema}\n */\nfunction getLegacyOptionsSchema(instance, config) {\n  // Add legacy options to the schema\n  const propsToExclude = ['name', 'log', 'debug', 'components', 'refs', 'options'];\n  return Object.keys(config).reduce(\n    /**\n     * @param {OptionsSchema} schema\n     * @param {String} propName\n     */\n    (schema, propName) => {\n      if (propsToExclude.includes(propName)) {\n        return schema;\n      }\n\n      const value = config[propName];\n      let type = value === null || value === undefined ? Object : value.constructor;\n\n      // Default to object type as it should work for any values.\n      if (!Options.types.includes(type)) {\n        type = Object;\n      }\n\n      warn(\n        instance,\n        '\\n  Options must be defined in the `config.options` property.',\n        `\\n  Consider moving the \\`config.${propName}\\` option to \\`config.options.${propName}\\`.`\n      );\n\n      if (type === Array || type === Object) {\n        schema[propName] = { type, default: () => value };\n      } else {\n        schema[propName] = { type, default: value };\n      }\n\n      return schema;\n    },\n    {}\n  );\n}\n\n/**\n * Get the inherited options values from the current instance parent classes.\n * @param {Base} instance The component's instance.\n * @return {OptionsSchema}\n */\nfunction getParentOptionsSchema(instance) {\n  /** @type {OptionsSchema} [description] */\n  let schema = {};\n\n  /** @type {Base|false} Merge inherited options. */\n  let prototype = instance;\n\n  while (prototype) {\n    const getterConfig = prototype.config;\n    // @ts-ignore\n    const staticConfig = prototype.constructor.config;\n    if (getterConfig || staticConfig) {\n      schema = Object.assign(\n        (getterConfig || {}).options || {},\n        (staticConfig || {}).options || {},\n        schema\n      );\n      prototype = Object.getPrototypeOf(prototype);\n    } else {\n      prototype = false;\n    }\n  }\n\n  return schema;\n}\n\n/**\n * Update an Options object with the legacy values from the element's `data-options` attribute.\n *\n * @param {Base}        instance The component's instance.\n * @param {HTMLElement} element The component's root element.\n * @param {Options}     options The component's options.\n */\nfunction updateOptionsWithLegacyValues(instance, element, options) {\n  // Update legacy options with value from the `data-options` attribute\n  let legacyOptionsValues = {};\n  if (element.dataset.options) {\n    warn(\n      instance,\n      'The `data-options` attribute usage is deprecated, use multiple `data-option-...` attributes instead.'\n    );\n    try {\n      legacyOptionsValues = JSON.parse(element.dataset.options);\n    } catch (err) {\n      throw new Error('Can not parse the `data-options` attribute. Is it a valid JSON string?');\n    }\n  }\n\n  Object.entries(legacyOptionsValues).forEach(([optionName, optionValue]) => {\n    options[optionName] = optionValue;\n  });\n}\n\n/**\n * Get a component's options.\n *\n * @param  {Base}        instance The component's instance.\n * @param  {HTMLElement} element  The component's root element.\n * @param  {Object}      config   The component's default config.\n * @return {Options & BaseOptions}              The component's merged options.\n */\nexport function getOptions(instance, element, config) {\n  /** @type {OptionsSchema} */\n  const schema = {\n    name: {\n      type: String,\n      default: config.name,\n    },\n    log: {\n      type: Boolean,\n      default: config.log ?? false,\n    },\n    debug: {\n      type: Boolean,\n      default: config.debug ?? false,\n    },\n    ...getParentOptionsSchema(instance),\n    ...getLegacyOptionsSchema(instance, config),\n    ...(config.options || {}),\n  };\n\n  const options = new Options(element, schema);\n\n  updateOptionsWithLegacyValues(instance, element, options);\n\n  instance.$emit('get:options', options);\n\n  return /** @type {Options & BaseOptions} */ (options);\n}\n\nexport default {\n  getOptions,\n};\n","import { getConfig, warn } from './utils';\n\n/**\n * @typedef {import('./index').default} Base\n */\n\n/**\n * A ponyfill for the CSS `:scope` selector which is not supported in IE11.\n * The following method will return an array of elements similare to the\n * `:scope ${selector}` selector.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/:scope\n * @see https://github.com/jonathantneal/element-qsa-scope\n *\n * @param  {HTMLElement} element  The element from which the scope is taken.\n * @param  {String}      selector The children selector.\n * @param  {String}      uniqId   A uniq ID to prefix the selector with.\n * @return {Array}                A list of elements.\n */\nexport function scopeSelectorPonyfill(element, selector, uniqId) {\n  let list = [];\n\n  try {\n    list = Array.from(element.querySelectorAll(`:scope ${selector}`));\n  } catch (err) {\n    const attr = `data-uniq-id`;\n    const scopedSelector = `[${attr}=\"${uniqId}\"] ${selector}`;\n    element.setAttribute(attr, uniqId);\n    list = Array.from(element.querySelectorAll(scopedSelector));\n    element.removeAttribute(attr);\n  }\n\n  return list;\n}\n\n/**\n * Get all refs of a component.\n *\n * @param  {Base}        instance The component's instance.\n * @param  {HTMLElement} element  The component's root element.\n * @return {Object}               Return an object containing all the component's refs.\n */\nexport function getRefs(instance, element) {\n  const definedRefs = getConfig(instance).refs || [];\n  /** @type {Array<HTMLElement>} */\n  const allRefs = Array.from(element.querySelectorAll(`[data-ref]`));\n  const childrenRefs = scopeSelectorPonyfill(element, '[data-component] [data-ref]', instance.$id);\n  const elements = allRefs.filter((ref) => !childrenRefs.includes(ref));\n\n  const refs = elements.reduce(\n    /**\n     * @param {Object} $refs\n     * @param {HTMLElement & {__base__?: Base}} $ref\n     */\n    ($refs, $ref) => {\n      let refName = $ref.dataset.ref;\n\n      if (!definedRefs.includes(refName)) {\n        warn(\n          instance,\n          `The \"${refName}\" ref is not defined in the class configuration.`,\n          'Did you forgot to define it?'\n        );\n      }\n\n      const $realRef = $ref.__base__ ? $ref.__base__ : $ref;\n\n      if (refName.endsWith('[]')) {\n        refName = refName.replace(/\\[\\]$/, '');\n\n        if (!$refs[refName]) {\n          $refs[refName] = [];\n        }\n      }\n\n      if ($refs[refName]) {\n        if (Array.isArray($refs[refName])) {\n          $refs[refName].push($realRef);\n        } else {\n          $refs[refName] = [$refs[refName], $realRef];\n          warn(\n            instance,\n            `The \"${refName}\" ref has been found multiple times.`,\n            'Did you forgot to add the `[]` suffix to its name?'\n          );\n        }\n      } else {\n        $refs[refName] = $realRef;\n      }\n\n      return $refs;\n    },\n    {}\n  );\n\n  instance.$emit('get:refs', refs);\n  return refs;\n}\n\nexport default {\n  getRefs,\n};\n","import { debug } from './utils';\n\n/**\n * @typedef {import('./index.js').default} Base\n */\n\n/**\n * Mount a given component which might be async.\n *\n * @param  {Base|Promise<Base>} component The component to mount.\n * @return {void}\n */\nfunction mountComponent(component) {\n  if (component instanceof Promise) {\n    component.then((instance) => instance.$mount());\n  } else {\n    component.$mount();\n  }\n}\n\n/**\n * Mount children components of a given instance.\n *\n * @param  {Base} instance The parent component's instance.\n * @return {void}\n */\nexport function mountComponents(instance) {\n  debug(instance, 'mountComponents', instance.$children);\n\n  Object.values(instance.$children).forEach(($child) => {\n    debug(instance, 'mountComponent', $child);\n    $child.forEach(mountComponent);\n  });\n}\n\n/**\n * Mount or update the given component.\n *\n * @param {Base|Promise<Base>} component [description]\n * @return {void}\n */\nfunction mountOrUpdateComponent(component) {\n  if (component instanceof Promise) {\n    component.then((instance) => (instance.$isMounted ? instance.$update() : instance.$mount()));\n  } else {\n    const method = component.$isMounted ? '$update' : '$mount';\n    component[method]();\n  }\n}\n\n/**\n * Mount or updte children components of the given instance.\n *\n * @param {Base} instance The parent component's instance.\n * @return {void}\n */\nexport function mountOrUpdateComponents(instance) {\n  debug(instance, 'mountComponents', instance.$children);\n\n  Object.values(instance.$children).forEach(($child) => {\n    $child.forEach(mountOrUpdateComponent);\n  });\n}\n\n/**\n * Destroy a given component which might be async.\n *\n * @param  {Base|Promise} component The component to destroy.\n * @return {void}\n */\nfunction destroyComponent(component) {\n  if (component instanceof Promise) {\n    component.then((instance) => instance.$destroy());\n  } else {\n    component.$destroy();\n  }\n}\n\n/**\n * Destroy children components of a given instance.\n *\n * @param  {Base} instance The parent component's instance.\n * @return {void}\n */\nexport function destroyComponents(instance) {\n  debug(instance, 'destroyComponents', instance.$children);\n\n  Object.values(instance.$children).forEach(\n    /**\n     * @param {Array<Base>} $child\n     */\n    ($child) => {\n      $child.forEach(destroyComponent);\n    }\n  );\n}\n","/**\n * Service abstract class\n */\nexport default class Service {\n  /**\n   * Class constructor, used to test the abstract class implementation.\n   */\n  constructor() {\n    this.callbacks = new Map();\n    this.isInit = false;\n  }\n\n  /**\n   * Getter to get the services properties.\n   * This getter MUST be implementer by the service extending this class.\n   * @return {Object}\n   */\n  get props() {\n    throw new Error('The `props` getter must be implemented.');\n  }\n\n  /**\n   * Method to initialize the service behaviors.\n   * This method MUST be implemented by the service extending this class.\n   *\n   * @return {Service} The current instance\n   */\n  init() {\n    throw new Error('The `init` method must be implemented.');\n  }\n\n  /**\n   * Method to kill the service behaviors.\n   * This method MUST be implemented by the service extending this class.\n   *\n   * @return {Service} The current instance\n   */\n  kill() {\n    throw new Error('The `kill` method must be implemented.');\n  }\n\n  /**\n   * Add a callback.\n   *\n   * @param  {String}   key      The callback's identifier\n   * @param  {Function} callback The callback function\n   * @return {InstanceType<typeof Service>} The current instance\n   */\n  add(key, callback) {\n    if (this.has(key)) {\n      throw new Error(`A callback with the key \\`${key}\\` has already been registered.`);\n    }\n\n    // Initialize the service when we add the first callback\n    if (this.callbacks.size === 0 && !this.isInit) {\n      this.init();\n      this.isInit = true;\n    }\n\n    this.callbacks.set(key, callback);\n    return this;\n  }\n\n  /**\n   * Test if a callback with the given key has already been added.\n   *\n   * @param  {String}  key The identifier to test\n   * @return {Boolean}     Whether or not the identifier already exists\n   */\n  has(key) {\n    return this.callbacks.has(key);\n  }\n\n  /**\n   * Get the callback tied to the given key.\n   *\n   * @param  {String}   key The identifier to get\n   * @return {Function}     The callback function\n   */\n  get(key) {\n    return this.callbacks.get(key);\n  }\n\n  /**\n   * Remove the callback tied to the given key.\n   *\n   * @param  {String} key The identifier to remove\n   * @return {Service}    The current instance\n   */\n  remove(key) {\n    this.callbacks.delete(key);\n\n    // Kill the service when we remove the last callback\n    if (this.callbacks.size === 0 && this.isInit) {\n      this.kill();\n      this.isInit = false;\n    }\n\n    return this;\n  }\n\n  /**\n   * Trigger each added callback with the given arguments.\n   *\n   * @param  {Array}   args All the arguments to apply to the callback\n   * @return {Service}      The current instance\n   */\n  trigger(...args) {\n    this.callbacks.forEach(function forEachCallback(callback) {\n      callback(...args);\n    });\n\n    return this;\n  }\n}\n","/**\n * Simple throttling helper that limits a function to only run once every {delay}ms.\n *\n * @param {Function} fn The function to throttle\n * @param {Number=} [delay=16] The delay in ms\n * @return {Function} The throttled function.\n */\nexport default function throttle(fn, delay = 16) {\n  let lastCall = 0;\n  return function throttled(...args) {\n    const now = new Date().getTime();\n    if (now - lastCall < delay) {\n      return false;\n    }\n    lastCall = now;\n    return fn(...args);\n  };\n}\n","/**\n * Returns a function, that, as long as it continues to be invoked,\n * will not be triggered. The function will be called after it stops\n * being called for N milliseconds.\n *\n * @param {Function} fn The function to call.\n * @param {Number=} [delay=300] The delay in ms to wait before calling the function.\n * @return {Function} The debounced function.\n */\nexport default function debounce(fn, delay = 300) {\n  let timeout;\n  return function debounced(...args) {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => {\n      fn(...args);\n    }, delay);\n  };\n}\n","/**\n * RequestAnimation frame polyfill.\n * @see  https://github.com/vuejs/vue/blob/ec78fc8b6d03e59da669be1adf4b4b5abf670a34/dist/vue.runtime.esm.js#L7355\n * @return {(handler: Function) => number}\n */\nexport function getRaf() {\n  return typeof window !== 'undefined' && window.requestAnimationFrame\n    ? window.requestAnimationFrame.bind(window)\n    : setTimeout;\n}\n\n/**\n * Get a function to cancel the method returned by `getRaf()`.\n *\n * @return {(id:number) => void}\n */\nexport function getCancelRaf() {\n  return typeof window !== 'undefined' && window.cancelAnimationFrame\n    ? window.cancelAnimationFrame.bind(window)\n    : clearTimeout;\n}\n\n/**\n * Wait for the next frame to execute a function.\n *\n * @param  {Function=} [fn=() => {}] The callback function to execute.\n * @return {Promise} A Promise resolving when the next frame is reached.\n *\n * @example\n * ```js\n * nextFrame(() => console.log('hello world'));\n *\n * await nextFrame();\n * console.log('hello world');\n * ```\n */\nexport default function nextFrame(fn = () => {}) {\n  const raf = getRaf();\n  return new Promise((resolve) => {\n    raf(() => raf(() => resolve(fn())));\n  });\n}\n","import Service from '../abstracts/Service';\nimport { getRaf, getCancelRaf } from '../utils/nextFrame';\n\n/**\n * @typedef {import('./index').ServiceInterface} ServiceInterface\n */\n\n/**\n * @typedef {Object} RafServiceProps\n * @property {DOMHighResTimeStamp} time\n */\n\n/**\n * @typedef {Object} RafService\n * @property {(key:String, callback:(props:RafServiceProps) => void) => void} add\n *   Add a function to the resize service. The key must be uniq.\n * @property {() => RafServiceProps} props\n *   Get the current values of the resize service props.\n */\n\n/**\n * Tick service\n */\nclass Raf extends Service {\n  /** @type {Boolean} Whether the loop is running or not. */\n  isTicking = false;\n\n  /** @type {number} */\n  id = 0;\n\n  raf = getRaf();\n\n  cancelRaf = getCancelRaf();\n\n  /**\n   * Bind loop to the instance.\n   */\n  constructor() {\n    super();\n    this.loop = this.loop.bind(this);\n  }\n\n  /**\n   * Start the requestAnimationFrame loop.\n   *\n   * @return {Raf}\n   */\n  init() {\n    this.isTicking = true;\n    this.loop();\n    return this;\n  }\n\n  /**\n   * Loop method.\n   */\n  loop() {\n    this.trigger(this.props);\n\n    if (!this.isTicking) {\n      return;\n    }\n\n    this.id = this.raf(this.loop);\n  }\n\n  /**\n   * Stop the requestAnimationFrame loop.\n   *\n   * @return {Raf}\n   */\n  kill() {\n    this.cancelRaf(this.id);\n    this.isTicking = false;\n    return this;\n  }\n\n  /**\n   * Get raf props.\n   *\n   * @todo Return elapsed time / index?\n   * @type {Object}\n   */\n  get props() {\n    return {\n      time: window.performance.now(),\n    };\n  }\n}\n\nlet instance = null;\n\n/**\n * Use the RequestAnimationFrame (raf) service.\n *\n * ```js\n * import { useRaf } from '@studiometa/js/services';\n * const { add, remove, props } = useRag();\n * add(id, (props) => {});\n * remove(id);\n * props();\n * ```\n *\n * @return {ServiceInterface & RafService}\n */\nexport default function useRaf() {\n  if (!instance) {\n    instance = new Raf();\n  }\n\n  const add = instance.add.bind(instance);\n  const remove = instance.remove.bind(instance);\n  const has = instance.has.bind(instance);\n\n  // eslint-disable-next-line require-jsdoc\n  function props() {\n    return instance.props;\n  }\n\n  return {\n    add,\n    remove,\n    has,\n    props,\n  };\n}\n","import Service from '../abstracts/Service';\nimport throttle from '../utils/throttle';\nimport debounce from '../utils/debounce';\nimport useRaf from './raf';\n\n/**\n * @typedef {import('./index').ServiceInterface} ServiceInterface\n */\n\n/**\n * @typedef {Object} PointerServiceProps\n * @property {MouseEvent | TouchEvent} event\n * @property {Boolean} isDown\n * @property {Number} x\n * @property {Number} y\n * @property {{ x: Boolean, y: Boolean }} changed\n * @property {{ x: Number, y: Number }} last\n * @property {{ x: Number, y: Number }} delta\n * @property {{ x: Number, y: Number }} progress\n * @property {{ x: Number, y: Number }} max\n */\n\n/**\n * @typedef {Object} PointerService\n * @property {(key:String, callback:(props:PointerServiceProps) => void) => void} add\n *   Add a function to the resize service. The key must be uniq.\n * @property {() => PointerServiceProps} props\n *   Get the current values of the resize service props.\n */\n\n/**\n * Test if an event is an instance of TouchEvent.\n *\n * @param {TouchEvent|MouseEvent} event The event instance to test.\n * @return {Boolean}                    Is it a TouchEvent?\n */\nfunction isTouchEvent(event) {\n  return typeof TouchEvent !== 'undefined' && event instanceof TouchEvent;\n}\n\n/**\n * Pointer service\n */\nclass Pointer extends Service {\n  /** @type {Boolean} State of the pointer. */\n  isDown = false;\n\n  /** @type {Number} The y pointer position. */\n  y = window.innerHeight / 2;\n\n  /** @type {Number} The y previous pointer position. */\n  yLast = window.innerHeight / 2;\n\n  /** @type {Number} The x pointer position. */\n  x = window.innerWidth / 2;\n\n  /** @type {Number} The x previous pointer position. */\n  xLast = window.innerWidth / 2;\n\n  /** @type {MouseEvent|TouchEvent} The latest event emitted from the pointer. */\n  event;\n\n  /**\n   * Bind the handler to the mousemove and touchmove events.\n   * Bind the up and down handler to the mousedown, mouseup, touchstart and touchend events.\n   *\n   * @return {Pointer}\n   */\n  init() {\n    const { add, remove } = useRaf();\n    this.hasRaf = false;\n\n    const debounced = debounce((event) => {\n      this.updateValues(event);\n      remove('usePointer');\n      this.trigger(this.props);\n      this.hasRaf = false;\n    }, 50);\n\n    this.handler = throttle((event) => {\n      this.updateValues(event);\n      if (!this.hasRaf) {\n        add('usePointer', () => {\n          this.trigger(this.props);\n        });\n        this.hasRaf = true;\n      }\n      // Reset changed flags at the end of the mousemove or touchmove event\n      debounced(event);\n    }, 32).bind(this);\n\n    this.downHandler = this.downHandler.bind(this);\n    this.upHandler = this.upHandler.bind(this);\n\n    document.documentElement.addEventListener('mouseenter', this.handler, { once: true });\n    document.addEventListener('mousemove', this.handler, { passive: true });\n    document.addEventListener('touchmove', this.handler, { passive: true });\n    document.addEventListener('mousedown', this.downHandler, { passive: true });\n    document.addEventListener('touchstart', this.downHandler, { passive: true });\n    document.addEventListener('mouseup', this.upHandler, { passive: true });\n    document.addEventListener('touchend', this.upHandler, { passive: true });\n    return this;\n  }\n\n  /**\n   * Unbind all handlers from their bounded event.\n   *\n   * @return {Pointer}\n   */\n  kill() {\n    document.removeEventListener('mousemove', this.handler);\n    document.removeEventListener('touchmove', this.handler);\n    document.removeEventListener('mousedown', this.downHandler);\n    document.removeEventListener('touchstart', this.downHandler);\n    document.removeEventListener('mouseup', this.upHandler);\n    document.removeEventListener('touchend', this.upHandler);\n    return this;\n  }\n\n  /**\n   * Handler for the pointer's down action.\n   *\n   * @return {void}\n   */\n  downHandler() {\n    this.isDown = true;\n    this.trigger(this.props);\n  }\n\n  /**\n   * Handler for the pointer's up action.\n   *\n   * @return {void}\n   */\n  upHandler() {\n    this.isDown = false;\n    this.trigger(this.props);\n  }\n\n  /**\n   * Update the pointer positions.\n   *\n   * @param  {MouseEvent|TouchEvent} event The event object.\n   * @return {void}\n   */\n  updateValues(event) {\n    this.event = event;\n    this.yLast = this.y;\n    this.xLast = this.x;\n\n    // Check pointer Y\n    // We either get data from a touch event `event.touches[0].clientY` or from\n    // a mouse event `event.clientY`.\n    const y = isTouchEvent(event)\n      ? /** @type {TouchEvent} */ (event).touches[0]?.clientY\n      : /** @type {MouseEvent} */ (event).clientY;\n    if (y !== this.y) {\n      this.y = y;\n    }\n\n    // Check pointer X\n    // We either get data from a touch event `event.touches[0].clientX` or from\n    // a mouse event `event.clientX`.\n    const x = isTouchEvent(event)\n      ? /** @type {TouchEvent} */ (event).touches[0]?.clientX\n      : /** @type {MouseEvent} */ (event).clientX;\n    if (x !== this.x) {\n      this.x = x;\n    }\n  }\n\n  /**\n   * Get the pointer props.\n   *\n   * @type {Object}\n   */\n  get props() {\n    return {\n      event: this.event,\n      isDown: this.isDown,\n      x: this.x,\n      y: this.y,\n      changed: {\n        x: this.x !== this.xLast,\n        y: this.y !== this.yLast,\n      },\n      last: {\n        x: this.xLast,\n        y: this.yLast,\n      },\n      delta: {\n        x: this.x - this.xLast,\n        y: this.y - this.yLast,\n      },\n      progress: {\n        x: this.x / window.innerWidth,\n        y: this.y / window.innerHeight,\n      },\n      max: {\n        x: window.innerWidth,\n        y: window.innerHeight,\n      },\n    };\n  }\n}\n\nlet pointer = null;\n\n/**\n * Use the pointer.\n *\n * ```js\n * import usePointer from '@studiometa/js-toolkit/services';\n * const { add, remove, props } = usePointer();\n * add('id', () => {});\n * remove('id');\n * props();\n * ```\n *\n * @return {ServiceInterface & PointerService}\n */\nexport default function usePointer() {\n  if (!pointer) {\n    pointer = new Pointer();\n  }\n\n  const add = pointer.add.bind(pointer);\n  const remove = pointer.remove.bind(pointer);\n  const has = pointer.has.bind(pointer);\n  const props = () => pointer.props;\n\n  return {\n    add,\n    remove,\n    has,\n    props,\n  };\n}\n","import Service from '../abstracts/Service';\nimport debounce from '../utils/debounce';\n\n/**\n * @typedef {import('./index').ServiceInterface} ServiceInterface\n */\n\n/**\n * @typedef {Object} ResizeServiceProps\n * @property {Number} width\n * @property {Number} height\n * @property {Number} ratio\n * @property {'square'|'landscape'|'portrait'} orientation\n * @property {String} [breakpoint]\n * @property {String[]} [breakpoints]\n */\n\n/**\n * @typedef {Object} ResizeService\n * @property {(key:String, callback:(props:ResizeServiceProps) => void) => void} add\n *   Add a function to the resize service. The key must be uniq.\n * @property {() => ResizeServiceProps} props\n *   Get the current values of the resize service props.\n */\n\n/**\n * Resize service\n *\n * ```\n * import { useResize } from '@studiometa/js/services';\n * const { add, remove, props } = useResize();\n * add(key, (props) => {});\n * remove(key);\n * props();\n * ```\n */\nclass Resize extends Service {\n  /**\n   * Bind the handler to the resize event.\n   *\n   * @return {this}\n   */\n  init() {\n    this.handler = debounce(() => {\n      this.trigger(this.props);\n    }).bind(this);\n\n    if (this.canUseResizeObserver) {\n      // @ts-ignore\n      this.resizeObserver = new ResizeObserver(this.handler);\n      this.resizeObserver.observe(document.documentElement);\n    } else {\n      window.addEventListener('resize', this.handler);\n    }\n\n    return this;\n  }\n\n  /**\n   * Unbind the handler from the resize event.\n   *\n   * @return {this}\n   */\n  kill() {\n    if (this.canUseResizeObserver) {\n      this.resizeObserver.disconnect();\n    } else {\n      window.removeEventListener('resize', this.handler);\n    }\n    delete this.resizeObserver;\n\n    return this;\n  }\n\n  /**\n   * Get resize props.\n   *\n   * @type {ResizeServiceProps}\n   */\n  get props() {\n    /** @type {ResizeServiceProps} [description] */\n    const props = {\n      width: window.innerWidth,\n      height: window.innerHeight,\n      ratio: window.innerWidth / window.innerHeight,\n      orientation: 'square',\n    };\n\n    if (props.ratio > 1) {\n      props.orientation = 'landscape';\n    }\n\n    if (props.ratio < 1) {\n      props.orientation = 'portrait';\n    }\n\n    if (this.breakpointElement) {\n      props.breakpoint = this.breakpoint;\n      props.breakpoints = this.breakpoints;\n    }\n\n    return props;\n  }\n\n  /**\n   * The element holding the breakpoints data.\n   * @return {HTMLElement}\n   */\n  get breakpointElement() {\n    return document.querySelector('[data-breakpoint]') || null;\n  }\n\n  /**\n   * Get the current breakpoint.\n   * @return {String}\n   */\n  get breakpoint() {\n    return window\n      .getComputedStyle(this.breakpointElement, '::before')\n      .getPropertyValue('content')\n      .replace(/\"/g, '');\n  }\n\n  /**\n   * Get all breakpoints.\n   * @return {Array}\n   */\n  get breakpoints() {\n    const breakpoints = window\n      .getComputedStyle(this.breakpointElement, '::after')\n      .getPropertyValue('content')\n      .replace(/\"/g, '');\n\n    return breakpoints.split(',');\n  }\n\n  /**\n   * Test if we can use the `ResizeObserver` API.\n   * @return {Boolean}\n   */\n  get canUseResizeObserver() {\n    // @ts-ignore\n    return typeof window.ResizeObserver !== 'undefined';\n  }\n}\n\nlet resize = null;\n\n/**\n * Use the resize service.\n *\n * ```js\n * import useResize from '@studiometa/js-toolkit/services/resize';\n * const { add, remove, props } = useResize();\n * add(key, (props) => {});\n * remove(key);\n * props();\n * ```\n * @return {ServiceInterface & ResizeService}\n */\nexport default function useResize() {\n  if (!resize) {\n    resize = new Resize();\n  }\n\n  const add = resize.add.bind(resize);\n  const remove = resize.remove.bind(resize);\n  const has = resize.has.bind(resize);\n  const props = () => resize.props;\n\n  return {\n    add,\n    remove,\n    has,\n    props,\n  };\n}\n","import Service from '../abstracts/Service';\nimport throttle from '../utils/throttle';\nimport debounce from '../utils/debounce';\nimport nextFrame from '../utils/nextFrame';\n\n/**\n * @typedef {import('./index').ServiceInterface} ServiceInterface\n */\n\n/**\n * @typedef {Object} ScrollServiceProps\n * @property {Number} x\n * @property {Number} y\n * @property {{ x: Boolean, y: Boolean }} changed\n * @property {{ x: Number, y: Number }} last\n * @property {{ x: Number, y: Number }} delta\n * @property {{ x: Number, y: Number }} progress\n * @property {{ x: Number, y: Number }} max\n */\n\n/**\n * @typedef {Object} ScrollService\n * @property {(key:String, callback:(props:ScrollServiceProps) => void) => void} add\n *   Add a function to the resize service. The key must be uniq.\n * @property {() => ScrollServiceProps} props\n *   Get the current values of the resize service props.\n */\n\n/**\n * Scroll service\n */\nclass Scroll extends Service {\n  /** @type {Number} The y scroll position. */\n  y = window.pageYOffset;\n\n  /** @type {Number} The y previous scroll position. */\n  yLast = window.pageYOffset;\n\n  /** @type {Number} The x scroll position. */\n  x = window.pageXOffset;\n\n  /** @type {Number} The x previous scroll position. */\n  xLast = window.pageXOffset;\n\n  /**\n   * Bind the handler to the scroll event.\n   *\n   * @return {Scroll}\n   */\n  init() {\n    const debounced = debounce(() => {\n      this.trigger(this.props);\n      nextFrame(() => {\n        this.trigger(this.props);\n      });\n    }, 50);\n\n    this.handler = throttle(() => {\n      this.trigger(this.props);\n\n      // Reset changed flags at the end of the scroll event\n      debounced();\n    }, 32).bind(this);\n\n    // Fire the `scrolled` method on document scroll\n    document.addEventListener('scroll', this.handler, { passive: true });\n    return this;\n  }\n\n  /**\n   * Unbind the handler from the scroll event.\n   *\n   * @return {Scroll}\n   */\n  kill() {\n    document.removeEventListener('scroll', this.handler);\n    return this;\n  }\n\n  /**\n   * Get scroll props.\n   *\n   * @type {Object}\n   */\n  get props() {\n    this.yLast = this.y;\n    this.xLast = this.x;\n\n    // Check scroll Y\n    if (window.pageYOffset !== this.y) {\n      this.y = window.pageYOffset;\n    }\n\n    // Check scroll x\n    if (window.pageXOffset !== this.x) {\n      this.x = window.pageXOffset;\n    }\n\n    return {\n      x: this.x,\n      y: this.y,\n      changed: {\n        x: this.x !== this.xLast,\n        y: this.y !== this.yLast,\n      },\n      last: {\n        x: this.xLast,\n        y: this.yLast,\n      },\n      delta: {\n        x: this.x - this.xLast,\n        y: this.y - this.yLast,\n      },\n      progress: {\n        x: this.max.x === 0 ? 1 : this.x / this.max.x,\n        y: this.max.y === 0 ? 1 : this.y / this.max.y,\n      },\n      max: this.max,\n    };\n  }\n\n  /**\n   * Get scroll max values.\n   *\n   * @type {Object}\n   */\n  get max() {\n    return {\n      x: (document.scrollingElement || document.body).scrollWidth - window.innerWidth,\n      y: (document.scrollingElement || document.body).scrollHeight - window.innerHeight,\n    };\n  }\n}\n\nlet scroll = null;\n\n/**\n * Use the scroll service.\n *\n * ```js\n * import { useScroll } from '@studiometa/js-toolkit/services';\n * const { add, remove, props } = useScroll();\n * add(key, (props) => {});\n * remove(key);\n * props();\n * ```\n *\n * @return {ServiceInterface & ScrollService}\n */\nexport default function useScroll() {\n  if (!scroll) {\n    scroll = new Scroll();\n  }\n\n  const add = scroll.add.bind(scroll);\n  const remove = scroll.remove.bind(scroll);\n  const has = scroll.has.bind(scroll);\n  const props = () => scroll.props;\n\n  return {\n    add,\n    remove,\n    has,\n    props,\n  };\n}\n","export default {\n  ENTER: 13,\n  SPACE: 32,\n  TAB: 9,\n  ESC: 27,\n  LEFT: 37,\n  UP: 38,\n  RIGHT: 39,\n  DOWN: 40,\n};\n","import Service from '../abstracts/Service';\nimport keyCodes from '../utils/keyCodes';\n\n/**\n * @typedef {import('./index').ServiceInterface} ServiceInterface\n */\n\n/**\n * @typedef {Object} KeyServiceProps\n * @property {KeyboardEvent} event\n * @property {Number} triggered\n * @property {Boolean} isUp\n * @property {Boolean} isDown\n * @property {Boolean} ENTER\n * @property {Boolean} SPACE\n * @property {Boolean} TAB\n * @property {Boolean} ESC\n * @property {Boolean} LEFT\n * @property {Boolean} UP\n * @property {Boolean} RIGHT\n * @property {Boolean} DOWN\n */\n\n/**\n * @typedef {Object} KeyService\n * @property {(key:String, callback:(props:KeyServiceProps) => void) => void} add\n *   Add a function to the resize service. The key must be uniq.\n * @property {() => KeyServiceProps} props\n *   Get the current values of the resize service props.\n */\n\n/**\n * Scroll service\n */\nclass Key extends Service {\n  /** @type {Object} The event object. */\n  event = {};\n\n  /**\n   * Used to accumulate the number of times the `keydown` event has been triggered.\n   * @type {Number}\n   */\n  triggered = 0;\n\n  /** @type {Object} The previous event object. */\n  previousEvent = {};\n\n  /**\n   * Bind the handler to the keyboard event.\n   *\n   * @return {Key}\n   */\n  init() {\n    this.handler = (event) => {\n      this.event = event;\n      this.trigger(this.props);\n    };\n    document.addEventListener('keydown', this.handler, { passive: false });\n    document.addEventListener('keyup', this.handler, { passive: false });\n    return this;\n  }\n\n  /**\n   * Unbind the handler from the keyboard event.\n   *\n   * @return {Key}\n   */\n  kill() {\n    document.removeEventListener('keydown', this.handler);\n    document.removeEventListener('keyup', this.handler);\n    return this;\n  }\n\n  /**\n   * Get keyboard props.\n   *\n   * @type {Object}\n   */\n  get props() {\n    const keys = Object.entries(keyCodes).reduce((acc, [name, code]) => {\n      acc[name] = code === this.event.keyCode;\n      return acc;\n    }, {});\n\n    if (!this.previousEvent.type) {\n      this.triggered = 0;\n    }\n\n    if (this.event.type === 'keydown' && this.previousEvent.type === 'keydown') {\n      this.triggered += 1;\n    } else {\n      this.triggered = 1;\n    }\n\n    this.previousEvent = this.event;\n\n    return {\n      event: this.event,\n      triggered: this.triggered,\n      direction: this.event.type === 'keydown' ? 'down' : 'up',\n      isUp: this.event.type === 'keyup',\n      isDown: this.event.type === 'keydown',\n      ...keys,\n    };\n  }\n}\n\nlet key = null;\n\n/**\n * Use the keyboard service.\n *\n * ```js\n * import { useKey } from '@studiometa/js-toolkit/services';\n * const { add, remove, props } = useKey();\n * add(key, (props) => {});\n * remove(key);\n * props();\n * ```\n *\n * @return {ServiceInterface & KeyService}\n */\nexport default function useKey() {\n  if (!key) {\n    key = new Key();\n  }\n\n  const add = key.add.bind(key);\n  const remove = key.remove.bind(key);\n  const has = key.has.bind(key);\n  const props = () => key.props;\n\n  return {\n    add,\n    remove,\n    has,\n    props,\n  };\n}\n","import Service from '../abstracts/Service';\n\n/**\n * @typedef {import('./index').ServiceInterface} ServiceInterface\n */\n\n/**\n * @typedef {Object} LoadServiceProps\n * @property {DOMHighResTimeStamp} time\n */\n\n/**\n * @typedef {Object} LoadService\n * @property {(key:String, callback:(props:LoadServiceProps) => void) => void} add\n *   Add a function to the resize service. The key must be uniq.\n * @property {() => LoadServiceProps} props\n *   Get the current values of the resize service props.\n */\n\n/**\n * Load service\n */\nclass Load extends Service {\n  /**\n   * Start the requestAnimationFrame loop.\n   *\n   * @return {Load}\n   */\n  init() {\n    this.handler = () => {\n      this.trigger(this.props);\n    };\n\n    window.addEventListener('load', this.handler);\n    return this;\n  }\n\n  /**\n   * Stop the requestAnimationFrame loop.\n   *\n   * @return {Load}\n   */\n  kill() {\n    window.removeEventListener('load', this.handler);\n    return this;\n  }\n\n  /**\n   * Get raf props.\n   *\n   * @todo Return elapsed time / index?\n   * @type {Object}\n   */\n  get props() {\n    return {};\n  }\n}\n\nlet instance = null;\n\n/**\n * Use the load service.\n *\n * ```js\n * import { useLoad } from '@studiometa/js/services';\n * const { add, remove, props } = useRag();\n * add(id, (props) => {});\n * remove(id);\n * props();\n * ```\n *\n * @return {ServiceInterface & LoadService}\n */\nexport default function useRaf() {\n  if (!instance) {\n    instance = new Load();\n  }\n\n  const add = instance.add.bind(instance);\n  const remove = instance.remove.bind(instance);\n  const has = instance.has.bind(instance);\n\n  // eslint-disable-next-line require-jsdoc\n  function props() {\n    return instance.props;\n  }\n\n  return {\n    add,\n    remove,\n    has,\n    props,\n  };\n}\n","import usePointer from '../../../services/pointer';\nimport useRaf from '../../../services/raf';\nimport useResize from '../../../services/resize';\nimport useScroll from '../../../services/scroll';\nimport useKey from '../../../services/key';\nimport useLoad from '../../../services/load';\nimport { hasMethod, callMethod } from '../utils';\n\n/**\n * @typedef {import('../index').default} Base\n */\n\nconst SERVICES_MAP = {\n  scrolled: useScroll,\n  resized: useResize,\n  ticked: useRaf,\n  moved: usePointer,\n  keyed: useKey,\n  loaded: useLoad,\n};\n\n/**\n * @typedef {'scrolled'|'resized'|'ticked'|'moved'|'keyed'} ServiceName\n */\n\n/**\n * Services management for the Base class.\n */\nexport default class Services {\n  /** @type {Base} */\n  #base;\n\n  /**\n   * Class constructor.\n   * @param {Base} instance The Base instance.\n   */\n  constructor(instance) {\n    this.#base = instance;\n  }\n\n  /**\n   * Test if the given service is registered.\n   *\n   * @param  {ServiceName} service The name of the service.\n   * @return {Boolean}\n   */\n  has(service) {\n    if (!hasMethod(this.#base, service) && !SERVICES_MAP[service]) {\n      return false;\n    }\n\n    const { has } = SERVICES_MAP[service]();\n    return has(this.#base.$id);\n  }\n\n  /**\n   * Init the given service and bind it to the given instance.\n   *\n   * @param  {ServiceName} service The name of the service.\n   * @return {() => void}          A function to unbind the service.\n   */\n  enable(service) {\n    if (this.has(service)) {\n      return this.disable.bind(this, service);\n    }\n\n    if (!hasMethod(this.#base, service) && !SERVICES_MAP[service]) {\n      return function noop() {};\n    }\n\n    const { add } = SERVICES_MAP[service]();\n    const self = this;\n\n    /**\n     * @param {any[]} args\n     */\n    function serviceHandler(...args) {\n      callMethod(self.#base, service, ...args);\n    }\n\n    add(this.#base.$id, serviceHandler);\n\n    return this.disable.bind(this, service);\n  }\n\n  /**\n   * Enable all services and return methods to disable them.\n   *\n   * @return {Function[]}\n   */\n  enableAll() {\n    return Object.keys(SERVICES_MAP).map(\n      /** @param {ServiceName} serviceName */\n      (serviceName) => this.enable(serviceName)\n    );\n  }\n\n  /**\n   * Disable all services.\n   *\n   * @return {void}\n   */\n  disableAll() {\n    Object.keys(SERVICES_MAP).forEach(\n      /** @param {ServiceName} serviceName */\n      (serviceName) => {\n        this.disable(serviceName);\n      }\n    );\n  }\n\n  /**\n   * Disable a service.\n   *\n   * @param  {String} service  The name of the service.\n   * @return {void}\n   */\n  disable(service) {\n    if (!SERVICES_MAP[service]) {\n      return;\n    }\n\n    const { remove } = SERVICES_MAP[service]();\n    remove(this.#base.$id);\n  }\n}\n","// eslint-disable-next-line import/no-cycle\nimport Base from './index';\nimport getAllProperties from '../../utils/object/getAllProperties';\nimport { debug } from './utils';\n\n/**\n * Bind event handler methods to the root HTML element.\n *\n * @param  {Base}  instance     A Base instance.\n * @param  {Array} eventMethods A list of methods to bind.\n * @return {Array}              A list of unbind functions.\n */\nfunction bindRootEvents(instance, eventMethods) {\n  return eventMethods.map((eventMethod) => {\n    const eventName = eventMethod.replace(/^on/, '').toLowerCase();\n\n    const handler = (...args) => {\n      debug(instance, eventMethod, instance.$el, ...args);\n      instance[eventMethod](...args);\n    };\n\n    instance.$el.addEventListener(eventName, handler);\n\n    return () => {\n      instance.$el.removeEventListener(eventName, handler);\n    };\n  });\n}\n\n/**\n * Bind event handler methods to refs HTML element.\n *\n * @param  {Base}  instance     A Base instance.\n * @param  {Array} eventMethods A list of methods to bind.\n * @return {Array}              A list of unbind functions.\n */\nfunction bindRefsEvents(instance, eventMethods) {\n  const unbindMethods = [];\n\n  Object.entries(instance.$refs).forEach(([refName, $refOrRefs]) => {\n    const $refs = Array.isArray($refOrRefs) ? $refOrRefs : [$refOrRefs];\n    const refEventMethod = `on${refName.replace(/^\\w/, (c) => c.toUpperCase())}`;\n\n    eventMethods\n      .filter((eventMethod) => eventMethod.startsWith(refEventMethod))\n      .forEach((eventMethod) => {\n        $refs.forEach(($ref, index) => {\n          const eventName = eventMethod.replace(refEventMethod, '').toLowerCase();\n          const handler = (...args) => {\n            debug(instance, eventMethod, $ref, ...args, index);\n            instance[eventMethod](...args, index);\n          };\n\n          debug(instance, 'binding ref event', refName, eventName);\n\n          if ($ref instanceof Base) {\n            // eslint-disable-next-line no-param-reassign\n            $ref = $ref.$el;\n          }\n\n          /** @type {HTMLElement} */ ($ref).addEventListener(eventName, handler);\n          const unbindMethod = () => {\n            debug(instance, 'unbinding ref event', refName, eventMethod);\n            /** @type {HTMLElement} */ ($ref).removeEventListener(eventName, handler);\n          };\n\n          unbindMethods.push(unbindMethod);\n        });\n      });\n  });\n\n  return unbindMethods;\n}\n\n/**\n * Bind event handler methods to children Base instance.\n * @param  {Base}  instance     A Base instance.\n * @param  {Array} eventMethods A list of methods to bind.\n * @return {Array}              A list of unbind functions.\n */\nfunction bindChildrenEvents(instance, eventMethods) {\n  const unbindMethods = [];\n\n  Object.entries(instance.$children).forEach(([childName, $children]) => {\n    const childEventMethod = `on${childName.replace(/^\\w/, (c) => c.toUpperCase())}`;\n\n    eventMethods\n      .filter((eventMethod) => eventMethod.startsWith(childEventMethod))\n      .forEach((eventMethod) => {\n        $children.forEach(\n          /**\n           * @param {Base} $child\n           * @param {Number} index\n           */\n          ($child, index) => {\n            const eventName = eventMethod.replace(childEventMethod, '').toLowerCase();\n            const handler = (...args) => {\n              debug(instance, eventMethod, $child, ...args, index);\n              instance[eventMethod](...args, index);\n            };\n\n            debug(instance, 'binding child event', childName, eventName);\n\n            const unbindMethod = $child.$on(eventName, handler);\n            unbindMethods.push(() => {\n              debug(instance, 'unbinding child event', childName, eventName);\n              unbindMethod();\n            });\n          }\n        );\n      });\n  });\n\n  return unbindMethods;\n}\n\n/**\n * Bind ref and children component's events to their corresponding method.\n *\n * @param  {Base} instance  A Base instance.\n * @return {Array}          A list of methods to unbind the events.\n */\nexport default function bindEvents(instance) {\n  const ROOT_EVENT_REGEX = /^on[A-Z][a-z]+$/;\n  const REFS_CHILDREN_EVENT_REGEX = /^on([A-Z][a-z]+)([A-Z][a-z]+)+$/;\n\n  // Get all event methods\n  const eventMethods = getAllProperties(instance).reduce(\n    (acc, [name]) => {\n      // Testing camelCase with one word: onEvent.\n      if (ROOT_EVENT_REGEX.test(name)) {\n        acc.root.push(name);\n        return acc;\n      }\n\n      // Testing camelCase with more than two words: onRefEvent.\n      if (REFS_CHILDREN_EVENT_REGEX.test(name)) {\n        acc.refsOrChildren.push(name);\n      }\n\n      return acc;\n    },\n    { root: [], refsOrChildren: [] }\n  );\n\n  const unbindMethods = [\n    ...bindRootEvents(instance, eventMethods.root),\n    ...bindRefsEvents(instance, eventMethods.refsOrChildren),\n    ...bindChildrenEvents(instance, eventMethods.refsOrChildren),\n  ];\n\n  return unbindMethods;\n}\n","// eslint-disable-next-line import/extensions\nimport { nanoid } from 'nanoid/non-secure';\nimport autoBind from '../../utils/object/autoBind';\nimport EventManager from '../EventManager';\nimport { callMethod, debug, getConfig } from './utils';\n// eslint-disable-next-line import/no-cycle\nimport { getChildren, getComponentElements } from './children';\nimport { getOptions } from './options';\nimport { getRefs } from './refs';\nimport { mountComponents, mountOrUpdateComponents, destroyComponents } from './components';\nimport Services from './classes/Services';\n// eslint-disable-next-line import/no-cycle\nimport bindEvents from './events';\n\n/**\n * @typedef {typeof Base} BaseComponent\n * @typedef {() => Promise<BaseComponent | { default: BaseComponent }>} BaseAsyncComponent\n * @typedef {{ name: string, debug: boolean, log: boolean, [name:string]: any }} BaseOptions\n * @typedef {{ [name:string]: HTMLElement | BaseComponent | Array<HTMLElement|BaseComponent> }} BaseRefs\n * @typedef {{ [nameOrSelector:string]: Array<Base | Promise<Base>> }} BaseChildren\n * @typedef {{ [nameOrSelector:string]: BaseComponent | BaseAsyncComponent }} BaseConfigComponents\n * @typedef {import('./classes/Options').OptionsSchema} BaseConfigOptions\n */\n\n/**\n * @typedef {Object} BaseConfig\n * @property {String} name\n * @property {Boolean} [debug]\n * @property {Boolean} [log]\n * @property {String[]} [refs]\n * @property {BaseConfigComponents} [components]\n * @property {BaseConfigOptions} [options]\n */\n\n/**\n * @typedef {import('./classes/Services').ServiceName} ServiceName\n */\n\n/**\n * Base class to easily create components.\n *\n * @example\n * ```js\n * class Component extends Base {\n *   static config = {\n *     name: 'Component',\n *     log: true,\n *   };\n *\n *   mounted() {\n *     this.$log('Component is mounted!');\n *   }\n * }\n *\n * class App extends Base {\n *   static config = {\n *     name: 'App',\n *     components: {\n *       Component,\n *     },\n *   };\n * }\n *\n * new App(document.body).$mount();\n * ```\n */\nexport default class Base extends EventManager {\n  /**\n   * The instance parent.\n   * @type {Base}\n   */\n  $parent = null;\n\n  /**\n   * The state of the component.\n   * @type {Boolean}\n   */\n  $isMounted = false;\n\n  /**\n   * This is a Base instance.\n   * @type {Boolean}\n   */\n  static $isBase = true;\n\n  /**\n   * Get properties to exclude from the autobind call.\n   * @return {Array<String|RegExp>}\n   */\n  get _excludeFromAutoBind() {\n    return [\n      '$mount',\n      '$update',\n      '$destroy',\n      '$terminate',\n      '$log',\n      '$on',\n      '$once',\n      '$off',\n      '$emit',\n      'mounted',\n      'loaded',\n      'ticked',\n      'resized',\n      'moved',\n      'keyed',\n      'scrolled',\n      'destroyed',\n      'terminated',\n    ];\n  }\n\n  /**\n   * @deprecated Use the static `config` property instead.\n   * @return {BaseConfig}\n   */\n  get config() {\n    return null;\n  }\n\n  /** @type {BaseConfig} */\n  static config;\n\n  /**\n   * Get the component's refs.\n   * @return {BaseRefs}\n   */\n  get $refs() {\n    return getRefs(this, this.$el);\n  }\n\n  /**\n   * Class constructor where all the magic takes place.\n   *\n   * @param {HTMLElement} element The component's root element dd.\n   */\n  constructor(element) {\n    super();\n\n    if (!element) {\n      throw new Error('The root element must be defined.');\n    }\n\n    const { name } = getConfig(this);\n\n    /** @type {String} */\n    this.$id = `${name}-${nanoid()}`;\n\n    /** @type {HTMLElement} */\n    this.$el = element;\n\n    /** @type {BaseOptions} */\n    this.$options = getOptions(this, element, getConfig(this));\n\n    /** @type {BaseChildren} */\n    this.$children = getChildren(this, this.$el, getConfig(this).components || {});\n\n    if (!('__base__' in this.$el)) {\n      Object.defineProperty(this.$el, '__base__', {\n        get: () => this,\n        configurable: true,\n      });\n    }\n\n    // Autobind all methods to the instance\n    autoBind(this, {\n      exclude: [...this._excludeFromAutoBind],\n    });\n\n    /** @type {Services} */\n    this.$services = new Services(this);\n\n    let unbindMethods = [];\n    this.$on('mounted', () => {\n      this.$services.enableAll();\n      unbindMethods = [...bindEvents(this)];\n      mountComponents(this);\n      this.$isMounted = true;\n    });\n\n    this.$on('updated', () => {\n      this.$services.disableAll();\n      unbindMethods.forEach((method) => method());\n      unbindMethods = [...bindEvents(this)];\n      this.$services.enableAll();\n      mountOrUpdateComponents(this);\n    });\n\n    this.$on('destroyed', () => {\n      this.$isMounted = false;\n      this.$services.disableAll();\n      unbindMethods.forEach((method) => method());\n      destroyComponents(this);\n    });\n\n    debug(this, 'constructor', this);\n    return this;\n  }\n\n  /**\n   * Small helper to log stuff.\n   *\n   * @return {(...args: any) => void} A log function if the log options is active.\n   */\n  get $log() {\n    return this.$options.log\n      ? window.console.log.bind(window, `[${this.$options.name}]`)\n      : function noop() {};\n  }\n\n  /**\n   * Trigger the `mounted` callback.\n   */\n  $mount() {\n    debug(this, '$mount');\n    callMethod(this, 'mounted');\n    return this;\n  }\n\n  /**\n   * Update the instance children.\n   */\n  $update() {\n    debug(this, '$update');\n    callMethod(this, 'updated');\n    return this;\n  }\n\n  /**\n   * Trigger the `destroyed` callback.\n   */\n  $destroy() {\n    debug(this, '$destroy');\n    callMethod(this, 'destroyed');\n    return this;\n  }\n\n  /**\n   * Terminate a child instance when it is not needed anymore.\n   * @return {void}\n   */\n  $terminate() {\n    debug(this, '$terminate');\n\n    // First, destroy the component.\n    this.$destroy();\n\n    // Execute the `terminated` hook if it exists\n    callMethod(this, 'terminated');\n\n    // Delete the reference to the instance\n    // delete this.$el.__base__;\n\n    // And update its status to prevent re-instantiation when accessing the\n    // parent's `$children` property\n    Object.defineProperty(this.$el, '__base__', {\n      value: 'terminated',\n      configurable: false,\n      writable: false,\n    });\n  }\n\n  /**\n   * Factory method to generate multiple instance of the class.\n   *\n   * @param  {String}      nameOrSelector The selector on which to mount each instance.\n   * @return {Array<Base>}                A list of the created instance.\n   */\n  static $factory(nameOrSelector) {\n    if (!nameOrSelector) {\n      throw new Error(\n        'The $factory method requires a component’s name or selector to be specified.'\n      );\n    }\n\n    return getComponentElements(nameOrSelector).map((el) => new this(el).$mount());\n  }\n}\n","import Base from './abstracts/Base';\n\n/**\n * @typedef {import('./abstracts/Base').BaseComponent} BaseComponent\n */\n\n/**\n * Define a component without a class.\n *\n * @param  {Object} options The component's object\n * @return {BaseComponent}           A component's class.\n */\nexport function defineComponent(options) {\n  const { config, methods, ...hooks } = options;\n\n  if (!config) {\n    throw new Error('The `config` property is required.');\n  }\n\n  if (!config.name) {\n    throw new Error('The `config.name` property is required.');\n  }\n\n  /**\n   * Component class.\n   */\n  class Component extends Base {\n    /**\n     * Component config.\n     */\n    static config = config;\n  }\n\n  const allowedHooks = [\n    'mounted',\n    'loaded',\n    'ticked',\n    'resized',\n    'moved',\n    'keyed',\n    'scrolled',\n    'destroyed',\n    'terminated',\n  ];\n\n  const filteredHooks = Object.entries(hooks).reduce((acc, [name, fn]) => {\n    if (allowedHooks.includes(name)) {\n      acc[name] = fn;\n    } else {\n      throw new Error(\n        `\n          The \"${name}\" method is not a Base lifecycle hook,\n          it should be placed in the \"method\" property.\n          The following hooks are available: ${allowedHooks.join(', ')}\n        `\n      );\n    }\n\n    return acc;\n  }, {});\n\n  [...Object.entries(methods || {}), ...Object.entries(filteredHooks)].forEach(([name, fn]) => {\n    Component.prototype[name] = fn;\n  });\n\n  return Component;\n}\n\n/**\n * Create a Base instance with the given object configuration.\n * @param {HTMLElement|String} elementOrSelector The instance root HTML element.\n * @param {Object}             options           The Base class configuration.\n */\nexport function createBase(elementOrSelector, options) {\n  const Component = defineComponent(options);\n  /** @type {HTMLElement} */\n  const element =\n    typeof elementOrSelector === 'string'\n      ? document.querySelector(elementOrSelector)\n      : elementOrSelector;\n  return new Component(element);\n}\n\nexport default Base;\n","import isObject from '../object/isObject';\n\n/**\n * @typedef {Partial<CSSStyleDeclaration> & Record<string, string | null>} CssStyleObject\n */\n\n/**\n * Manage a list of style properties on an element.\n *\n * @param {HTMLElement}    element The element to update.\n * @param {CssStyleObject} styles  An object of styles properties and values.\n * @param {String}         method  The method to use: add or remove.\n */\nexport default function setStyles(element, styles, method = 'add') {\n  if (!element || !styles || !isObject(styles)) {\n    return;\n  }\n\n  Object.entries(styles).forEach(([prop, value]) => {\n    element.style[prop] = method === 'add' ? value : '';\n  });\n}\n\n/**\n * Add styles to an element.\n *\n * @param {HTMLElement}    element The element to update.\n * @param {CssStyleObject} styles  A string of class names.\n * @return {void}\n */\nexport function add(element, styles) {\n  setStyles(element, styles);\n}\n\n/**\n * Remove class names from an element.\n *\n * @param  {HTMLElement}    element The element to update.\n * @param  {CssStyleObject} styles  A string of class names.\n * @return {void}\n */\nexport function remove(element, styles) {\n  setStyles(element, styles, 'remove');\n}\n","/**\n * Manage a list of classes as string on an element.\n *\n * @param {HTMLElement} element The element to update.\n * @param {String} classNames A string of class names.\n * @param {String=} [method='add'] The method to use: add, remove or toggle.\n */\nfunction setClasses(element, classNames, method = 'add') {\n  if (!element || !classNames) {\n    return;\n  }\n\n  classNames.split(' ').forEach((className) => {\n    element.classList[method](className);\n  });\n}\n\n/**\n * Add class names to an element.\n *\n * @param {HTMLElement} element    The element to update.\n * @param {String}      classNames A string of class names.\n * @return {void}\n */\nexport function add(element, classNames) {\n  setClasses(element, classNames);\n}\n\n/**\n * Remove class names from an element.\n *\n * @param  {HTMLElement} element    The element to update.\n * @param  {String}      classNames A string of class names.\n * @return {void}\n */\nexport function remove(element, classNames) {\n  setClasses(element, classNames, 'remove');\n}\n\n/**\n * Toggle class names from an element.\n *\n * @param  {HTMLElement} element    The element to update.\n * @param  {String}      classNames A string of class names.\n * @return {void}\n */\nexport function toggle(element, classNames) {\n  setClasses(element, classNames, 'toggle');\n}\n","/* eslint no-underscore-dangle: [\"error\", { \"allow\": [\"__isTransitioning__\", \"__transitionEndHandler__\"] }] */\nimport nextFrame from '../nextFrame';\nimport * as classes from './classes';\nimport * as styles from './styles';\n\n/** WeakMap to hold the transition instances. */\nconst cache = new WeakMap();\n\n/**\n * Transition class.\n */\nclass Transition {\n  /**\n   * Is a transition currently running?\n   * @type {Boolean}\n   */\n  isTransitioning = false;\n\n  /**\n   * A callback to execute when the transition ends.\n   * @type {EventListenerOrEventListenerObject|null}\n   */\n  transitionEndHandler = null;\n\n  /**\n   * Instantiate and save the instance to the cache.\n   * @param {HTMLElement} element The HTML element.\n   */\n  constructor(element) {\n    cache.set(element, this);\n  }\n\n  /**\n   * Get the transition class attached to the given element.\n   * @param  {HTMLElement} element The HTML element concerned by the transition.\n   * @return {Transition}          The transition instance tied to the given element.\n   */\n  static getInstance(element) {\n    let instance = cache.get(element);\n\n    if (!instance) {\n      instance = new this(element);\n    }\n\n    return instance;\n  }\n}\n\n/**\n * Update either the classes or the styles of an element with the given method.\n *\n * @param {HTMLElement}   element         The element to update.\n * @param {String|Object} classesOrStyles The classes or styles to apply.\n * @param {String}        method          The method to use, one of `add` or `remove`.\n */\nexport function setClassesOrStyles(element, classesOrStyles, method = 'add') {\n  if (typeof classesOrStyles === 'string') {\n    classes[method](element, classesOrStyles, method);\n  } else {\n    styles[method](element, classesOrStyles, method);\n  }\n}\n\n/**\n * Test if the given element has a transition duration.\n *\n * @param  {HTMLElement} element The element to test.\n * @return {Boolean}             The result of the test.\n */\nfunction testTransition(element) {\n  if (typeof window === 'undefined') {\n    return false;\n  }\n\n  const { transitionDuration } = window.getComputedStyle(element);\n  return !!transitionDuration && transitionDuration !== '0s';\n}\n\n/**\n * Apply the from state.\n *\n * @param {HTMLElement}   element         The target element.\n * @param {String|Object} classesOrStyles The classes or styles definition.\n * @return {Promise}\n */\nasync function start(element, classesOrStyles) {\n  const trs = Transition.getInstance(element);\n  trs.isTransitioning = true;\n  setClassesOrStyles(element, classesOrStyles.from);\n  await nextFrame();\n  setClassesOrStyles(element, classesOrStyles.active);\n  await nextFrame();\n}\n\n/**\n * Apply the active state.\n *\n * @param {HTMLElement}   element         The target element.\n * @param {String|Object} classesOrStyles The classes or styles definition.\n * @return {Promise}\n */\nasync function next(element, classesOrStyles) {\n  const hasTransition = testTransition(element);\n\n  /* eslint-disable-next-line */\n  return new Promise(async resolve => {\n    if (hasTransition) {\n      const trs = Transition.getInstance(element);\n      trs.transitionEndHandler = resolve;\n      element.addEventListener('transitionend', trs.transitionEndHandler, false);\n    }\n    setClassesOrStyles(element, classesOrStyles.from, 'remove');\n    setClassesOrStyles(element, classesOrStyles.to);\n    await nextFrame();\n    if (!hasTransition) {\n      resolve();\n    }\n  });\n}\n\n/**\n * Apply the final state.\n *\n * @param {HTMLElement}   element         The target element.\n * @param {String|Object} classesOrStyles The classes or styles definition.\n * @param {String}        mode            Whether to remove or keep the `to`  classes/styles.\n * @return {void}\n */\nfunction end(element, classesOrStyles, mode = 'remove') {\n  const trs = Transition.getInstance(element);\n  element.removeEventListener('transitionend', trs.transitionEndHandler, false);\n  if (mode === 'remove') {\n    setClassesOrStyles(element, classesOrStyles.to, 'remove');\n  }\n  setClassesOrStyles(element, classesOrStyles.active, 'remove');\n  trs.isTransitioning = false;\n  trs.transitionEndHandler = null;\n}\n\n/**\n * Manage CSS transition with class.\n *\n * This is heavily inspired by the Vue `<transition>` component\n * and the `@barba/css` package, many thanks to them!\n *\n * @param  {HTMLElement}   element The target element.\n * @param  {String|Object} name    The name of the transition or an object with the hooks classesOrStyles.\n * @param  {String}        endMode    Whether to remove or keep the `to` classes/styles\n * @return {Promise}               A promise resolving at the end of the transition.\n */\nexport default async function transition(element, name, endMode = 'remove') {\n  const classesOrStyles =\n    typeof name === 'string'\n      ? {\n          from: `${name}-from`,\n          active: `${name}-active`,\n          to: `${name}-to`,\n        }\n      : {\n          from: '',\n          active: '',\n          to: '',\n          ...name,\n        };\n\n  const trs = Transition.getInstance(element);\n  // End any previous transition running on the element.\n  if (trs.isTransitioning) {\n    end(element, classesOrStyles);\n  }\n\n  await start(element, classesOrStyles);\n  await next(element, classesOrStyles);\n  end(element, classesOrStyles, endMode);\n  return Promise.resolve();\n}\n","import deepmerge from 'deepmerge';\nimport Base from '../../abstracts/Base';\n// eslint-disable-next-line import/no-cycle\nimport Accordion from './index';\nimport * as styles from '../../utils/css/styles';\nimport transition from '../../utils/css/transition';\n\n/**\n * @typedef {import('../../abstracts/Base').BaseOptions} BaseOptions\n * @typedef {import('../../utils/css/styles').CssStyleObject} CssStyleObject\n * @typedef {import('./index').AccordionInterface} AccordionInterface\n */\n\n/**\n * @typedef {Object} AccordionItemRefs\n * @property {HTMLElement} btn\n * @property {HTMLElement} content\n * @property {HTMLElement} container\n */\n\n/**\n * @typedef {Object} StylesOption\n * @property {String|CssStyleObject} open\n * @property {String|CssStyleObject} active\n * @property {String|CssStyleObject} closed\n */\n\n/**\n * @typedef {Object} AccordionItemOptions\n * @property {Boolean} isOpen\n * @property {{ [refName: string]: StylesOption }} styles\n */\n\n/**\n * @typedef {Object} AccordionItemInterface\n * @property {AccordionItemOptions} $options\n * @property {AccordionItemRefs} $refs\n * @property {Accordion & AccordionInterface} $parent\n */\n\n/**\n * AccordionItem class.\n */\nexport default class AccordionItem extends Base {\n  /**\n   * AccordionItem config\n   * @return {Object}\n   */\n  static config = {\n    name: 'AccordionItem',\n    refs: ['btn', 'content', 'container'],\n    options: {\n      isOpen: Boolean,\n      styles: {\n        type: Object,\n        default: () => ({\n          container: {\n            open: '',\n            active: '',\n            closed: '',\n          },\n        }),\n      },\n    },\n  };\n\n  /**\n   * Add aria-attributes on mounted.\n   * @this {AccordionItem & AccordionItemInterface}\n   */\n  mounted() {\n    if (this.$parent && this.$parent instanceof Accordion && this.$parent.$options.item) {\n      Object.entries(this.$parent.$options.item).forEach(([key, value]) => {\n        if (key in this.$options) {\n          const type = AccordionItem.config.options[key].type || AccordionItem.config.options[key];\n          if (type === Array || type === Object) {\n            this.$options[key] = deepmerge(this.$options[key], value);\n          } else {\n            this.$options[key] = value;\n          }\n        }\n      });\n    }\n\n    this.$refs.btn.setAttribute('id', this.$id);\n    this.$refs.btn.setAttribute('aria-controls', this.contentId);\n    this.$refs.content.setAttribute('aria-labelledby', this.$id);\n    this.$refs.content.setAttribute('id', this.contentId);\n\n    const { isOpen } = this.$options;\n    this.updateAttributes(isOpen);\n\n    if (!isOpen) {\n      styles.add(this.$refs.container, { visibility: 'invisible', height: '0' });\n    }\n\n    // Update refs styles on mount\n    const { container, ...otherStyles } = this.$options.styles;\n    /** @type {AccordionItemRefs} */\n    const refs = this.$refs;\n    Object.entries(otherStyles)\n      .filter(([refName]) => refs[refName])\n      .forEach(([refName, { open, closed } = { open: '', closed: '' }]) => {\n        transition(refs[refName], { to: isOpen ? open : closed }, 'keep');\n      });\n  }\n\n  /**\n   * Handler for the click event on the `btn` ref.\n   * @this {AccordionItem & AccordionItemInterface}\n   */\n  onBtnClick() {\n    if (this.$options.isOpen) {\n      this.close();\n    } else {\n      this.open();\n    }\n  }\n\n  /**\n   * Get the content ID.\n   * @return {String}\n   */\n  get contentId() {\n    return `content-${this.$id}`;\n  }\n\n  /**\n   * Update the refs' attributes according to the given type.\n   *\n   * @this {AccordionItem & AccordionItemInterface}\n   * @param  {Boolean} isOpen The state of the item.\n   */\n  updateAttributes(isOpen) {\n    this.$refs.content.setAttribute('aria-hidden', isOpen ? 'false' : 'true');\n    this.$refs.btn.setAttribute('aria-expanded', isOpen ? 'true' : 'false');\n  }\n\n  /**\n   * Open an item.\n   * @this {AccordionItem & AccordionItemInterface}\n   */\n  async open() {\n    if (this.$options.isOpen) {\n      return;\n    }\n\n    this.$log('open');\n    this.$emit('open');\n\n    this.$options.isOpen = true;\n    this.updateAttributes(this.$options.isOpen);\n\n    styles.remove(this.$refs.container, { visibility: 'invisible' });\n    const { container, ...otherStyles } = this.$options.styles;\n\n    /** @type {AccordionItemRefs} */\n    const refs = this.$refs;\n\n    await Promise.all([\n      transition(refs.container, {\n        from: { height: 0 },\n        active: container.active,\n        to: { height: `${refs.content.offsetHeight}px` },\n      }).then(() => {\n        // Remove style only if the item has not been closed before the end\n        if (this.$options.isOpen) {\n          styles.remove(refs.content, { position: 'absolute' });\n        }\n\n        return Promise.resolve();\n      }),\n      ...Object.entries(otherStyles)\n        .filter(([refName]) => refs[refName])\n        .map(([refName, { open, active, closed } = { open: '', active: '', closed: '' }]) =>\n          transition(\n            refs[refName],\n            {\n              from: closed,\n              active,\n              to: open,\n            },\n            'keep'\n          )\n        ),\n    ]);\n  }\n\n  /**\n   * Close an item.\n   * @this {AccordionItem & AccordionItemInterface}\n   */\n  async close() {\n    if (!this.$options.isOpen) {\n      return;\n    }\n\n    this.$log('close');\n    this.$emit('close');\n\n    this.$options.isOpen = false;\n\n    const height = this.$refs.container.offsetHeight;\n    styles.add(this.$refs.content, { position: 'absolute' });\n    const { container, ...otherStyles } = this.$options.styles;\n\n    /** @type {AccordionItemRefs} */\n    const refs = this.$refs;\n\n    await Promise.all([\n      transition(refs.container, {\n        from: { height: `${height}px` },\n        active: container.active,\n        to: { height: '0' },\n      }).then(() => {\n        // Add end styles only if the item has not been re-opened before the end\n        if (!this.$options.isOpen) {\n          styles.add(refs.container, { height: '0', visibility: 'invisible' });\n          this.updateAttributes(this.$options.isOpen);\n        }\n        return Promise.resolve();\n      }),\n      ...Object.entries(otherStyles)\n        .filter(([refName]) => refs[refName])\n        .map(([refName, { open, active, closed } = { open: '', active: '', closed: '' }]) =>\n          transition(\n            refs[refName],\n            {\n              from: open,\n              active,\n              to: closed,\n            },\n            'keep'\n          )\n        ),\n    ]);\n  }\n}\n","import Base from '../../abstracts/Base';\n// eslint-disable-next-line import/no-cycle\nimport AccordionItem from './AccordionItem';\n\n/**\n * @typedef {Object} AccordionRefs\n * @property {HTMLElement[]} btn\n * @property {HTMLElement[]} content\n */\n\n/**\n * @typedef {Object} AccordionOptions\n * @property {Boolean} autoclose\n * @property {Object} item\n */\n\n/**\n * @typedef {Object} AccordionChildren\n * @property {AccordionItem[]} AccordionItem\n */\n\n/**\n * @typedef {Object} AccordionInterface\n * @property {AccordionOptions} $options\n * @property {AccordionRefs} $refs\n * @property {AccordionChildren} $children\n */\n\n/**\n * Accordion class.\n */\nexport default class Accordion extends Base {\n  /**\n   * Accordion config.\n   */\n  static config = {\n    name: 'Accordion',\n    options: {\n      autoclose: Boolean,\n      item: Object,\n    },\n    components: {\n      AccordionItem,\n    },\n  };\n\n  /**\n   * @type {Array<Function>}\n   */\n  unbindMethods = [];\n\n  /**\n   * Init autoclose behavior on mounted.\n   * @this {Accordion & AccordionInterface}\n   * @return {Promise<void>}\n   */\n  async mounted() {\n    // /** @type {AccordionItem[]} */\n    // const items = await Promise.all(\n    //   this.$children.AccordionItem.map((item) =>\n    //     item instanceof Promise ? item : Promise.resolve(item)\n    //   )\n    // );\n\n    this.unbindMethods = this.$children.AccordionItem.map((item, index) => {\n      const unbindOpen = item.$on('open', () => {\n        this.$emit('open', item, index);\n        if (this.$options.autoclose) {\n          // @ts-ignore\n          this.$children.AccordionItem.filter((el, i) => index !== i).forEach((it) => it.close());\n        }\n      });\n      const unbindClose = item.$on('close', () => {\n        this.$emit('close', item, index);\n      });\n\n      return () => {\n        unbindOpen();\n        unbindClose();\n      };\n    });\n  }\n\n  /**\n   * Destroy autoclose behavior on destroyed.\n   * @return {void}\n   */\n  destroyed() {\n    this.unbindMethods.forEach((unbind) => unbind());\n  }\n}\n","/**\n * Get the next damped value for a given speed.\n *\n * @param  {Number} targetValue The final value.\n * @param  {Number} currentValue The current value.\n * @param  {Number=} [speed=0.5] The speed to reach the target value.\n * @return {Number} The next value.\n */\nexport default function damp(targetValue, currentValue, speed = 0.5) {\n  const value = currentValue + (targetValue - currentValue) * speed;\n  return Math.abs(targetValue - currentValue) < 0.001 ? targetValue : value;\n}\n","/**\n * Format a CSS transform matrix with the given values.\n *\n * @param  {Object}  transform\n * @param  {Number=} [transform.scaleX=1]     The scale on the x axis.\n * @param  {Number=} [transform.scaleY=1]     The scale on the y axis.\n * @param  {Number=} [transform.skewX=0]      The skew on the x axis.\n * @param  {Number=} [transform.skewY=0]      The skew on the y axis.\n * @param  {Number=} [transform.translateX=0] The translate on the x axis.\n * @param  {Number=} [transform.translateY=0] The translate on the y axis.\n * @return {String}                           A formatted CSS matrix transform.\n *\n * @example\n * ```js\n * matrix({ scaleX: 0.5, scaleY: 0.5 });\n * // matrix(0.5, 0, 0, 0.5, 0, 0)\n * ```\n */\nexport default function matrix(transform) {\n  // eslint-disable-next-line no-param-reassign\n  transform = transform || {};\n  return `matrix(${transform.scaleX || 1}, ${transform.skewY || 0}, ${transform.skewX || 0}, ${\n    transform.scaleY || 1\n  }, ${transform.translateX || 0}, ${transform.translateY || 0})`;\n}\n","import Base from '../abstracts/Base';\nimport damp from '../utils/math/damp';\nimport matrix from '../utils/css/matrix';\n\n/**\n * @typedef {import('../services/pointer').PointerServiceProps} PointerServiceProps\n * @typedef {import('../abstracts/Base').BaseOptions} BaseOptions\n */\n\n/**\n * @typedef {Object} CursorOptions\n * @property {string} growSelectors\n * @property {string} shrinkSelectors\n * @property {number} growTo\n * @property {number} shrinkTo\n * @property {number} translateDampFactor\n * @property {number} growDampFactor\n * @property {number} shrinkDampFactor\n */\n\n/**\n * @typedef {Object} CursorInterface\n * @property {BaseOptions & CursorOptions} $options\n */\n\n/**\n * Custom cursor component.\n */\nexport default class Cursor extends Base {\n  /**\n   * Class config.\n   */\n  static config = {\n    name: 'Cursor',\n    options: {\n      growSelectors: {\n        type: String,\n        default: 'a, a *, button, button *, [data-cursor-grow], [data-cursor-grow] *',\n      },\n      shrinkSelectors: {\n        type: String,\n        default: '[data-cursor-shrink], [data-cursor-shrink] *',\n      },\n      growTo: {\n        type: Number,\n        default: 2,\n      },\n      shrinkTo: {\n        type: Number,\n        default: 0.5,\n      },\n      translateDampFactor: {\n        type: Number,\n        default: 0.25,\n      },\n      growDampFactor: {\n        type: Number,\n        default: 0.25,\n      },\n      shrinkDampFactor: {\n        type: Number,\n        default: 0.25,\n      },\n    },\n  };\n\n  /**\n   * @type {Number}\n   */\n  x = 0;\n\n  /**\n   * @type {Number}\n   */\n  y = 0;\n\n  /**\n   * @type {Number}\n   */\n  scale = 0;\n\n  /**\n   * @type {Number}\n   */\n  pointerX = 0;\n\n  /**\n   * @type {Number}\n   */\n  pointerY = 0;\n\n  /**\n   * @type {Number}\n   */\n  pointerScale = 0;\n\n  /**\n   * Mounted hook.\n   * @return {void}\n   */\n  mounted() {\n    this.x = 0;\n    this.y = 0;\n    this.scale = 0;\n    this.pointerX = 0;\n    this.pointerY = 0;\n    this.pointerScale = 0;\n    this.render({ x: this.x, y: this.y, scale: this.scale });\n  }\n\n  /**\n   * Moved hook.\n   *\n   * @this {Cursor & CursorInterface}\n   *\n   * @param {PointerServiceProps} options\n   * @return {void}\n   */\n  moved({ event, x, y, isDown }) {\n    if (!this.$services.has('ticked')) {\n      this.$services.enable('ticked');\n    }\n\n    this.pointerX = x;\n    this.pointerY = y;\n\n    let scale = 1;\n\n    if (!event) {\n      this.pointerScale = scale;\n      return;\n    }\n\n    const shouldGrow =\n      (event.target instanceof Element && event.target.matches(this.$options.growSelectors)) ||\n      false;\n    const shouldReduce =\n      isDown ||\n      (event.target instanceof Element && event.target.matches(this.$options.shrinkSelectors)) ||\n      false;\n\n    if (shouldGrow) {\n      scale = this.$options.growTo;\n    }\n\n    if (shouldReduce) {\n      scale = this.$options.shrinkTo;\n    }\n\n    this.pointerScale = scale;\n  }\n\n  /**\n   * RequestAnimationFrame hook.\n   *\n   * @this {Cursor & CursorInterface}\n   *\n   * @return {void}\n   */\n  ticked() {\n    this.x = damp(this.pointerX, this.x, this.$options.translateDampFactor);\n    this.y = damp(this.pointerY, this.y, this.$options.translateDampFactor);\n    this.scale = damp(\n      this.pointerScale,\n      this.scale,\n      this.pointerScale < this.scale ? this.$options.shrinkDampFactor : this.$options.growDampFactor\n    );\n\n    this.render({ x: this.x, y: this.y, scale: this.scale });\n\n    if (this.x === this.pointerX && this.y === this.pointerY && this.scale === this.pointerScale) {\n      this.$services.disable('ticked');\n    }\n  }\n\n  /**\n   * Render the cursor.\n   *\n   * @param  {Object} options\n   * @param  {Number} options.x\n   * @param  {Number} options.y\n   * @param  {Number} options.scale\n   * @return {void}\n   */\n  render({ x, y, scale }) {\n    const transform = matrix({\n      translateX: x,\n      translateY: y,\n      scaleX: scale,\n      scaleY: scale,\n    });\n    this.$el.style.transform = `translateZ(0) ${transform}`;\n  }\n}\n","import keyCodes from './keyCodes';\n\nconst FOCUSABLE_ELEMENTS = [\n  'a[href]:not([tabindex^=\"-\"]):not([inert])',\n  'area[href]:not([tabindex^=\"-\"]):not([inert])',\n  'input:not([disabled]):not([inert])',\n  'select:not([disabled]):not([inert])',\n  'textarea:not([disabled]):not([inert])',\n  'button:not([disabled]):not([inert])',\n  'iframe:not([tabindex^=\"-\"]):not([inert])',\n  'audio:not([tabindex^=\"-\"]):not([inert])',\n  'video:not([tabindex^=\"-\"]):not([inert])',\n  '[contenteditable]:not([tabindex^=\"-\"]):not([inert])',\n  '[tabindex]:not([tabindex^=\"-\"]):not([inert])',\n];\n\nlet focusedBefore;\n\n/**\n * Save the current active element.\n */\nexport function saveActiveElement() {\n  focusedBefore = document.activeElement;\n}\n\n/**\n * Trap tab navigation inside the given element.\n * @param {HTMLElement} element The element in which to trap the tabulations.\n * @param {KeyboardEvent} event The keydown or keyup event.\n */\nexport function trap(element, event) {\n  if (event.keyCode !== keyCodes.TAB) {\n    return;\n  }\n\n  // Save the previous focused element\n  if (!focusedBefore) {\n    focusedBefore = document.activeElement;\n  }\n\n  /** @type {Array<HTMLElement>} */\n  const focusableChildren = Array.from(element.querySelectorAll(FOCUSABLE_ELEMENTS.join(', ')));\n  const focusedItemIndex =\n    document.activeElement instanceof HTMLElement\n      ? focusableChildren.indexOf(document.activeElement)\n      : -1;\n\n  if (!focusableChildren.length) {\n    return;\n  }\n\n  if (focusedItemIndex < 0) {\n    focusableChildren[0].focus();\n    event.preventDefault();\n  }\n\n  // If the SHIFT key is being pressed while tabbing (moving backwards) and\n  // the currently focused item is the first one, move the focus to the last\n  // focusable item from the dialog element\n  if (event.shiftKey && focusedItemIndex === 0) {\n    focusableChildren[focusableChildren.length - 1].focus();\n    event.preventDefault();\n  }\n\n  // If the SHIFT key is not being pressed (moving forwards) and the currently\n  // focused item is the last one, move the focus to the first focusable item\n  // from the dialog element\n  else if (!event.shiftKey && focusedItemIndex === focusableChildren.length - 1) {\n    focusableChildren[0].focus();\n    event.preventDefault();\n  }\n}\n\n/**\n * Untrap the tab navigation.\n */\nexport function untrap() {\n  if (focusedBefore && typeof focusedBefore.focus === 'function') {\n    focusedBefore.focus();\n    focusedBefore = null;\n  }\n}\n\n/**\n * Use a trap/untrap tabs logic.\n */\nexport default function useFocusTrap() {\n  return { trap, untrap, saveActiveElement };\n}\n","import Base from '../abstracts/Base';\nimport transition from '../utils/css/transition';\nimport { trap, untrap, saveActiveElement } from '../utils/focusTrap';\n\n/**\n * @typedef {Object} ModalRefs\n * @property {HTMLElement} close\n * @property {HTMLElement} container\n * @property {HTMLElement} content\n * @property {HTMLElement} modal\n * @property {HTMLElement} open\n * @property {HTMLElement} overlay\n */\n\n/**\n * @typedef {Object} ModalOptions\n * @property {String} move      A selector where to move the modal to.\n * @property {String} autofocus A selector for the element to set the focus to when the modal opens.\n * @property {Object} styles    The styles for the different state of the modal.\n */\n\n/**\n * @typedef {Object} ModalInterface\n * @property {ModalRefs} $refs\n * @property {ModalOptions} $options\n * @property {Boolean} isOpen\n * @property {Comment} refModalPlaceholder\n * @property {HTMLElement} refModalParentBackup\n * @property {Function} refModalUnbindGetRefFilter\n */\n\n/**\n * Modal class.\n */\nexport default class Modal extends Base {\n  /**\n   * Modal options.\n   */\n  static config = {\n    name: 'Modal',\n    refs: ['close', 'container', 'content', 'modal', 'open', 'overlay'],\n    options: {\n      move: String,\n      autofocus: { type: String, default: '[autofocus]' },\n      styles: {\n        type: Object,\n        default: () => ({\n          modal: {\n            closed: {\n              opacity: 0,\n              pointerEvents: 'none',\n              visibility: 'hidden',\n            },\n          },\n        }),\n      },\n    },\n  };\n\n  /**\n   * Open the modal on click on the `open` ref.\n   *\n   * @return {Function} The component's `open` method.\n   */\n  get onOpenClick() {\n    return this.open;\n  }\n\n  /**\n   * Close the modal on click on the `close` ref.\n   *\n   * @return {Function} The component's `close` method.\n   */\n  get onCloseClick() {\n    return this.close;\n  }\n\n  /**\n   * Close the modal on click on the `overlay` ref.\n   *\n   * @return {Function} The component's `close` method.\n   */\n  get onOverlayClick() {\n    return this.close;\n  }\n\n  /**\n   * Initialize the component's behaviours.\n   *\n   * @this {Modal & ModalInterface}\n   */\n  mounted() {\n    this.isOpen = false;\n    this.close();\n\n    if (this.$options.move) {\n      const target = document.querySelector(this.$options.move) || document.body;\n      const refsBackup = this.$refs;\n\n      this.refModalPlaceholder = document.createComment('');\n      this.refModalParentBackup = this.$refs.modal.parentElement || this.$el;\n      this.refModalParentBackup.insertBefore(this.refModalPlaceholder, this.$refs.modal);\n\n      this.refModalUnbindGetRefFilter = this.$on(\n        'get:refs',\n        /**\n         * @param {ModalRefs} refs\n         */\n        (refs) => {\n          Object.entries(refsBackup).forEach(([key, ref]) => {\n            if (!refs[key]) {\n              refs[key] = ref;\n            }\n          });\n        }\n      );\n      target.appendChild(this.$refs.modal);\n    }\n\n    return this;\n  }\n\n  /**\n   * Unbind all events on destroy.\n   *\n   * @this {Modal & ModalInterface}\n   * @return {Modal} The Modal instance.\n   */\n  destroyed() {\n    this.close();\n\n    if (this.$options.move && this.refModalParentBackup) {\n      this.refModalParentBackup.insertBefore(this.$refs.modal, this.refModalPlaceholder);\n      this.refModalUnbindGetRefFilter();\n      this.refModalPlaceholder.remove();\n      delete this.refModalPlaceholder;\n      delete this.refModalParentBackup;\n      delete this.refModalUnbindGetRefFilter;\n    }\n\n    return this;\n  }\n\n  /**\n   * Close the modal on `ESC` and trap the tabulation.\n   *\n   * @this {Modal & ModalInterface}\n   * @param  {Object}        options\n   * @param  {KeyboardEvent} options.event  The original keyboard event\n   * @param  {Boolean}       options.isUp   Is it a keyup event?\n   * @param  {Boolean}       options.isDown Is it a keydown event?\n   * @param  {Boolean}       options.ESC    Is it the ESC key?\n   */\n  keyed({ event, isUp, isDown, ESC }) {\n    if (!this.isOpen) {\n      return;\n    }\n\n    if (isDown) {\n      trap(this.$refs.modal, event);\n    }\n\n    if (ESC && isUp) {\n      this.close();\n    }\n  }\n\n  /**\n   * Open the modal.\n   *\n   * @this {Modal & ModalInterface}\n   * @return {Promise<Modal>} The Modal instance.\n   */\n  async open() {\n    if (this.isOpen) {\n      return Promise.resolve(this);\n    }\n\n    this.$refs.modal.setAttribute('aria-hidden', 'false');\n    document.documentElement.style.overflow = 'hidden';\n\n    this.isOpen = true;\n    this.$emit('open');\n\n    /** @type {ModalRefs} */\n    const refs = this.$refs;\n\n    return Promise.all(\n      Object.entries(this.$options.styles).map(\n        ([refName, { open, active, closed } = { open: '', active: '', closed: '' }]) =>\n          transition(\n            refs[refName],\n            {\n              from: closed,\n              active,\n              to: open,\n            },\n            'keep'\n          )\n      )\n    ).then(() => {\n      if (this.$options.autofocus && this.$refs.modal.querySelector(this.$options.autofocus)) {\n        saveActiveElement();\n        /** @type {HTMLElement} */\n        const autofocusElement = this.$refs.modal.querySelector(this.$options.autofocus);\n        autofocusElement.focus();\n      }\n      return Promise.resolve(this);\n    });\n  }\n\n  /**\n   * Close the modal.\n   *\n   * @this {Modal & ModalInterface}\n   * @return {Promise<Modal>} The Modal instance.\n   */\n  async close() {\n    if (!this.isOpen) {\n      return Promise.resolve(this);\n    }\n\n    this.$refs.modal.setAttribute('aria-hidden', 'true');\n    document.documentElement.style.overflow = '';\n\n    this.isOpen = false;\n    untrap();\n    this.$emit('close');\n\n    /** @type {ModalRefs} */\n    const refs = this.$refs;\n\n    return Promise.all(\n      Object.entries(this.$options.styles).map(\n        ([refName, { open, active, closed } = { open: '', active: '', closed: '' }]) =>\n          transition(\n            refs[refName],\n            {\n              from: open,\n              active,\n              to: closed,\n            },\n            'keep'\n          )\n      )\n    ).then(() => Promise.resolve(this));\n  }\n}\n","import Base from '../abstracts/Base';\nimport transition from '../utils/css/transition';\n\n/**\n * @typedef {import('../abstracts/Base').BaseOptions} BaseOptions\n */\n\n/**\n * @typedef {Object} TabItem\n * @property {HTMLElement} btn\n * @property {HTMLElement} content\n * @property {Boolean} isEnabled\n */\n\n/**\n * @typedef {Object} TabsRefs\n * @property {HTMLElement[]} btn\n * @property {HTMLElement[]} content\n */\n\n/**\n * @typedef {Object} TabsOptions\n * @property {Object} styles\n */\n\n/**\n * @typedef {Object} TabsInterface\n * @property {TabsOptions} $options\n * @property {TabsRefs} $refs\n * @property {Array<TabItem>} items\n */\n\n/**\n * Tabs class.\n */\nexport default class Tabs extends Base {\n  /**\n   * Tabs config.\n   */\n  static config = {\n    name: 'Tabs',\n    refs: ['btn[]', 'content[]'],\n    options: {\n      styles: {\n        type: Object,\n        default: () => ({\n          content: {\n            closed: {\n              position: 'absolute',\n              opacity: '0',\n              pointerEvents: 'none',\n              visibility: 'hidden',\n            },\n          },\n        }),\n      },\n    },\n  };\n\n  /**\n   * Initialize the component's behaviours.\n   * @this {Tabs & TabsInterface}\n   */\n  mounted() {\n    this.items = this.$refs.btn.map((btn, index) => {\n      const id = `${this.$id}-${index}`;\n      const content = this.$refs.content[index];\n      btn.setAttribute('id', id);\n      content.setAttribute('aria-labelledby', id);\n\n      const item = { btn, content, isEnabled: index > 0 };\n      if (index > 0) {\n        this.disableItem(item);\n      } else {\n        this.enableItem(item);\n      }\n      return item;\n    });\n\n    return this;\n  }\n\n  /**\n   * Switch tab on button click.\n   *\n   * @this {Tabs & TabsInterface}\n   * @param  {Event}  event The click event object.\n   * @param  {Number} index The index of the clicked button.\n   * @return {void}\n   */\n  onBtnClick(event, index) {\n    this.items.forEach((item, i) => {\n      if (i !== index) {\n        this.disableItem(item);\n      }\n    });\n\n    this.enableItem(this.items[index]);\n  }\n\n  /**\n   * Enable the given tab and its associated content.\n   *\n   * @this {Tabs & TabsInterface}\n   * @param  {TabItem}       item The item to enable.\n   * @return {Promise<Tabs & TabsInterface>}      Tabs instance.\n   */\n  async enableItem(item) {\n    if (!item || item.isEnabled) {\n      return Promise.resolve(this);\n    }\n\n    item.isEnabled = true;\n    const { btn, content } = item;\n    const btnStyles = this.$options.styles.btn || {};\n    const contentStyles = this.$options.styles.content || {};\n\n    content.setAttribute('aria-hidden', 'false');\n    this.$emit('enable', item);\n\n    return Promise.all([\n      transition(\n        btn,\n        {\n          from: btnStyles.closed,\n          active: btnStyles.active,\n          to: btnStyles.open,\n        },\n        'keep'\n      ),\n      transition(\n        content,\n        {\n          from: contentStyles.closed,\n          active: contentStyles.active,\n          to: contentStyles.open,\n        },\n        'keep'\n      ),\n    ]).then(() => Promise.resolve(this));\n  }\n\n  /**\n   * Disable the given tab and its associated content.\n   *\n   * @this {Tabs & TabsInterface}\n   * @param  {TabItem}       item The item to disable.\n   * @return {Promise<Tabs & TabsInterface>}      The Tabs instance.\n   */\n  async disableItem(item) {\n    if (!item || !item.isEnabled) {\n      return Promise.resolve(this);\n    }\n\n    item.isEnabled = false;\n    const { btn, content } = item;\n    const btnStyles = this.$options.styles.btn || {};\n    const contentStyles = this.$options.styles.content || {};\n\n    content.setAttribute('aria-hidden', 'true');\n    this.$emit('disable', item);\n\n    return Promise.all([\n      transition(\n        btn,\n        {\n          from: btnStyles.open,\n          active: btnStyles.active,\n          to: btnStyles.closed,\n        },\n        'keep'\n      ),\n      transition(\n        content,\n        {\n          from: contentStyles.open,\n          active: contentStyles.active,\n          to: contentStyles.closed,\n        },\n        'keep'\n      ),\n    ]).then(() => Promise.resolve(this));\n  }\n}\n","import useResize from '../services/resize';\n\n/**\n * @typedef {import('../abstracts/Base').default} Base\n * @typedef {import('../abstracts/Base').BaseComponent} BaseComponent\n */\n\n/**\n * Test the breakpoins of the given Base instance and return the hook to call.\n *\n * @param  {Array<[String[], Base]>} breakpoints The breakpoints's data.\n */\nfunction testBreakpoints(breakpoints) {\n  const { breakpoint } = useResize().props();\n  breakpoints.forEach(([breakpointKeys, instance]) => {\n    if (breakpointKeys.includes(breakpoint)) {\n      instance.$mount();\n    } else {\n      instance.$destroy();\n    }\n  });\n}\n\n/**\n * Prepare the components.\n * @param {Base} instance\n * @param {Array<[String, BaseComponent]>} breakpoints\n * @return {Array<[String, Base]>}\n */\nfunction mountComponents(instance, breakpoints) {\n  return breakpoints.map(([bk, ComponentClass]) => {\n    const child = new ComponentClass(instance.$el);\n    Object.defineProperty(child, '$parent', { get: () => instance });\n    return [bk, child];\n  });\n}\n\n/**\n * A cache object to hold each Base sub-instances.\n * @type {Object}\n */\nconst instances = {};\n\n/**\n * BreakpointManager class.\n * @param {BaseComponent} BaseClass\n * @param {Array<[String, BaseComponent]>} breakpoints\n * @return {BaseComponent}\n */\nexport default (BaseClass, breakpoints) => {\n  if (!Array.isArray(breakpoints)) {\n    throw new Error('[withBreakpointManager] The `breakpoints` parameter must be an array.');\n  }\n\n  if (breakpoints.length < 2) {\n    throw new Error('[withBreakpointManager] You must define at least 2 breakpoints.');\n  }\n\n  const { add, props } = useResize();\n\n  // Do nothing if no breakpoint has been defined.\n  // @see https://js-toolkit.meta.fr/services/resize.html#breakpoint\n  if (!props().breakpoint) {\n    throw new Error(`The \\`BreakpointManager\\` class requires breakpoints to be defined.`);\n  }\n\n  return class BreakpointManager extends BaseClass {\n    /**\n     * Watch for the document resize to test the breakpoints.\n     * @this {Base & {}}\n     * @param {HTMLElement} element The component's root element.\n     */\n    constructor(element) {\n      super(element);\n\n      if (!instances[this.$id]) {\n        instances[this.$id] = mountComponents(this, breakpoints);\n      }\n\n      testBreakpoints(instances[this.$id]);\n\n      add(`BreakpointManager-${this.$id}`, () => {\n        testBreakpoints(instances[this.$id]);\n      });\n\n      return this;\n    }\n\n    /**\n     * Override the default $mount method to prevent component's from being\n     * mounted when they should not.\n     * @this {Base}\n     * @return {this}\n     */\n    $mount() {\n      if (!instances[this.$id]) {\n        instances[this.$id] = mountComponents(this, breakpoints);\n      }\n\n      testBreakpoints(instances[this.$id]);\n\n      return super.$mount();\n    }\n\n    /**\n     * Destroy all instances when the main one is destroyed.\n     * @return {this}\n     */\n    $destroy() {\n      if (Array.isArray(instances[this.$id])) {\n        instances[this.$id].forEach(([, instance]) => {\n          instance.$destroy();\n        });\n      }\n\n      return super.$destroy();\n    }\n  };\n};\n","import useResize from '../services/resize';\n\n/**\n * @typedef {import('../abstracts/Base').default} Base\n * @typedef {import('../abstracts/Base').BaseComponent} BaseComponent\n */\n\n/**\n * @typedef {Object} WithBreakpointObserverOptions\n * @property {String} [activeBreakpoints]\n * @property {String} [inactiveBreakpoints]\n */\n\n/**\n * @typedef {Object} WithBreakpointObserverInterface\n * @property {WithBreakpointObserverOptions} $options\n */\n\n/**\n * Test the breakpoins of the given Base instance and return the hook to call.\n *\n * @param  {Base & WithBreakpointObserverInterface}   instance The component's instance.\n * @return {String}          The action to trigger.\n */\nfunction testBreakpoints(instance, breakpoint = useResize().props().breakpoint) {\n  const { activeBreakpoints, inactiveBreakpoints } = instance.$options;\n  const isInActiveBreakpoint =\n    activeBreakpoints && activeBreakpoints.split(' ').includes(breakpoint);\n  const isInInactiveBreakpoint =\n    inactiveBreakpoints && inactiveBreakpoints.split(' ').includes(breakpoint);\n\n  if (\n    (activeBreakpoints && isInActiveBreakpoint) ||\n    (inactiveBreakpoints && !isInInactiveBreakpoint)\n  ) {\n    return '$mount';\n  }\n\n  return '$destroy';\n}\n\n/**\n * Test if the given instance is configured for breakpoints.\n * @param  {Base & WithBreakpointObserverInterface}    instance A Base class instance.\n * @return {Boolean}          True if configured correctly, false otherwise.\n */\nfunction hasBreakpointConfiguration(instance) {\n  const { activeBreakpoints, inactiveBreakpoints } = instance.$options;\n  return Boolean(activeBreakpoints || inactiveBreakpoints);\n}\n\n/**\n * Test if the given instance has a conflicting configuration for breakpoints.\n * @param  {Base & WithBreakpointObserverInterface} instance A Base class instance.\n * @return {void}\n */\nfunction testConflictingBreakpointConfiguration(instance) {\n  const { activeBreakpoints, inactiveBreakpoints, name } = instance.$options;\n  if (activeBreakpoints && inactiveBreakpoints) {\n    throw new Error(\n      `[${name}] Incorrect configuration: the \\`activeBreakpoints\\` and \\`inactiveBreakpoints\\` are not compatible.`\n    );\n  }\n}\n\n/**\n * Add the current instance to the resize service.\n * @param {String} key      The key for the resize service callback.\n * @param {Base}   instance The instance to observe.\n */\nfunction addToResize(key, instance) {\n  testConflictingBreakpointConfiguration(instance);\n  const { add, has } = useResize();\n\n  if (!has(key)) {\n    add(key, function onResize({ breakpoint }) {\n      const action = testBreakpoints(instance, breakpoint);\n\n      // Always destroy before mounting\n      if (action === '$destroy' && instance.$isMounted) {\n        instance[action]();\n      } else if (action === '$mount' && !instance.$isMounted) {\n        setTimeout(() => instance[action](), 0);\n      }\n    });\n  }\n}\n\n/**\n * BreakpointObserver class.\n *\n * @param {BaseComponent} BaseClass The Base class to extend from.\n * @return {BaseComponent}\n */\nexport default (BaseClass) =>\n  class BreakpointObserver extends BaseClass {\n    static config = {\n      ...(BaseClass.config || {}),\n      name: `${BaseClass?.config?.name ?? ''}WithBreakpointObserver`,\n      options: {\n        ...(BaseClass?.config?.options || {}),\n        activeBreakpoints: String,\n        inactiveBreakpoints: String,\n      },\n    };\n\n    /**\n     * Watch for the document resize to test the breakpoints.\n     * @this {Base & WithBreakpointObserverInterface}\n     * @param  {HTMLElement} element The component's root element.\n     */\n    constructor(element) {\n      super(element);\n\n      const { remove, props } = useResize();\n      const { name } = this.$options;\n\n      // Do nothing if no breakpoint has been defined.\n      // @see https://js-toolkit.meta.fr/services/resize.html#breakpoint\n      if (!props().breakpoint) {\n        throw new Error(\n          `[${name}] The \\`BreakpointObserver\\` class requires breakpoints to be defined.`\n        );\n      }\n\n      const key = `BreakpointObserver-${this.$id}`;\n\n      // Watch change on the `data-options` attribute to emit the `set:options` event.\n      const mutationObserver = new MutationObserver(([mutation]) => {\n        if (\n          mutation.type === 'attributes' &&\n          (mutation.attributeName === 'data-options' ||\n            mutation.attributeName.startsWith('data-option-'))\n        ) {\n          // Stop here silently when no breakpoint configuration given.\n          if (!hasBreakpointConfiguration(this)) {\n            this.$mount();\n            remove(key);\n            return;\n          }\n\n          addToResize(key, this);\n        }\n      });\n      mutationObserver.observe(this.$el, { attributes: true });\n\n      // Stop here silently when no breakpoint configuration given.\n      if (!hasBreakpointConfiguration(this)) {\n        return this;\n      }\n\n      addToResize(key, this);\n      return this;\n    }\n\n    /**\n     * Override the default $mount method to prevent component's from being\n     * mounted when they should not.\n     * @return {this}\n     */\n    $mount() {\n      // Execute normal behavior when no breakpoint configuration given.\n      if (!hasBreakpointConfiguration(this)) {\n        return super.$mount();\n      }\n\n      const action = testBreakpoints(this);\n      if (action === '$mount') {\n        return super.$mount();\n      }\n\n      return this;\n    }\n  };\n","import { debug } from '../abstracts/Base/utils';\n\n/**\n * @typedef {import('../abstracts/Base').default} Base\n * @typedef {import('../abstracts/Base').BaseComponent} BaseComponent\n */\n\n/**\n * @typedef {Object} WithIntersectionObserverOptions\n * @property {Object} intersectionObserver\n */\n\n/**\n * @typedef {Object} WithIntersectionObserverInterface\n * @property {WithIntersectionObserverOptions} $options\n * @property {IntersectionObserver} $observer\n * @property {(entries: IntersectionObserverEntry[]) => void} intersected\n */\n\n/**\n * Create an array of number between 0 and 1 from the given length.\n * @param  {Number} length The length of the array.\n * @return {Array}        An array of number.\n */\nfunction createArrayOfNumber(length) {\n  return [...new Array(length + 1)].map((val, index) => index / length);\n}\n\n/**\n * IntersectionObserver decoration.\n * @param {BaseComponent} BaseClass The Base class to extend.\n * @param {Object} [defaultOptions] The options for the IntersectionObserver instance.\n * @return {BaseComponent}\n */\nexport default (BaseClass, defaultOptions = { threshold: createArrayOfNumber(100) }) =>\n  class extends BaseClass {\n    /**\n     * Add the `intersected` method to the list of method to exclude from the `autoBind` call.\n     */\n    get _excludeFromAutoBind() {\n      return [...(super._excludeFromAutoBind || []), 'intersected'];\n    }\n\n    static config = {\n      ...(BaseClass.config || {}),\n      name: `${BaseClass?.config?.name ?? ''}WithIntersectionObserver`,\n      options: {\n        ...(BaseClass?.config?.options || {}),\n        intersectionObserver: Object,\n      },\n    };\n\n    /**\n     * Create an observer when the class in instantiated.\n     *\n     * @this {Base & WithIntersectionObserverInterface}\n     * @param  {HTMLElement} element The component's root element.\n     */\n    constructor(element) {\n      super(element);\n\n      if (!this.intersected || typeof this.intersected !== 'function') {\n        throw new Error('[withIntersectionObserver] The `intersected` method must be defined.');\n      }\n\n      this.$observer = new IntersectionObserver(\n        (entries) => {\n          debug(this, 'intersected', entries);\n          this.$emit('intersected', entries);\n          this.intersected(entries);\n        },\n        { ...defaultOptions, ...(this.$options.intersectionObserver || {}) }\n      );\n\n      if (this.$isMounted) {\n        this.$observer.observe(this.$el);\n      }\n\n      this.$on('mounted', () => {\n        this.$observer.observe(this.$el);\n      });\n\n      this.$on('destroyed', () => {\n        this.$observer.unobserve(this.$el);\n      });\n\n      return this;\n    }\n  };\n","/**\n * Interpolate the ratio between a given interval.\n *\n * @param  {Number} min   The interval minimum value.\n * @param  {Number} max   The inverval maximum value.\n * @param  {Number} ratio The ratio to get.\n * @return {Number}       The value between min and max corresponding to ratio.\n */\nexport default function lerp(min, max, ratio) {\n  return (1 - ratio) * min + ratio * max;\n}\n","/**\n * Maps the value from one range of [inputMin..inputMax] to another range of [outputMin..outputMax].\n *\n * @param  {Number} value     The value to map.\n * @param  {Number} inputMin  The input's minimum value.\n * @param  {Number} inputMax  The input's maximum value.\n * @param  {Number} outputMin The output's minimum value.\n * @param  {Number} outputMax The output's maximum value.\n * @return {Number}           The input value mapped to the output range.\n */\nexport default function map(value, inputMin, inputMax, outputMin, outputMax) {\n  return ((value - inputMin) * (outputMax - outputMin)) / (inputMax - inputMin) + outputMin;\n}\n","/**\n * Round a value with a given number of decimals.\n *\n * @param  {Number} value The number to round.\n * @param  {Number=} [decimals=0] The number of decimals to keep.\n * @return {Number} A rounded number to the given decimals length.\n */\nexport default function round(value, decimals = 0) {\n  return Number(value.toFixed(decimals));\n}\n","import isObject from './object/isObject';\n\n/**\n * @typedef {Object} HistoryOptions\n * @property {string=} [path]\n * @property {URLSearchParams|{ [key:string]: unknown }=} [search]\n * @property {string=} [hash]\n */\n\n/**\n * Set a param in a URLSearchParam instance.\n * @param  {URLSearchParams}                    params The params to update.\n * @param  {string}                             name   The name of the param to update.\n * @param  {string|number|boolean|Array|Object} value  The value for this param.\n * @return {URLSearchParams}                           The updated URLSearchParams instance.\n */\nfunction updateUrlSearchParam(params, name, value) {\n  if (value === '' || value === null || value === undefined) {\n    if (params.has(name)) {\n      params.delete(name);\n    }\n    return params;\n  }\n\n  if (Array.isArray(value)) {\n    value.forEach((val, index) => {\n      const arrayName = `${name}[${index}]`;\n      updateUrlSearchParam(params, arrayName, val);\n    });\n    return params;\n  }\n\n  if (isObject(value)) {\n    Object.entries(value).forEach(([key, val]) => {\n      const objectName = `${name}[${key}]`;\n      updateUrlSearchParam(params, objectName, val);\n    });\n    return params;\n  }\n\n  params.set(name, value);\n  return params;\n}\n\n/**\n * Transform an object to an URLSearchParams instance.\n *\n * @param  {Object}          obj           The object to convert.\n * @param  {string}          defaultSearch A string of defaults search params.\n * @return {URLSearchParams}\n */\nfunction objectToURLSearchParams(obj, defaultSearch = window.location.search) {\n  return Object.entries(obj).reduce(\n    (urlSearchParams, [name, value]) => updateUrlSearchParam(urlSearchParams, name, value),\n    new URLSearchParams(defaultSearch)\n  );\n}\n\n/**\n * Update the history with a new state.\n * @param {string}         mode\n * @param {HistoryOptions} options\n * @param {Object}         [data]\n * @param {string}         [title]\n */\nfunction updateHistory(mode, options, data = {}, title = '') {\n  if (!window.history) {\n    return;\n  }\n\n  /** @type {HistoryOptions} */\n  const { path, search, hash } = {\n    path: window.location.pathname,\n    search: new URLSearchParams(window.location.search),\n    hash: window.location.hash,\n    ...options,\n  };\n\n  let url = path;\n\n  const mergedSearch = search instanceof URLSearchParams ? search : objectToURLSearchParams(search);\n\n  if (mergedSearch.toString()) {\n    url += `?${mergedSearch.toString()}`;\n  }\n\n  if (hash) {\n    if (hash.startsWith('#')) {\n      url += hash;\n    } else {\n      url += `#${hash}`;\n    }\n  }\n\n  const method = `${mode}State`;\n  window.history[method](data, title, url);\n}\n\n/**\n * Push a new state.\n *\n * @param {HistoryOptions} options The new state.\n * @param {Object}         data    The data for the new state.\n * @param {string}         title   The title for the new state.\n */\nexport function push(options, data, title) {\n  updateHistory('push', options, data, title);\n}\n\n/**\n * Replace a new state.\n *\n * @param {HistoryOptions} options The new state.\n * @param {Object}         data    The data for the new state.\n * @param {string}         title   The title for the new state.\n */\nexport function replace(options, data, title) {\n  updateHistory('replace', options, data, title);\n}\n"],"names":["getAllProperties","object","props","proto","Object","getPrototypeOf","prototype","getOwnPropertyNames","map","name","reduce","acc","val","autoBind","instance","options","exclude","include","filter","key","match","pattern","test","some","forEach","descriptor","getOwnPropertyDescriptor","value","bind","EventManager","_events","$on","event","listener","Array","isArray","push","$off","index","indexOf","splice","$emit","apply","$once","handler","getConfig","config","constructor","Error","console","warn","log","debug","process","env","NODE_ENV","$options","hasMethod","obj","callMethod","method","args","$isMounted","call","getChild","el","ComponentClass","parent","__base__","child","defineProperty","get","then","module","default","getComponentElements","nameOrSelector","element","document","selector","elements","from","querySelectorAll","length","getChildren","components","children","entries","enumerable","configurable","isObject","toString","getAttributeName","noCase","delimiter","Options","schema","String","Number","Boolean","isObjectConfig","types","includes","type","defaultValue","set","attributeName","hasAttribute","setAttribute","getAttribute","deepmerge","JSON","parse","setTimeout","stringify","TypeError","removeAttribute","getLegacyOptionsSchema","propsToExclude","keys","propName","undefined","getParentOptionsSchema","getterConfig","staticConfig","assign","updateOptionsWithLegacyValues","legacyOptionsValues","dataset","err","optionName","optionValue","getOptions","scopeSelectorPonyfill","uniqId","list","attr","scopedSelector","getRefs","definedRefs","refs","allRefs","childrenRefs","$id","ref","$refs","$ref","refName","$realRef","endsWith","replace","mountComponent","component","Promise","$mount","mountComponents","$children","values","$child","mountOrUpdateComponent","$update","mountOrUpdateComponents","destroyComponent","$destroy","destroyComponents","Service","callbacks","Map","isInit","init","kill","add","callback","has","size","remove","delete","trigger","forEachCallback","throttle","fn","delay","lastCall","throttled","now","Date","getTime","debounce","timeout","debounced","clearTimeout","getRaf","window","requestAnimationFrame","getCancelRaf","cancelAnimationFrame","nextFrame","raf","resolve","Raf","isTicking","id","cancelRaf","loop","time","performance","useRaf","isTouchEvent","TouchEvent","Pointer","isDown","y","innerHeight","yLast","x","innerWidth","xLast","hasRaf","updateValues","downHandler","upHandler","documentElement","addEventListener","once","passive","removeEventListener","touches","clientY","clientX","changed","last","delta","progress","max","pointer","usePointer","Resize","canUseResizeObserver","resizeObserver","ResizeObserver","observe","disconnect","width","height","ratio","orientation","breakpointElement","breakpoint","breakpoints","querySelector","getComputedStyle","getPropertyValue","split","resize","useResize","Scroll","pageYOffset","pageXOffset","scrollingElement","body","scrollWidth","scrollHeight","scroll","useScroll","ENTER","SPACE","TAB","ESC","LEFT","UP","RIGHT","DOWN","Key","triggered","previousEvent","keyCodes","code","keyCode","direction","isUp","useKey","Load","SERVICES_MAP","scrolled","resized","ticked","moved","keyed","loaded","useLoad","Services","service","enable","disable","noop","self","serviceHandler","enableAll","serviceName","disableAll","bindRootEvents","eventMethods","eventMethod","eventName","toLowerCase","$el","bindRefsEvents","unbindMethods","$refOrRefs","refEventMethod","c","toUpperCase","startsWith","Base","unbindMethod","bindChildrenEvents","childName","childEventMethod","bindEvents","ROOT_EVENT_REGEX","REFS_CHILDREN_EVENT_REGEX","root","refsOrChildren","$parent","nanoid","_excludeFromAutoBind","$services","$terminate","writable","$factory","$isBase","defineComponent","methods","hooks","Component","allowedHooks","filteredHooks","join","createBase","elementOrSelector","setStyles","styles","prop","style","setClasses","classNames","className","classList","toggle","transition","endMode","classesOrStyles","active","to","trs","Transition","getInstance","isTransitioning","end","start","next","hasTransition","testTransition","transitionEndHandler","setClassesOrStyles","cache","WeakMap","classes","transitionDuration","mode","AccordionItem","mounted","Accordion","item","btn","contentId","content","isOpen","updateAttributes","container","visibility","otherStyles","open","closed","onBtnClick","close","$log","all","offsetHeight","position","unbindOpen","autoclose","i","it","unbindClose","destroyed","unbind","damp","targetValue","currentValue","speed","Math","abs","matrix","transform","scaleX","skewY","skewX","scaleY","translateX","translateY","Cursor","scale","pointerX","pointerY","pointerScale","render","shouldGrow","target","Element","matches","growSelectors","shouldReduce","shrinkSelectors","growTo","shrinkTo","translateDampFactor","shrinkDampFactor","growDampFactor","FOCUSABLE_ELEMENTS","focusedBefore","saveActiveElement","activeElement","trap","focusableChildren","focusedItemIndex","HTMLElement","focus","preventDefault","shiftKey","untrap","useFocusTrap","Modal","move","refsBackup","refModalPlaceholder","createComment","refModalParentBackup","modal","parentElement","insertBefore","refModalUnbindGetRefFilter","appendChild","overflow","autofocus","autofocusElement","opacity","pointerEvents","Tabs","items","isEnabled","disableItem","enableItem","btnStyles","contentStyles","testBreakpoints","breakpointKeys","bk","instances","BaseClass","activeBreakpoints","inactiveBreakpoints","isInActiveBreakpoint","isInInactiveBreakpoint","hasBreakpointConfiguration","testConflictingBreakpointConfiguration","addToResize","onResize","action","mutationObserver","MutationObserver","mutation","attributes","createArrayOfNumber","defaultOptions","threshold","intersected","$observer","IntersectionObserver","intersectionObserver","unobserve","lerp","min","inputMin","inputMax","outputMin","outputMax","round","decimals","toFixed","updateUrlSearchParam","params","arrayName","objectName","objectToURLSearchParams","defaultSearch","location","search","urlSearchParams","URLSearchParams","updateHistory","data","title","history","path","pathname","hash","url","mergedSearch"],"mappings":"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"}