{"version":3,"file":"index.umd.js","sources":["../node_modules/nanoid/non-secure/index.js","../src/utils/object/getAllProperties.js","../src/utils/object/autoBind.js","../src/abstracts/EventManager.js","../src/abstracts/Base/utils.js","../src/abstracts/Base/children.js","../node_modules/deepmerge/dist/cjs.js","../node_modules/lower-case/dist.es2015/index.js","../node_modules/no-case/dist.es2015/index.js","../src/utils/object/isObject.js","../src/abstracts/Base/classes/Options.js","../src/abstracts/Base/options.js","../src/abstracts/Base/refs.js","../src/abstracts/Base/components.js","../src/abstracts/Service.js","../src/utils/throttle.js","../src/utils/debounce.js","../src/utils/nextFrame.js","../src/services/raf.js","../src/services/pointer.js","../src/services/resize.js","../src/services/scroll.js","../src/utils/keyCodes.js","../src/services/key.js","../src/abstracts/Base/services.js","../src/abstracts/Base/events.js","../src/abstracts/Base/index.js","../src/index.js"],"sourcesContent":["// This alphabet uses a-z A-Z 0-9 _- symbols.\n// Symbols are generated for smaller size.\n// -_zyxwvutsrqponmlkjihgfedcba9876543210ZYXWVUTSRQPONMLKJIHGFEDCBA\nvar url = '-_'\n// Loop from 36 to 0 (from z to a and 9 to 0 in Base36).\nvar i = 36\nwhile (i--) {\n  // 36 is radix. Number.prototype.toString(36) returns number\n  // in Base36 representation. Base36 is like hex, but it uses 0–9 and a-z.\n  url += i.toString(36)\n}\n// Loop from 36 to 10 (from Z to A in Base36).\ni = 36\nwhile (i-- - 10) {\n  url += i.toString(36).toUpperCase()\n}\n\n/**\n * Generate URL-friendly unique ID. This method use non-secure predictable\n * random generator with bigger collision probability.\n *\n * @param {number} [size=21] The number of symbols in ID.\n *\n * @return {string} Random string.\n *\n * @example\n * const nanoid = require('nanoid/non-secure')\n * model.id = nanoid() //=> \"Uakgb_J5m9g-0JDMbcJqL\"\n *\n * @name nonSecure\n * @function\n */\nmodule.exports = function (size) {\n  var id = ''\n  i = size || 21\n  // Compact alternative for `for (var i = 0; i < size; i++)`\n  while (i--) {\n    // `| 0` is compact and faster alternative for `Math.floor()`\n    id += url[Math.random() * 64 | 0]\n  }\n  return id\n}\n","/**\n * Gets all non-builtin properties up the prototype chain.\n *\n * @param  {Object} object The object to get the propeties from.\n * @param  {Array}  props  The already existing properties.\n * @return {Array}         An array of properties and their value.\n */\nexport default function getAllProperties(object, props = []) {\n  const proto = Object.getPrototypeOf(object);\n\n  if (proto === Object.prototype) {\n    return props;\n  }\n\n  return getAllProperties(\n    proto,\n    Object.getOwnPropertyNames(proto)\n      .map((name) => [name, proto])\n      .reduce((acc, val) => [...acc, val], props)\n  );\n}\n","import getAllProperties from './getAllProperties';\n\n/**\n * Auto-bind methods to an instance.\n *\n * @param  {Object}               instance          The instance.\n * @param  {Object}               options           Specify methods to include or exlude.\n * @param  {Array<String|RegExp>} [options.include] Methods to include.\n * @param  {Array<String|RegExp>} [options.exclude] Methods to exclude.\n * @return {Object}                                 The instance.\n */\nexport default function autoBind(instance, options) {\n  const { exclude, include } = options || {};\n  const filter = (key) => {\n    const match = (pattern) => (typeof pattern === 'string' ? key === pattern : pattern.test(key));\n\n    if (include) {\n      return include.some(match);\n    }\n\n    if (exclude) {\n      return !exclude.some(match);\n    }\n\n    return true;\n  };\n\n  getAllProperties(instance)\n    .filter(([key]) => key !== 'constructor' && filter(key))\n    .forEach(([key, object]) => {\n      const descriptor = Object.getOwnPropertyDescriptor(object, key);\n      if (descriptor && typeof descriptor.value === 'function') {\n        instance[key] = instance[key].bind(instance);\n      }\n    });\n\n  return instance;\n}\n","/* eslint no-underscore-dangle: [\"error\", { \"allow\": [\"_events\"] }] */\n/**\n * Event management class.\n */\nexport default class EventManager {\n  /** @type {{[eventName:string]: Array<Function>}} An object to store the events */\n  _events = {};\n\n  /**\n   * Bind a listener function to an event.\n   *\n   * @param  {String}   event    Name of the event.\n   * @param  {Function} listener Function to be called.\n   * @return {Function}          A function to unbind the listener.\n   */\n  $on(event, listener) {\n    if (!Array.isArray(this._events[event])) {\n      this._events[event] = [];\n    }\n    this._events[event].push(listener);\n\n    return () => {\n      this.$off(event, listener);\n    };\n  }\n\n  /**\n   * Unbind a listener function from an event.\n   *\n   * @param  {String}       event    Name of the event.\n   * @param  {Function}     listener Function to be removed.\n   * @return {EventManager}          The current instance.\n   */\n  $off(event, listener) {\n    // If no event specified, we remove them all.\n    if (!event) {\n      this._events = {};\n      return this;\n    }\n    // If no listener have been specified, we remove all\n    // the listeners for the given event.\n    if (!listener) {\n      this._events[event] = [];\n      return this;\n    }\n\n    const index = this._events[event].indexOf(listener);\n\n    if (index > -1) {\n      this._events[event].splice(index, 1);\n    }\n\n    return this;\n  }\n\n  /**\n   * Emits an event.\n   *\n   * @param  {String}       event Name of the event.\n   * @param  {Array}        args  The arguments to apply to the functions bound to this event.\n   * @return {EventManager}       The current instance.\n   */\n  $emit(event, ...args) {\n    if (!Array.isArray(this._events[event])) {\n      return this;\n    }\n\n    this._events[event].forEach((listener) => {\n      listener.apply(this, args);\n    });\n    return this;\n  }\n\n  /**\n   * Bind a listener function to an event for one execution only.\n   *\n   * @param  {String}       event    Name of the event.\n   * @param  {Function}     listener Function to be called.\n   * @return {EventManager}          The current instance.\n   */\n  $once(event, listener) {\n    const instance = this;\n    this.$on(\n      event,\n      /**\n       * @param {...any} args\n       */\n      function handler(...args) {\n        instance.$off(event, handler);\n        listener.apply(instance, args);\n      }\n    );\n    return this;\n  }\n}\n","/**\n * @typedef {import('./index').default} Base\n * @typedef {import('./index').BaseConfig} BaseConfig\n */\n\n/**\n * Get the config from a Base instance, either the new static one or the old getter one.\n *\n * @param  {Base}       instance The instance to get the config from.\n * @return {BaseConfig}         A Base class configuration object.\n */\nexport function getConfig(instance) {\n  // @ts-ignore\n  const config = instance.constructor.config || instance.config;\n\n  if (!config) {\n    throw new Error('The `config` property must be defined.');\n  }\n\n  if (!config.name) {\n    throw new Error('The `config.name` property is required.');\n  }\n\n  // @ts-ignore\n  if (instance.config && !instance.constructor.config) {\n    console.warn(\n      `[${config.name}]`,\n      'Defining the `config` as a getter is deprecated, replace it with a static property.'\n    );\n  }\n\n  return config;\n}\n\n/**\n * Display a console warning for the given instance.\n *\n * @param {Base}      instance A Base instance.\n * @param {...String} msg   Values to display in the console.\n */\nexport function warn(instance, ...msg) {\n  const { name } = getConfig(instance);\n  console.warn(`[${name}]`, ...msg);\n}\n\n/**\n * Display a console log for the given instance.\n *\n * @param {Base}   instance The instance to log information from.\n * @param {...any} msg      The data to print to the console.\n */\nexport function log(instance, ...msg) {\n  const { name } = getConfig(instance);\n  console.log(`[${name}]`, ...msg);\n}\n\n/**\n * Verbose debug for the component.\n *\n * @param {Base}   instance The instance to debug.\n * @param {...any} args     The data to print.\n */\nexport function debug(instance, ...args) {\n  if (instance.$options.debug) {\n    log(instance, ...args);\n  }\n}\n\n/**\n * Test if an object has a method.\n *\n * @param  {Object}  obj  The object to test\n * @param  {String}  name The method's name\n * @return {Boolean}\n */\nexport function hasMethod(obj, name) {\n  return typeof obj[name] === 'function';\n}\n\n/**\n * Call the given method while applying the given arguments.\n *\n * @param {Base}   instance The Base instance on which to trigger the method.\n * @param {String} method   The method to call.\n * @param {...any} args     The arguments to pass to the method.\n */\nexport function callMethod(instance, method, ...args) {\n  debug(instance, 'callMethod', method, ...args);\n\n  // Prevent duplicate call of `mounted` and `destroyed`\n  // methods based on the component status\n  if (\n    (method === 'destroyed' && !instance.$isMounted) ||\n    (method === 'mounted' && instance.$isMounted)\n  ) {\n    debug(instance, 'not', method, 'because the method has already been triggered once.');\n    return instance;\n  }\n\n  instance.$emit(method, ...args);\n\n  // We always emit an event, but we do not call the method if it does not exist\n  if (!hasMethod(instance, method)) {\n    return instance;\n  }\n\n  instance[method].call(instance, ...args);\n  debug(instance, method, instance, ...args);\n\n  return instance;\n}\n","/**\n * @typedef {import('./index.js').default} Base\n * @typedef {import('./index.js').BaseComponent} BaseComponent\n * @typedef {import('./index.js').BaseAsyncComponent} BaseAsyncComponent\n * @typedef {import('./index.js').BaseHTMLElement} BaseHTMLElement\n * @typedef {import('./index.js').BaseConfigComponents} BaseConfigComponents\n */\n\n/**\n * Get a child component.\n *\n * @param  {BaseHTMLElement}                  el             The root element of the child component.\n * @param  {BaseComponent|BaseAsyncComponent} ComponentClass A Base class or a Promise for async components.\n * @param  {Base}                             parent         The parent component instance.\n * @return {Base|Promise|'terminated'}                       A Base instance or a Promise resolving to a Base instance.\n */\nfunction getChild(el, ComponentClass, parent) {\n  // Return existing instance if it exists\n  if (el.__base__) {\n    return el.__base__;\n  }\n\n  // Return a new instance if the component class is a child of the Base class\n  if ('$isBase' in ComponentClass) {\n    const child = new ComponentClass(el);\n    Object.defineProperty(child, '$parent', { get: () => parent });\n    return child;\n  }\n\n  // Resolve async components\n  return ComponentClass().then((module) => {\n    // @ts-ignore\n    return getChild(el, module.default ?? module, parent);\n  });\n}\n\n/**\n * Get a list of elements based on the name of a component.\n * @param  {String}                   nameOrSelector The name or selector to used for this component.\n * @param  {BaseHTMLElement|Document} element        The root element on which to query the selector, defaults to `document`.\n * @return {Array<HTMLElement>}                      A list of elements on which the component should be mounted.\n */\nexport function getComponentElements(nameOrSelector, element = document) {\n  const selector = `[data-component=\"${nameOrSelector}\"]`;\n  let elements = [];\n\n  try {\n    elements = Array.from(element.querySelectorAll(selector));\n    // eslint-disable-next-line no-empty\n  } catch {}\n\n  // If no child component found with the default selector, try a classic DOM selector\n  if (elements.length === 0) {\n    elements = Array.from(element.querySelectorAll(nameOrSelector));\n  }\n\n  return elements;\n}\n\n/**\n * Get child components.\n * @param  {Base}                 instance   The component's instance.\n * @param  {BaseHTMLElement}      element    The component's root element\n * @param  {BaseConfigComponents} components The children components' classes\n * @return {null|Object}                     Returns `null` if no child components are defined or an object of all child component instances\n */\nexport function getChildren(instance, element, components) {\n  const children = Object.entries(components).reduce((acc, [name, ComponentClass]) => {\n    const elements = getComponentElements(name, element);\n\n    if (elements.length === 0) {\n      return acc;\n    }\n\n    acc[name] = elements\n      .map((el) => getChild(el, ComponentClass, instance))\n      // Filter out terminated children\n      // @ts-ignore\n      .filter((el) => el !== 'terminated');\n\n    if (acc[name].length === 0) {\n      delete acc[name];\n    }\n\n    return acc;\n  }, {});\n\n  instance.$emit('get:children', children);\n  return children;\n}\n\nexport default {\n  getChildren,\n};\n","'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn target.propertyIsEnumerable(symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n","/**\n * Source: ftp://ftp.unicode.org/Public/UCD/latest/ucd/SpecialCasing.txt\n */\nvar SUPPORTED_LOCALE = {\n    tr: {\n        regexp: /\\u0130|\\u0049|\\u0049\\u0307/g,\n        map: {\n            İ: \"\\u0069\",\n            I: \"\\u0131\",\n            İ: \"\\u0069\",\n        },\n    },\n    az: {\n        regexp: /\\u0130/g,\n        map: {\n            İ: \"\\u0069\",\n            I: \"\\u0131\",\n            İ: \"\\u0069\",\n        },\n    },\n    lt: {\n        regexp: /\\u0049|\\u004A|\\u012E|\\u00CC|\\u00CD|\\u0128/g,\n        map: {\n            I: \"\\u0069\\u0307\",\n            J: \"\\u006A\\u0307\",\n            Į: \"\\u012F\\u0307\",\n            Ì: \"\\u0069\\u0307\\u0300\",\n            Í: \"\\u0069\\u0307\\u0301\",\n            Ĩ: \"\\u0069\\u0307\\u0303\",\n        },\n    },\n};\n/**\n * Localized lower case.\n */\nexport function localeLowerCase(str, locale) {\n    var lang = SUPPORTED_LOCALE[locale.toLowerCase()];\n    if (lang)\n        return lowerCase(str.replace(lang.regexp, function (m) { return lang.map[m]; }));\n    return lowerCase(str);\n}\n/**\n * Lower case as a function.\n */\nexport function lowerCase(str) {\n    return str.toLowerCase();\n}\n//# sourceMappingURL=index.js.map","import { lowerCase } from \"lower-case\";\n// Support camel case (\"camelCase\" -> \"camel Case\" and \"CAMELCase\" -> \"CAMEL Case\").\nvar DEFAULT_SPLIT_REGEXP = [/([a-z0-9])([A-Z])/g, /([A-Z])([A-Z][a-z])/g];\n// Remove all non-word characters.\nvar DEFAULT_STRIP_REGEXP = /[^A-Z0-9]+/gi;\n/**\n * Normalize the string into something other libraries can manipulate easier.\n */\nexport function noCase(input, options) {\n    if (options === void 0) { options = {}; }\n    var _a = options.splitRegexp, splitRegexp = _a === void 0 ? DEFAULT_SPLIT_REGEXP : _a, _b = options.stripRegexp, stripRegexp = _b === void 0 ? DEFAULT_STRIP_REGEXP : _b, _c = options.transform, transform = _c === void 0 ? lowerCase : _c, _d = options.delimiter, delimiter = _d === void 0 ? \" \" : _d;\n    var result = replace(replace(input, splitRegexp, \"$1\\0$2\"), stripRegexp, \"\\0\");\n    var start = 0;\n    var end = result.length;\n    // Trim the delimiter from around the output string.\n    while (result.charAt(start) === \"\\0\")\n        start++;\n    while (result.charAt(end - 1) === \"\\0\")\n        end--;\n    // Transform each token independently.\n    return result.slice(start, end).split(\"\\0\").map(transform).join(delimiter);\n}\n/**\n * Replace `re` in the input string with the replacement value.\n */\nfunction replace(input, re, value) {\n    if (re instanceof RegExp)\n        return input.replace(re, value);\n    return re.reduce(function (input, re) { return input.replace(re, value); }, input);\n}\n//# sourceMappingURL=index.js.map","/**\n * Test if the given value is an object.\n *\n * @param  {*}       value The value to test.\n * @return {Boolean}       Whether or not the value is an object.\n */\nexport default function isObject(value) {\n  return typeof value === 'object' && !!value && value.toString() === '[object Object]';\n}\n","import deepmerge from 'deepmerge';\nimport { noCase } from 'no-case';\nimport isObject from '../../../utils/object/isObject';\n\n/**\n * @typedef {StringConstructor|NumberConstructor|BooleanConstructor|ArrayConstructor|ObjectConstructor} OptionType\n * @typedef {{ [name:string]: OptionType | { type: OptionType, default: String|Number|Boolean|(() => Array|Object)} }} OptionsSchema\n */\n\n/**\n * Get the attribute name based on the given option name.\n * @param {String} name The option name.\n */\nfunction getAttributeName(name) {\n  return `data-option-${noCase(name, { delimiter: '-' })}`;\n}\n\n/**\n * Class options to manage options as data attributes on an HTML element.\n */\nexport default class Options {\n  /** @type {HTMLElement} The HTML element holding the options attributes. */\n  #element;\n\n  /** @type {Object} An object to store Array and Object values for reference. */\n  #values = {};\n\n  /** @type {Array} List of allowed types. */\n  static types = [String, Number, Boolean, Array, Object];\n\n  /**\n   * The default values to return for each available type.\n   * @type {Object}\n   */\n  #defaultValues = {\n    String: '',\n    Number: 0,\n    Boolean: false,\n    Array: () => [],\n    Object: () => ({}),\n  };\n\n  /**\n   * Class constructor.\n   *\n   * @param {HTMLElement}   element The HTML element storing the options.\n   * @param {OptionsSchema} schema  A Base class config.\n   */\n  constructor(element, schema) {\n    this.#element = element;\n\n    Object.entries(schema).forEach(([name, config]) => {\n      const isObjectConfig = !Options.types.includes(config);\n      /** @type {OptionType} */\n      // @ts-ignore\n      const type = isObjectConfig ? config.type : config;\n\n      if (!Options.types.includes(type)) {\n        throw new Error(\n          `The \"${name}\" option has an invalid type. The allowed types are: String, Number, Boolean, Array and Object.`\n        );\n      }\n\n      // @ts-ignore\n      const defaultValue = isObjectConfig ? config.default : this.#defaultValues[type.name];\n\n      if ((type === Array || type === Object) && typeof defaultValue !== 'function') {\n        throw new Error(\n          `The default value for options of type \"${type.name}\" must be returned by a function.`\n        );\n      }\n\n      Object.defineProperty(this, name, {\n        get() {\n          return this.get(name, type, defaultValue);\n        },\n        set(value) {\n          this.set(name, type, value);\n        },\n        enumerable: true,\n      });\n    });\n\n    return this;\n  }\n\n  /**\n   * Get an option value.\n   *\n   * @param {String} name The option name.\n   * @param {ArrayConstructor|ObjectConstructor|StringConstructor|NumberConstructor|BooleanConstructor} type The option data's type.\n   * @param {any} defaultValue The default value for this option.\n   */\n  get(name, type, defaultValue) {\n    const attributeName = getAttributeName(name);\n    const hasAttribute = this.#element.hasAttribute(attributeName);\n\n    if (type === Boolean) {\n      if (!hasAttribute && defaultValue) {\n        this.#element.setAttribute(attributeName, '');\n      }\n      return hasAttribute || defaultValue;\n    }\n\n    const value = this.#element.getAttribute(attributeName);\n\n    if (type === Number) {\n      return hasAttribute ? Number(value) : defaultValue;\n    }\n\n    if (type === Array || type === Object) {\n      const val = deepmerge(\n        defaultValue(),\n        hasAttribute ? JSON.parse(value) : this.#defaultValues[type.name]()\n      );\n\n      if (!this.#values[name]) {\n        this.#values[name] = val;\n      } else if (val !== this.#values[name]) {\n        // When getting the value, wait for the next loop to update the data attribute\n        // with the new value. This is a simple trick to avoid using a Proxy to watch\n        // for any deep changes on an array or object. It should not break anything as\n        // the original value is read once from the data attribute and is then read from\n        // the private property `#values`.\n        setTimeout(() => {\n          this.#element.setAttribute(attributeName, JSON.stringify(this.#values[name]));\n        }, 0);\n      }\n\n      return this.#values[name];\n    }\n\n    return hasAttribute ? value : defaultValue;\n  }\n\n  /**\n   * Set an option value.\n   *\n   * @param {String} name The option name.\n   * @param {ArrayConstructor|ObjectConstructor|StringConstructor|NumberConstructor|BooleanConstructor} type The option data's type.\n   * @param {any} value The new value for this option.\n   */\n  set(name, type, value) {\n    const attributeName = getAttributeName(name);\n\n    if (value.constructor.name !== type.name) {\n      const val = Array.isArray(value) || isObject(value) ? JSON.stringify(value) : value;\n      throw new TypeError(\n        `The \"${val}\" value for the \"${name}\" option must be of type \"${type.name}\"`\n      );\n    }\n\n    switch (type) {\n      case Boolean:\n        if (value) {\n          this.#element.setAttribute(attributeName, '');\n        } else {\n          this.#element.removeAttribute(attributeName);\n        }\n        break;\n      case Array:\n      case Object:\n        this.#values[name] = value;\n        this.#element.setAttribute(attributeName, JSON.stringify(value));\n        break;\n      default:\n        this.#element.setAttribute(attributeName, value);\n    }\n  }\n}\n","import Options from './classes/Options';\nimport { warn } from './utils';\n\n/**\n * @typedef {import('./index').default} Base\n */\n\n/**\n * Get a component's options.\n *\n * @param  {Base}        instance The component's instance.\n * @param  {HTMLElement} element  The component's root element.\n * @param  {Object}      config   The component's default config.\n * @return {Object}               The component's merged options.\n */\nexport function getOptions(instance, element, config) {\n  let schema = { ...(config.options || {}) };\n\n  /** @type {Base|false} Merge inherited options. */\n  let prototype = instance;\n  while (prototype) {\n    const getterConfig = prototype.config;\n    // @ts-ignore\n    const staticConfig = prototype.constructor.config;\n    if (getterConfig || staticConfig) {\n      schema = Object.assign(\n        (getterConfig || {}).options || {},\n        (staticConfig || {}).options || {},\n        schema\n      );\n      prototype = Object.getPrototypeOf(prototype);\n    } else {\n      prototype = false;\n    }\n  }\n\n  // Add legacy options from the config\n  const propsToInclude = [\n    { name: 'log', type: Boolean },\n    { name: 'debug', type: Boolean },\n    { name: 'name', type: String },\n  ];\n\n  propsToInclude.forEach((prop) => {\n    schema[prop.name] = { type: prop.type, default: prop.type(config[prop.name]) };\n  });\n\n  // Add legacy options to the schema\n  const propsToExclude = ['name', 'log', 'debug', 'components', 'refs', 'options'];\n  Object.keys(config).forEach((propName) => {\n    if (propsToExclude.includes(propName)) {\n      return;\n    }\n\n    const value = config[propName];\n    let type = value === null || value === undefined ? Object : value.constructor;\n\n    // Default to object type as it should work for any values.\n    if (!Options.types.includes(type)) {\n      type = Object;\n    }\n\n    warn(\n      instance,\n      '\\n  Options must be defined in the `config.options` property.',\n      `\\n  Consider moving the \\`config.${propName}\\` option to \\`config.options.${propName}\\`.`,\n    );\n\n    if (type === Array || type === Object) {\n      schema[propName] = { type, default: () => value };\n    } else {\n      schema[propName] = { type, default: value };\n    }\n  });\n\n  const options = new Options(element, schema);\n\n  // Update legacy options with value from the `data-options` attribute\n  let legacyOptions = {};\n  if (element.dataset.options) {\n    warn(\n      instance,\n      'The `data-options` attribute usage is deprecated, use multiple `data-option-...` attributes instead.'\n    );\n    try {\n      legacyOptions = JSON.parse(element.dataset.options);\n    } catch (err) {\n      throw new Error('Can not parse the `data-options` attribute. Is it a valid JSON string?');\n    }\n  }\n\n  Object.entries(legacyOptions).forEach(([optionName, optionValue]) => {\n    options[optionName] = optionValue;\n  });\n\n  instance.$emit('get:options', options);\n\n  return options;\n}\n\nexport default {\n  getOptions,\n};\n","import { getConfig, warn } from './utils';\n\n/**\n * @typedef {import('./index').default} Base\n */\n\n/**\n * A ponyfill for the CSS `:scope` selector which is not supported in IE11.\n * The following method will return an array of elements similare to the\n * `:scope ${selector}` selector.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/:scope\n * @see https://github.com/jonathantneal/element-qsa-scope\n *\n * @param  {HTMLElement} element  The element from which the scope is taken.\n * @param  {String}      selector The children selector.\n * @param  {String}      uniqId   A uniq ID to prefix the selector with.\n * @return {Array}                A list of elements.\n */\nexport function scopeSelectorPonyfill(element, selector, uniqId) {\n  let list = [];\n\n  try {\n    list = Array.from(element.querySelectorAll(`:scope ${selector}`));\n  } catch (err) {\n    const attr = `data-uniq-id`;\n    const scopedSelector = `[${attr}=\"${uniqId}\"] ${selector}`;\n    element.setAttribute(attr, uniqId);\n    list = Array.from(element.querySelectorAll(scopedSelector));\n    element.removeAttribute(attr);\n  }\n\n  return list;\n}\n\n/**\n * Get all refs of a component.\n *\n * @param  {Base}        instance The component's instance.\n * @param  {HTMLElement} element  The component's root element.\n * @return {Object}               Return an object containing all the component's refs.\n */\nexport function getRefs(instance, element) {\n  const definedRefs = getConfig(instance).refs || [];\n  /** @type {Array<HTMLElement>} */\n  const allRefs = Array.from(element.querySelectorAll(`[data-ref]`));\n  const childrenRefs = scopeSelectorPonyfill(element, '[data-component] [data-ref]', instance.$id);\n  const elements = allRefs.filter((ref) => !childrenRefs.includes(ref));\n\n  const refs = elements.reduce(\n    /**\n     * @param {Object} $refs\n     * @param {HTMLElement & {__base__?: Base}} $ref\n     */\n    ($refs, $ref) => {\n      let refName = $ref.dataset.ref;\n\n      if (!definedRefs.includes(refName)) {\n        warn(\n          instance,\n          `The \"${refName}\" ref is not defined in the class configuration.`,\n          'Did you forgot to define it?'\n        );\n      }\n\n      const $realRef = $ref.__base__ ? $ref.__base__ : $ref;\n\n      if (refName.endsWith('[]')) {\n        refName = refName.replace(/\\[\\]$/, '');\n\n        if (!$refs[refName]) {\n          $refs[refName] = [];\n        }\n      }\n\n      if ($refs[refName]) {\n        if (Array.isArray($refs[refName])) {\n          $refs[refName].push($realRef);\n        } else {\n          $refs[refName] = [$refs[refName], $realRef];\n          warn(\n            instance,\n            `The \"${refName}\" ref has been found multiple times.`,\n            'Did you forgot to add the `[]` suffix to its name?'\n          );\n        }\n      } else {\n        $refs[refName] = $realRef;\n      }\n\n      return $refs;\n    },\n    {}\n  );\n\n  instance.$emit('get:refs', refs);\n  return refs;\n}\n\nexport default {\n  getRefs,\n};\n","import { debug } from './utils';\n\n/**\n * @typedef {import('./index.js').default} Base\n */\n\n/**\n * Mount a given component which might be async.\n *\n * @param  {Base|Promise} component The component to mount.\n * @return {void}\n */\nfunction mountComponent(component) {\n  if (component instanceof Promise) {\n    component.then((instance) => instance.$mount());\n  } else {\n    component.$mount();\n  }\n}\n\n/**\n * Mount children components of a given instance.\n *\n * @param  {Base} instance The parent component's instance.\n * @return {void}\n */\nexport function mountComponents(instance) {\n  if (!instance.$children) {\n    return;\n  }\n\n  debug(instance, 'mountComponents', instance.$children);\n\n  Object.values(instance.$children).forEach(($child) => {\n    $child.forEach(mountComponent);\n  });\n}\n\n/**\n * Destroy a given component which might be async.\n *\n * @param  {Base|Promise} component The component to destroy.\n * @return {void}\n */\nfunction destroyComponent(component) {\n  if (component instanceof Promise) {\n    component.then((instance) => instance.$destroy());\n  } else {\n    component.$destroy();\n  }\n}\n\n/**\n * Destroy children components of a given instance.\n *\n * @param  {Base} instance The parent component's instance.\n * @return {void}\n */\nexport function destroyComponents(instance) {\n  if (!instance.$children) {\n    return;\n  }\n  debug(instance, 'destroyComponents', instance.$children);\n\n  Object.values(instance.$children).forEach(($child) => {\n    $child.forEach(destroyComponent);\n  });\n}\n","/**\n * Service abstract class\n */\nexport default class Service {\n  /**\n   * Class constructor, used to test the abstract class implementation.\n   */\n  constructor() {\n    this.callbacks = new Map();\n    this.isInit = false;\n  }\n\n  /**\n   * Getter to get the services properties.\n   * This getter MUST be implementer by the service extending this class.\n   * @return {Object}\n   */\n  get props() {\n    throw new Error('The `props` getter must be implemented.');\n  }\n\n  /**\n   * Method to initialize the service behaviors.\n   * This method MUST be implemented by the service extending this class.\n   *\n   * @return {Service} The current instance\n   */\n  init() {\n    throw new Error('The `init` method must be implemented.');\n  }\n\n  /**\n   * Method to kill the service behaviors.\n   * This method MUST be implemented by the service extending this class.\n   *\n   * @return {Service} The current instance\n   */\n  kill() {\n    throw new Error('The `kill` method must be implemented.');\n  }\n\n  /**\n   * Add a callback.\n   *\n   * @param  {String}   key      The callback's identifier\n   * @param  {Function} callback The callback function\n   * @return {InstanceType<typeof Service>} The current instance\n   */\n  add(key, callback) {\n    if (this.has(key)) {\n      throw new Error(`A callback with the key \\`${key}\\` has already been registered.`);\n    }\n\n    // Initialize the service when we add the first callback\n    if (this.callbacks.size === 0 && !this.isInit) {\n      this.init();\n      this.isInit = true;\n    }\n\n    this.callbacks.set(key, callback);\n    return this;\n  }\n\n  /**\n   * Test if a callback with the given key has already been added.\n   *\n   * @param  {String}  key The identifier to test\n   * @return {Boolean}     Whether or not the identifier already exists\n   */\n  has(key) {\n    return this.callbacks.has(key);\n  }\n\n  /**\n   * Get the callback tied to the given key.\n   *\n   * @param  {String}   key The identifier to get\n   * @return {Function}     The callback function\n   */\n  get(key) {\n    return this.callbacks.get(key);\n  }\n\n  /**\n   * Remove the callback tied to the given key.\n   *\n   * @param  {String} key The identifier to remove\n   * @return {Service}    The current instance\n   */\n  remove(key) {\n    this.callbacks.delete(key);\n\n    // Kill the service when we remove the last callback\n    if (this.callbacks.size === 0 && this.isInit) {\n      this.kill();\n      this.isInit = false;\n    }\n\n    return this;\n  }\n\n  /**\n   * Trigger each added callback with the given arguments.\n   *\n   * @param  {Array}   args All the arguments to apply to the callback\n   * @return {Service}      The current instance\n   */\n  trigger(...args) {\n    this.callbacks.forEach((callback) => {\n      callback(...args);\n    });\n\n    return this;\n  }\n}\n","/**\n * Simple throttling helper that limits a\n * function to only run once every {delay}ms\n *\n * @param {Function} fn    The function to throttle\n * @param {Number}   delay The delay in ms\n */\nexport default function throttle(fn, delay = 16) {\n  let lastCall = 0;\n  return (...args) => {\n    const now = new Date().getTime();\n    if (now - lastCall < delay) {\n      return false;\n    }\n    lastCall = now;\n    return fn(...args);\n  };\n}\n","/**\n * Returns a function, that, as long as it continues to be invoked,\n * will not be triggered. The function will be called after it stops\n * being called for N milliseconds.\n *\n * @param {Function} fn    The function to call\n * @param {Number}   delay The delay in ms to wait before calling the function\n */\nexport default function debounce(fn, delay = 300) {\n  let timeout;\n  return (...args) => {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => {\n      fn(...args);\n    }, delay);\n  };\n}\n","/**\n * RequestAnimation frame polyfill.\n * @see  https://github.com/vuejs/vue/blob/ec78fc8b6d03e59da669be1adf4b4b5abf670a34/dist/vue.runtime.esm.js#L7355\n * @type {Function}\n */\nexport const getRaf = () =>\n  typeof window !== 'undefined' && window.requestAnimationFrame\n    ? window.requestAnimationFrame.bind(window)\n    : setTimeout;\n\n/**\n * Execute a callback in the next frame.\n * @param  {Function} fn The callback function to execute.\n * @return {Promise}\n */\nexport default function nextFrame(fn = () => {}) {\n  const raf = getRaf();\n  return new Promise((resolve) => {\n    raf(() => raf(() => resolve(fn())));\n  });\n}\n","import Service from '../abstracts/Service';\nimport { getRaf } from '../utils/nextFrame';\n\n/**\n * Tick service\n *\n * ```\n * import { useRaf } from '@studiometa/js/services';\n * const { add, remove, props } = useRag();\n * add(id, (props) => {});\n * remove(id);\n * props();\n * ```\n */\nclass Raf extends Service {\n  /** @type {Boolean} Whether the loop is running or not. */\n  isTicking = false;\n\n  /**\n   * Start the requestAnimationFrame loop.\n   *\n   * @return {Raf}\n   */\n  init() {\n    const raf = getRaf();\n\n    const loop = () => {\n      this.trigger(this.props);\n\n      if (!this.isTicking) {\n        return;\n      }\n\n      raf(loop);\n    };\n\n    this.isTicking = true;\n    loop();\n    return this;\n  }\n\n  /**\n   * Stop the requestAnimationFrame loop.\n   *\n   * @return {Raf}\n   */\n  kill() {\n    this.isTicking = false;\n    return this;\n  }\n\n  /**\n   * Get raf props.\n   *\n   * @todo Return elapsed time / index?\n   * @type {Object}\n   */\n  get props() {\n    return {\n      time: window.performance.now(),\n    };\n  }\n}\n\nlet instance = null;\n\nexport default () => {\n  if (!instance) {\n    instance = new Raf();\n  }\n\n  const add = instance.add.bind(instance);\n  const remove = instance.remove.bind(instance);\n  const has = instance.has.bind(instance);\n  const props = () => instance.props;\n\n  return {\n    add,\n    remove,\n    has,\n    props,\n  };\n};\n","import Service from '../abstracts/Service';\nimport throttle from '../utils/throttle';\nimport debounce from '../utils/debounce';\nimport useRaf from './raf';\n\n/**\n * Test if an event is an instance of TouchEvent.\n *\n * @param {TouchEvent|MouseEvent} event The event instance to test.\n * @return {Boolean}                    Is it a TouchEvent?\n */\nfunction isTouchEvent(event) {\n  return typeof TouchEvent !== 'undefined' && event instanceof TouchEvent;\n}\n\n/**\n * Pointer service\n *\n * ```\n * import { usePointer } from '@studiometa/js/services';\n * const { add, remove, props } = usePointer();\n * add(key, (props) => {});\n * remove(key);\n * props();\n * ```\n */\nclass Pointer extends Service {\n  /** @type {Boolean} State of the pointer. */\n  isDown = false;\n\n  /** @type {Number} The y pointer position. */\n  y = window.innerHeight / 2;\n\n  /** @type {Number} The y previous pointer position. */\n  yLast = window.innerHeight / 2;\n\n  /** @type {Number} The x pointer position. */\n  x = window.innerWidth / 2;\n\n  /** @type {Number} The x previous pointer position. */\n  xLast = window.innerWidth / 2;\n\n  /** @type {MouseEvent|TouchEvent} The latest event emitted from the pointer. */\n  event;\n\n  /**\n   * Bind the handler to the mousemove and touchmove events.\n   * Bind the up and down handler to the mousedown, mouseup, touchstart and touchend events.\n   *\n   * @return {Pointer}\n   */\n  init() {\n    const { add, remove } = useRaf();\n    this.hasRaf = false;\n\n    const debounced = debounce((event) => {\n      this.updateValues(event);\n      remove('usePointer');\n      this.trigger(this.props);\n      this.hasRaf = false;\n    }, 50);\n\n    this.handler = throttle((event) => {\n      this.updateValues(event);\n      if (!this.hasRaf) {\n        add('usePointer', () => {\n          this.trigger(this.props);\n        });\n        this.hasRaf = true;\n      }\n      // Reset changed flags at the end of the mousemove or touchmove event\n      debounced(event);\n    }, 32).bind(this);\n\n    this.downHandler = this.downHandler.bind(this);\n    this.upHandler = this.upHandler.bind(this);\n\n    document.documentElement.addEventListener('mouseenter', this.handler, { once: true });\n    document.addEventListener('mousemove', this.handler, { passive: true });\n    document.addEventListener('touchmove', this.handler, { passive: true });\n    document.addEventListener('mousedown', this.downHandler, { passive: true });\n    document.addEventListener('touchstart', this.downHandler, { passive: true });\n    document.addEventListener('mouseup', this.upHandler, { passive: true });\n    document.addEventListener('touchend', this.upHandler, { passive: true });\n    return this;\n  }\n\n  /**\n   * Unbind all handlers from their bounded event.\n   *\n   * @return {Pointer}\n   */\n  kill() {\n    document.removeEventListener('mousemove', this.handler);\n    document.removeEventListener('touchmove', this.handler);\n    document.removeEventListener('mousedown', this.downHandler);\n    document.removeEventListener('touchstart', this.downHandler);\n    document.removeEventListener('mouseup', this.upHandler);\n    document.removeEventListener('touchend', this.upHandler);\n    return this;\n  }\n\n  /**\n   * Handler for the pointer's down action.\n   *\n   * @return {void}\n   */\n  downHandler() {\n    this.isDown = true;\n    this.trigger(this.props);\n  }\n\n  /**\n   * Handler for the pointer's up action.\n   *\n   * @return {void}\n   */\n  upHandler() {\n    this.isDown = false;\n    this.trigger(this.props);\n  }\n\n  /**\n   * Update the pointer positions.\n   *\n   * @param  {MouseEvent|TouchEvent} event The event object.\n   * @return {void}\n   */\n  updateValues(event) {\n    this.event = event;\n    this.yLast = this.y;\n    this.xLast = this.x;\n\n    // Check pointer Y\n    // We either get data from a touch event `event.touches[0].clientY` or from\n    // a mouse event `event.clientY`.\n    const y = isTouchEvent(event)\n      ? /** @type {TouchEvent} */ (event).touches[0]?.clientY\n      : /** @type {MouseEvent} */ (event).clientY;\n    if (y !== this.y) {\n      this.y = y;\n    }\n\n    // Check pointer X\n    // We either get data from a touch event `event.touches[0].clientX` or from\n    // a mouse event `event.clientX`.\n    const x = isTouchEvent(event)\n      ? /** @type {TouchEvent} */ (event).touches[0]?.clientX\n      : /** @type {MouseEvent} */ (event).clientX;\n    if (x !== this.x) {\n      this.x = x;\n    }\n  }\n\n  /**\n   * Get the pointer props.\n   *\n   * @type {Object}\n   */\n  get props() {\n    return {\n      event: this.event,\n      isDown: this.isDown,\n      x: this.x,\n      y: this.y,\n      changed: {\n        x: this.x !== this.xLast,\n        y: this.y !== this.yLast,\n      },\n      last: {\n        x: this.xLast,\n        y: this.yLast,\n      },\n      delta: {\n        x: this.x - this.xLast,\n        y: this.y - this.yLast,\n      },\n      progress: {\n        x: this.x / window.innerWidth,\n        y: this.y / window.innerHeight,\n      },\n      max: {\n        x: window.innerWidth,\n        y: window.innerHeight,\n      },\n    };\n  }\n}\n\nlet pointer = null;\n\n/**\n * Use the pointer.\n *\n * ```js\n * import usePointer from '@studiometa/js-toolkit/services';\n * const { add, remove, props } = usePointer();\n * add('id', () => {});\n * remove('id');\n * props();\n * ```\n */\nexport default () => {\n  if (!pointer) {\n    pointer = new Pointer();\n  }\n\n  const add = pointer.add.bind(pointer);\n  const remove = pointer.remove.bind(pointer);\n  const has = pointer.has.bind(pointer);\n  const props = () => pointer.props;\n\n  return {\n    add,\n    remove,\n    has,\n    props,\n  };\n};\n","import Service from '../abstracts/Service';\nimport debounce from '../utils/debounce';\n\n/**\n * Resize service\n *\n * ```\n * import { useResize } from '@studiometa/js/services';\n * const { add, remove, props } = useResize();\n * add(key, (props) => {});\n * remove(key);\n * props();\n * ```\n */\nclass Resize extends Service {\n  /**\n   * Bind the handler to the resize event.\n   *\n   * @return {Resize}\n   */\n  init() {\n    this.handler = debounce(() => {\n      this.trigger(this.props);\n    }).bind(this);\n\n    if (this.canUseResizeObserver) {\n      // @ts-ignore\n      this.resizeObserver = new ResizeObserver(this.handler);\n      this.resizeObserver.observe(document.documentElement);\n    } else {\n      window.addEventListener('resize', this.handler);\n    }\n\n    return this;\n  }\n\n  /**\n   * Unbind the handler from the resize event.\n   *\n   * @return {Resize}\n   */\n  kill() {\n    if (this.canUseResizeObserver) {\n      this.resizeObserver.disconnect();\n    } else {\n      window.removeEventListener('resize', this.handler);\n    }\n    delete this.resizeObserver;\n\n    return this;\n  }\n\n  /**\n   * Get resize props.\n   *\n   * @type {Object}\n   */\n  get props() {\n    const props = {\n      width: window.innerWidth,\n      height: window.innerHeight,\n      ratio: window.innerWidth / window.innerHeight,\n      orientation: 'square',\n    };\n\n    if (props.ratio > 1) {\n      props.orientation = 'landscape';\n    }\n\n    if (props.ratio < 1) {\n      props.orientation = 'portrait';\n    }\n\n    if (this.breakpointElement) {\n      props.breakpoint = this.breakpoint;\n      props.breakpoints = this.breakpoints;\n    }\n\n    return props;\n  }\n\n  /**\n   * The element holding the breakpoints data.\n   * @return {HTMLElement}\n   */\n  get breakpointElement() {\n    return document.querySelector('[data-breakpoint]') || null;\n  }\n\n  /**\n   * Get the current breakpoint.\n   * @return {String}\n   */\n  get breakpoint() {\n    return window\n      .getComputedStyle(this.breakpointElement, '::before')\n      .getPropertyValue('content')\n      .replace(/\"/g, '');\n  }\n\n  /**\n   * Get all breakpoints.\n   * @return {Array}\n   */\n  get breakpoints() {\n    const breakpoints = window\n      .getComputedStyle(this.breakpointElement, '::after')\n      .getPropertyValue('content')\n      .replace(/\"/g, '');\n\n    return breakpoints.split(',');\n  }\n\n  /**\n   * Test if we can use the `ResizeObserver` API.\n   * @return {Boolean}\n   */\n  get canUseResizeObserver() {\n    // @ts-ignore\n    return typeof window.ResizeObserver !== 'undefined';\n  }\n}\n\nlet resize = null;\n\nexport default () => {\n  if (!resize) {\n    resize = new Resize();\n  }\n\n  const add = resize.add.bind(resize);\n  const remove = resize.remove.bind(resize);\n  const has = resize.has.bind(resize);\n  const props = () => resize.props;\n\n  return {\n    add,\n    remove,\n    has,\n    props,\n  };\n};\n","import Service from '../abstracts/Service';\nimport throttle from '../utils/throttle';\nimport debounce from '../utils/debounce';\nimport nextFrame from '../utils/nextFrame';\n\n/**\n * Scroll service\n *\n * ```\n * import { useScroll } from '@studiometa/js-toolkit/services';\n * const { add, remove, props } = useScroll();\n * add(key, (props) => {});\n * remove(key);\n * props();\n * ```\n */\nclass Scroll extends Service {\n  /** @type {Number} The y scroll position. */\n  y = window.pageYOffset;\n\n  /** @type {Number} The y previous scroll position. */\n  yLast = window.pageYOffset;\n\n  /** @type {Number} The x scroll position. */\n  x = window.pageXOffset;\n\n  /** @type {Number} The x previous scroll position. */\n  xLast = window.pageXOffset;\n\n  /**\n   * Bind the handler to the scroll event.\n   *\n   * @return {Scroll}\n   */\n  init() {\n    const debounced = debounce(() => {\n      this.trigger(this.props);\n      nextFrame(() => {\n        this.trigger(this.props);\n      });\n    }, 50);\n\n    this.handler = throttle(() => {\n      this.trigger(this.props);\n\n      // Reset changed flags at the end of the scroll event\n      debounced();\n    }, 32).bind(this);\n\n    // Fire the `scrolled` method on document scroll\n    document.addEventListener('scroll', this.handler, { passive: true });\n    return this;\n  }\n\n  /**\n   * Unbind the handler from the scroll event.\n   *\n   * @return {Scroll}\n   */\n  kill() {\n    document.removeEventListener('scroll', this.handler);\n    return this;\n  }\n\n  /**\n   * Get scroll props.\n   *\n   * @type {Object}\n   */\n  get props() {\n    this.yLast = this.y;\n    this.xLast = this.x;\n\n    // Check scroll Y\n    if (window.pageYOffset !== this.y) {\n      this.y = window.pageYOffset;\n    }\n\n    // Check scroll x\n    if (window.pageXOffset !== this.x) {\n      this.x = window.pageXOffset;\n    }\n\n    return {\n      x: this.x,\n      y: this.y,\n      changed: {\n        x: this.x !== this.xLast,\n        y: this.y !== this.yLast,\n      },\n      last: {\n        x: this.xLast,\n        y: this.yLast,\n      },\n      delta: {\n        x: this.x - this.xLast,\n        y: this.y - this.yLast,\n      },\n      progress: {\n        x: this.max.x === 0 ? 1 : this.x / this.max.x,\n        y: this.max.y === 0 ? 1 : this.y / this.max.y,\n      },\n      max: this.max,\n    };\n  }\n\n  /**\n   * Get scroll max values.\n   *\n   * @type {Object}\n   */\n  get max() {\n    return {\n      x: (document.scrollingElement || document.body).scrollWidth - window.innerWidth,\n      y: (document.scrollingElement || document.body).scrollHeight - window.innerHeight,\n    };\n  }\n}\n\nlet scroll = null;\n\nexport default () => {\n  if (!scroll) {\n    scroll = new Scroll();\n  }\n\n  const add = scroll.add.bind(scroll);\n  const remove = scroll.remove.bind(scroll);\n  const has = scroll.has.bind(scroll);\n  const props = () => scroll.props;\n\n  return {\n    add,\n    remove,\n    has,\n    props,\n  };\n};\n","export default {\n  ENTER: 13,\n  SPACE: 32,\n  TAB: 9,\n  ESC: 27,\n  LEFT: 37,\n  UP: 38,\n  RIGHT: 39,\n  DOWN: 40,\n};\n","import Service from '../abstracts/Service';\nimport keyCodes from '../utils/keyCodes';\n\n/**\n * Scroll service\n *\n * ```\n * import { useKey } from '@studiometa/js-toolkit/services';\n * const { add, remove, props } = useKey();\n * add(key, (props) => {});\n * remove(key);\n * props();\n * ```\n */\nclass Key extends Service {\n  /** @type {Object} The event object. */\n  event = {};\n\n  /**\n   * Used to accumulate the number of times the `keydown` event has been triggered.\n   * @type {Number}\n   */\n  triggered = 0;\n\n  /** @type {Object} The previous event object. */\n  previousEvent = {};\n\n  /**\n   * Bind the handler to the keyboard event.\n   *\n   * @return {Key}\n   */\n  init() {\n    this.handler = (event) => {\n      this.event = event;\n      this.trigger(this.props);\n    };\n    document.addEventListener('keydown', this.handler, { passive: false });\n    document.addEventListener('keyup', this.handler, { passive: false });\n    return this;\n  }\n\n  /**\n   * Unbind the handler from the keyboard event.\n   *\n   * @return {Key}\n   */\n  kill() {\n    document.removeEventListener('keydown', this.handler);\n    document.removeEventListener('keyup', this.handler);\n    return this;\n  }\n\n  /**\n   * Get keyboard props.\n   *\n   * @type {Object}\n   */\n  get props() {\n    const keys = Object.entries(keyCodes).reduce((acc, [name, code]) => {\n      acc[name] = code === this.event.keyCode;\n      return acc;\n    }, {});\n\n    if (!this.previousEvent.type) {\n      this.triggered = 0;\n    }\n\n    if (this.event.type === 'keydown' && this.previousEvent.type === 'keydown') {\n      this.triggered += 1;\n    } else {\n      this.triggered = 1;\n    }\n\n    this.previousEvent = this.event;\n\n    return {\n      event: this.event,\n      triggered: this.triggered,\n      direction: this.event.type === 'keydown' ? 'down' : 'up',\n      isUp: this.event.type === 'keyup',\n      isDown: this.event.type === 'keydown',\n      ...keys,\n    };\n  }\n}\n\nlet key = null;\n\nexport default () => {\n  if (!key) {\n    key = new Key();\n  }\n\n  const add = key.add.bind(key);\n  const remove = key.remove.bind(key);\n  const has = key.has.bind(key);\n  const props = () => key.props;\n\n  return {\n    add,\n    remove,\n    has,\n    props,\n  };\n};\n","import usePointer from '../../services/pointer';\nimport useRaf from '../../services/raf';\nimport useResize from '../../services/resize';\nimport useScroll from '../../services/scroll';\nimport useKey from '../../services/key';\nimport { hasMethod, callMethod } from './utils';\n\n/**\n * @typedef {import('./index').default} Base\n */\n\n/**\n * Init the given service and bind it to the given instance.\n *\n * @param  {Base}     instance The Base instance.\n * @param  {String}   method   The instance to test for binding\n * @param  {Function} service  The service `use...` function\n * @return {Function}          A function to unbind the service\n */\nfunction initService(instance, method, service) {\n  if (!hasMethod(instance, method)) {\n    return () => {};\n  }\n\n  const { add, remove } = service();\n  add(\n    instance.$id,\n    /**\n     * @param {any[]} args\n     */\n    (...args) => {\n      callMethod(instance, method, ...args);\n    }\n  );\n\n  return () => remove(instance.$id);\n}\n\n/**\n * Use the services.\n * @param  {Base} instance A Base class instance.\n * @return {Array}         A list of unbind methods.\n */\nexport default function bindServices(instance) {\n  const unbindMethods = [\n    initService(instance, 'scrolled', useScroll),\n    initService(instance, 'resized', useResize),\n    initService(instance, 'ticked', useRaf),\n    initService(instance, 'moved', usePointer),\n    initService(instance, 'keyed', useKey),\n  ];\n\n  // Fire the `loaded` method on window load\n  // @todo remove this? or move it elsewhere?\n  if (hasMethod(instance, 'loaded')) {\n    /**\n     * @param {Event} event\n     */\n    const loadedHandler = (event) => {\n      callMethod(instance, 'loaded', { event });\n    };\n    window.addEventListener('load', loadedHandler);\n    unbindMethods.push(() => {\n      window.removeEventListener('load', loadedHandler);\n    });\n  }\n\n  return unbindMethods;\n}\n","// eslint-disable-next-line import/no-cycle\nimport Base from './index';\nimport getAllProperties from '../../utils/object/getAllProperties';\nimport { debug } from './utils';\n\n/**\n * Bind event handler methods to the root HTML element.\n *\n * @param  {Base}  instance     A Base instance.\n * @param  {Array} eventMethods A list of methods to bind.\n * @return {Array}              A list of unbind functions.\n */\nfunction bindRootEvents(instance, eventMethods) {\n  return eventMethods.map((eventMethod) => {\n    const eventName = eventMethod.replace(/^on/, '').toLowerCase();\n\n    const handler = (...args) => {\n      debug(instance, eventMethod, instance.$el, ...args);\n      instance[eventMethod](...args);\n    };\n\n    instance.$el.addEventListener(eventName, handler);\n\n    return () => {\n      instance.$el.removeEventListener(eventName, handler);\n    };\n  });\n}\n\n/**\n * Bind event handler methods to refs HTML element.\n *\n * @param  {Base}  instance     A Base instance.\n * @param  {Array} eventMethods A list of methods to bind.\n * @return {Array}              A list of unbind functions.\n */\nfunction bindRefsEvents(instance, eventMethods) {\n  const unbindMethods = [];\n\n  Object.entries(instance.$refs).forEach(([refName, $refOrRefs]) => {\n    const $refs = Array.isArray($refOrRefs) ? $refOrRefs : [$refOrRefs];\n    const refEventMethod = `on${refName.replace(/^\\w/, (c) => c.toUpperCase())}`;\n\n    eventMethods\n      .filter((eventMethod) => eventMethod.startsWith(refEventMethod))\n      .forEach((eventMethod) => {\n        $refs.forEach(($ref, index) => {\n          const eventName = eventMethod.replace(refEventMethod, '').toLowerCase();\n          const handler = (...args) => {\n            debug(instance, eventMethod, $ref, ...args, index);\n            instance[eventMethod](...args, index);\n          };\n\n          debug(instance, 'binding ref event', refName, eventName);\n\n          if ($ref instanceof Base) {\n            // eslint-disable-next-line no-param-reassign\n            $ref = $ref.$el;\n          }\n\n          /** @type {HTMLElement} */ ($ref).addEventListener(eventName, handler);\n          const unbindMethod = () => {\n            debug(instance, 'unbinding ref event', eventMethods);\n            /** @type {HTMLElement} */ ($ref).removeEventListener(eventName, handler);\n          };\n\n          unbindMethods.push(unbindMethod);\n        });\n      });\n  });\n\n  return unbindMethods;\n}\n\n/**\n * Bind event handler methods to children Base instance.\n * @param  {Base}  instance     A Base instance.\n * @param  {Array} eventMethods A list of methods to bind.\n * @return {Array}              A list of unbind functions.\n */\nfunction bindChildrenEvents(instance, eventMethods) {\n  const unbindMethods = [];\n\n  Object.entries(instance.$children).forEach(([childName, $children]) => {\n    const childEventMethod = `on${childName.replace(/^\\w/, (c) => c.toUpperCase())}`;\n\n    eventMethods\n      .filter((eventMethod) => eventMethod.startsWith(childEventMethod))\n      .forEach((eventMethod) => {\n        $children.forEach(\n          /**\n           * @param {Base} $child\n           * @param {Number} index\n           */\n          ($child, index) => {\n            const eventName = eventMethod.replace(childEventMethod, '').toLowerCase();\n            const handler = (...args) => {\n              debug(instance, eventMethod, $child, ...args, index);\n              instance[eventMethod](...args, index);\n            };\n\n            debug(instance, 'binding child event', childName, eventName);\n\n            const unbindMethod = $child.$on(eventName, handler);\n            unbindMethods.push(() => {\n              debug(instance, 'unbinding child event', childName, eventName);\n              unbindMethod();\n            });\n          }\n        );\n      });\n  });\n\n  return unbindMethods;\n}\n\n/**\n * Bind ref and children component's events to their corresponding method.\n *\n * @param  {Base} instance  A Base instance.\n * @return {Array}          A list of methods to unbind the events.\n */\nexport default function bindEvents(instance) {\n  const ROOT_EVENT_REGEX = /^on[A-Z][a-z]+$/;\n  const REFS_CHILDREN_EVENT_REGEX = /^on([A-Z][a-z]+)([A-Z][a-z]+)+$/;\n\n  // Get all event methods\n  const eventMethods = getAllProperties(instance).reduce(\n    (acc, [name]) => {\n      // Testing camelCase with one word: onEvent.\n      if (ROOT_EVENT_REGEX.test(name)) {\n        acc.root.push(name);\n        return acc;\n      }\n\n      // Testing camelCase with more than two words: onRefEvent.\n      if (REFS_CHILDREN_EVENT_REGEX.test(name)) {\n        acc.refsOrChildren.push(name);\n      }\n\n      return acc;\n    },\n    { root: [], refsOrChildren: [] }\n  );\n\n  const unbindMethods = [\n    ...bindRootEvents(instance, eventMethods.root),\n    ...bindRefsEvents(instance, eventMethods.refsOrChildren),\n    ...bindChildrenEvents(instance, eventMethods.refsOrChildren),\n  ];\n\n  return unbindMethods;\n}\n","import nanoid from 'nanoid/non-secure';\nimport autoBind from '../../utils/object/autoBind';\nimport EventManager from '../EventManager';\nimport { callMethod, debug, log, getConfig } from './utils';\n// eslint-disable-next-line import/no-cycle\nimport { getChildren, getComponentElements } from './children';\nimport { getOptions } from './options';\nimport { getRefs } from './refs';\nimport { mountComponents, destroyComponents } from './components';\nimport bindServices from './services';\n// eslint-disable-next-line import/no-cycle\nimport bindEvents from './events';\n\n/**\n * @typedef {typeof Base} BaseComponent\n * @typedef {() => Promise<BaseComponent | { default: BaseComponent }>} BaseAsyncComponent\n * @typedef {HTMLElement & { __base__?: Base | 'terminated' }} BaseHTMLElement\n * @typedef {{ name: string, debug: boolean, log: boolean }} BaseOptions\n * @typedef {{ [name:string]: HTMLElement | BaseComponent | Array<HTMLElement|BaseComponent> }} BaseRefs\n * @typedef {{ [nameOrSelector:string]: Array<Base | Promise<Base>> }} BaseChildren\n * @typedef {{ [nameOrSelector:string]: BaseComponent | BaseAsyncComponent }} BaseConfigComponents\n * @typedef {import('./classes/Options').OptionsSchema} BaseConfigOptions\n */\n\n/**\n * @typedef {Object} BaseConfig\n * @property {String} name\n * @property {Boolean} [debug]\n * @property {Boolean} [log]\n * @property {String[]} [refs]\n * @property {BaseConfigComponents} [components]\n * @property {BaseConfigOptions} [options]\n */\n\n/**\n * Page lifecycle class\n */\nexport default class Base extends EventManager {\n  /**\n   * The instance parent.\n   * @type {Base}\n   */\n  $parent = null;\n\n  /**\n   * The state of the component.\n   * @type {Boolean}\n   */\n  $isMounted = false;\n\n  /**\n   * This is a Base instance.\n   * @type {Boolean}\n   */\n  static $isBase = true;\n\n  /**\n   * Get properties to exclude from the autobind call.\n   * @return {Array<String|RegExp>}\n   */\n  get _excludeFromAutoBind() {\n    return [\n      '$mount',\n      '$update',\n      '$destroy',\n      '$terminate',\n      '$log',\n      '$on',\n      '$once',\n      '$off',\n      '$emit',\n      'mounted',\n      'loaded',\n      'ticked',\n      'resized',\n      'moved',\n      'keyed',\n      'scrolled',\n      'destroyed',\n      'terminated',\n    ];\n  }\n\n  /**\n   * @deprecated Use the static `config` property instead.\n   * @return {BaseConfig}\n   */\n  get config() {\n    return null;\n  }\n\n  /** @type {BaseConfig} */\n  static config;\n\n  /**\n   * Get the component's refs.\n   * @return {BaseRefs}\n   */\n  get $refs() {\n    return getRefs(this, this.$el);\n  }\n\n  /**\n   * Get the component's children components.\n   * @return {BaseChildren}\n   */\n  get $children() {\n    const { components } = getConfig(this);\n    return getChildren(this, this.$el, components || {});\n  }\n\n  /**\n   * Class constructor where all the magic takes place.\n   *\n   * @param {BaseHTMLElement} element The component's root element dd.\n   */\n  constructor(element) {\n    super();\n\n    if (!element) {\n      throw new Error('The root element must be defined.');\n    }\n\n    const { name } = getConfig(this);\n\n    /** @type {String} */\n    this.$id = `${name}-${nanoid()}`;\n\n    /** @type {BaseHTMLElement} */\n    this.$el = element;\n\n    /** @type {Boolean} */\n    this.$isMounted = false;\n\n    /** @type {BaseOptions} */\n    this.$options = getOptions(this, element, getConfig(this));\n\n    if (!this.$el.__base__) {\n      Object.defineProperty(this.$el, '__base__', {\n        get: () => this,\n        configurable: true,\n      });\n    }\n\n    // Autobind all methods to the instance\n    autoBind(this, {\n      exclude: [...(this._excludeFromAutoBind || [])],\n    });\n\n    let unbindMethods = [];\n    this.$on('mounted', () => {\n      mountComponents(this);\n      unbindMethods = [...bindServices(this), ...bindEvents(this)];\n      this.$isMounted = true;\n    });\n\n    this.$on('updated', () => {\n      unbindMethods.forEach((method) => method());\n      mountComponents(this);\n      unbindMethods = [...bindServices(this), ...bindEvents(this)];\n    });\n\n    this.$on('destroyed', () => {\n      this.$isMounted = false;\n      unbindMethods.forEach((method) => method());\n      destroyComponents(this);\n    });\n\n    debug(this, 'constructor', this);\n    return this;\n  }\n\n  /**\n   * Small helper to log stuff.\n   *\n   * @param  {...any} args The arguments passed to the method\n   * @return {void}\n   */\n  $log(...args) {\n    if (this.$options.log) {\n      log(this, ...args);\n    }\n  }\n\n  /**\n   * Trigger the `mounted` callback.\n   */\n  $mount() {\n    debug(this, '$mount');\n    callMethod(this, 'mounted');\n    return this;\n  }\n\n  /**\n   * Update the instance children.\n   */\n  $update() {\n    debug(this, '$update');\n    callMethod(this, 'updated');\n    return this;\n  }\n\n  /**\n   * Trigger the `destroyed` callback.\n   */\n  $destroy() {\n    debug(this, '$destroy');\n    callMethod(this, 'destroyed');\n    return this;\n  }\n\n  /**\n   * Terminate a child instance when it is not needed anymore.\n   * @return {void}\n   */\n  $terminate() {\n    debug(this, '$terminate');\n\n    // First, destroy the component.\n    this.$destroy();\n\n    // Execute the `terminated` hook if it exists\n    callMethod(this, 'terminated');\n\n    // Delete the reference to the instance\n    // delete this.$el.__base__;\n\n    // And update its status to prevent re-instantiation when accessing the\n    // parent's `$children` property\n    Object.defineProperty(this.$el, '__base__', {\n      value: 'terminated',\n      configurable: false,\n      writable: false,\n    });\n  }\n\n  /**\n   * Factory method to generate multiple instance of the class.\n   *\n   * @param  {String}      nameOrSelector The selector on which to mount each instance.\n   * @return {Array<Base>}                A list of the created instance.\n   */\n  static $factory(nameOrSelector) {\n    if (!nameOrSelector) {\n      throw new Error(\n        'The $factory method requires a component’s name or selector to be specified.'\n      );\n    }\n\n    return getComponentElements(nameOrSelector).map((el) => new this(el).$mount());\n  }\n\n  /**\n   * Hello world.\n   */\n  mounted() {}\n}\n","import Base from './abstracts/Base';\n\n/**\n * @typedef {import('./abstracts/Base').BaseComponent} BaseComponent\n */\n\n/**\n * Define a component without a class.\n *\n * @param  {Object} options The component's object\n * @return {BaseComponent}           A component's class.\n */\nexport function defineComponent(options) {\n  const { config, methods, ...hooks } = options;\n\n  if (!config) {\n    throw new Error('The `config` property is required.');\n  }\n\n  if (!config.name) {\n    throw new Error('The `config.name` property is required.');\n  }\n\n  /**\n   * Component class.\n   */\n  class Component extends Base {\n    /**\n     * Component config.\n     */\n    static config = config;\n  }\n\n  const allowedHooks = [\n    'mounted',\n    'loaded',\n    'ticked',\n    'resized',\n    'moved',\n    'keyed',\n    'scrolled',\n    'destroyed',\n    'terminated',\n  ];\n\n  const filteredHooks = Object.entries(hooks).reduce((acc, [name, fn]) => {\n    if (allowedHooks.includes(name)) {\n      acc[name] = fn;\n    } else {\n      throw new Error(\n        `\n          The \"${name}\" method is not a Base lifecycle hook,\n          it should be placed in the \"method\" property.\n          The following hooks are available: ${allowedHooks.join(', ')}\n        `\n      );\n    }\n\n    return acc;\n  }, {});\n\n  [...Object.entries(methods || {}), ...Object.entries(filteredHooks)].forEach(([name, fn]) => {\n    Component.prototype[name] = fn;\n  });\n\n  return Component;\n}\n\n/**\n * Create a Base instance with the given object configuration.\n * @param {HTMLElement|String} elementOrSelector The instance root HTML element.\n * @param {Object}             options           The Base class configuration.\n */\nexport function createBase(elementOrSelector, options) {\n  const Component = defineComponent(options);\n  /** @type {HTMLElement} */\n  const element =\n    typeof elementOrSelector === 'string'\n      ? document.querySelector(elementOrSelector)\n      : elementOrSelector;\n  return new Component(element);\n}\n\nexport default Base;\n"],"names":["getAllProperties","object","props","proto","Object","getPrototypeOf","prototype","getOwnPropertyNames","map","name","reduce","acc","val","autoBind","instance","options","exclude","include","filter","key","match","pattern","test","some","forEach","descriptor","getOwnPropertyDescriptor","value","bind","EventManager","_events","$on","event","listener","Array","isArray","push","$off","index","indexOf","splice","$emit","apply","$once","handler","getConfig","config","constructor","Error","console","warn","log","debug","$options","hasMethod","obj","callMethod","method","args","$isMounted","call","getChild","el","ComponentClass","parent","__base__","child","defineProperty","get","then","module","default","getComponentElements","nameOrSelector","element","document","selector","elements","from","querySelectorAll","length","getChildren","components","children","entries","isObject","toString","getAttributeName","noCase","delimiter","Options","schema","String","Number","Boolean","isObjectConfig","types","includes","type","defaultValue","set","enumerable","attributeName","hasAttribute","setAttribute","getAttribute","deepmerge","JSON","parse","setTimeout","stringify","TypeError","removeAttribute","getOptions","getterConfig","staticConfig","assign","propsToInclude","prop","propsToExclude","keys","propName","undefined","legacyOptions","dataset","err","optionName","optionValue","scopeSelectorPonyfill","uniqId","list","attr","scopedSelector","getRefs","definedRefs","refs","allRefs","childrenRefs","$id","ref","$refs","$ref","refName","$realRef","endsWith","replace","mountComponent","component","Promise","$mount","mountComponents","$children","values","$child","destroyComponent","$destroy","destroyComponents","Service","callbacks","Map","isInit","init","kill","add","callback","has","size","remove","delete","trigger","throttle","fn","delay","lastCall","now","Date","getTime","debounce","timeout","clearTimeout","getRaf","window","requestAnimationFrame","nextFrame","raf","resolve","Raf","isTicking","loop","time","performance","isTouchEvent","TouchEvent","Pointer","isDown","y","innerHeight","yLast","x","innerWidth","xLast","useRaf","hasRaf","debounced","updateValues","downHandler","upHandler","documentElement","addEventListener","once","passive","removeEventListener","touches","clientY","clientX","changed","last","delta","progress","max","pointer","Resize","canUseResizeObserver","resizeObserver","ResizeObserver","observe","disconnect","width","height","ratio","orientation","breakpointElement","breakpoint","breakpoints","querySelector","getComputedStyle","getPropertyValue","split","resize","Scroll","pageYOffset","pageXOffset","scrollingElement","body","scrollWidth","scrollHeight","scroll","ENTER","SPACE","TAB","ESC","LEFT","UP","RIGHT","DOWN","Key","triggered","previousEvent","keyCodes","code","keyCode","direction","isUp","initService","service","bindServices","unbindMethods","useScroll","useResize","usePointer","useKey","loadedHandler","bindRootEvents","eventMethods","eventMethod","eventName","toLowerCase","$el","bindRefsEvents","$refOrRefs","refEventMethod","c","toUpperCase","startsWith","Base","unbindMethod","bindChildrenEvents","childName","childEventMethod","bindEvents","ROOT_EVENT_REGEX","REFS_CHILDREN_EVENT_REGEX","root","refsOrChildren","$parent","nanoid","configurable","_excludeFromAutoBind","$log","$update","$terminate","writable","$factory","mounted","$isBase","defineComponent","methods","hooks","Component","allowedHooks","filteredHooks","join","createBase","elementOrSelector"],"mappings":"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"}