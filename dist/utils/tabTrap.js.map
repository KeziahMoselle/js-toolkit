{"version":3,"sources":["../../src/utils/tabTrap.js"],"names":["FOCUSABLE_ELEMENTS","useTabTrap","focusedBefore","trap","element","event","keyCode","keyCodes","TAB","document","activeElement","console","log","focusableChildren","Array","from","querySelectorAll","join","focusedItemIndex","indexOf","shiftKey","length","focus","preventDefault","untrap"],"mappings":";;;;;;;;;AAAA;;AAEA,IAAMA,kBAAkB,GAAG,CACzB,2CADyB,EAEzB,8CAFyB,EAGzB,oCAHyB,EAIzB,qCAJyB,EAKzB,uCALyB,EAMzB,qCANyB,EAOzB,0CAPyB,EAQzB,yCARyB,EASzB,yCATyB,EAUzB,qDAVyB,EAWzB,8CAXyB,CAA3B;AAcA;;;;;;AAKe,SAASC,UAAT,GAAsB;AACnC,MAAIC,aAAJ;AAEA;;;;;;;;AAOA,WAASC,IAAT,CAAcC,OAAd,EAAuBC,KAAvB,EAA8B;AAC5B,QAAIA,KAAK,CAACC,OAAN,KAAkBC,qBAASC,GAA/B,EAAoC;AAClC;AACD,KAH2B,CAK5B;;;AACA,QAAI,CAACN,aAAL,EAAoB;AAClBA,MAAAA,aAAa,GAAGO,QAAQ,CAACC,aAAzB;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYV,aAAZ;AACD;;AAED,QAAMW,iBAAiB,GAAGC,KAAK,CAACC,IAAN,CAAWX,OAAO,CAACY,gBAAR,CAAyBhB,kBAAkB,CAACiB,IAAnB,CAAwB,IAAxB,CAAzB,CAAX,CAA1B;AACA,QAAMC,gBAAgB,GAAGL,iBAAiB,CAACM,OAAlB,CAA0BV,QAAQ,CAACC,aAAnC,CAAzB,CAZ4B,CAc5B;AACA;AACA;;AACA,QAAIL,KAAK,CAACe,QAAN,IAAkBF,gBAAgB,KAAK,CAA3C,EAA8C;AAC5CL,MAAAA,iBAAiB,CAACA,iBAAiB,CAACQ,MAAlB,GAA2B,CAA5B,CAAjB,CAAgDC,KAAhD;AACAjB,MAAAA,KAAK,CAACkB,cAAN;AACD,KAHD,CAIA;AACA;AACA;AANA,SAOK,IAAI,CAAClB,KAAK,CAACe,QAAP,IAAmBF,gBAAgB,KAAKL,iBAAiB,CAACQ,MAAlB,GAA2B,CAAvE,EAA0E;AAC7ER,QAAAA,iBAAiB,CAAC,CAAD,CAAjB,CAAqBS,KAArB;AACAjB,QAAAA,KAAK,CAACkB,cAAN;AACD;AACF;AAED;;;;;;;AAKA,WAASC,MAAT,GAAkB;AAChB,QAAItB,aAAa,IAAI,OAAOA,aAAa,CAACoB,KAArB,KAA+B,UAApD,EAAgE;AAC9DpB,MAAAA,aAAa,CAACoB,KAAd;AACApB,MAAAA,aAAa,GAAG,IAAhB;AACD;AACF;;AAED,SAAO;AAAEC,IAAAA,IAAI,EAAJA,IAAF;AAAQqB,IAAAA,MAAM,EAANA;AAAR,GAAP;AACD","sourcesContent":["import keyCodes from './keyCodes';\n\nconst FOCUSABLE_ELEMENTS = [\n  'a[href]:not([tabindex^=\"-\"]):not([inert])',\n  'area[href]:not([tabindex^=\"-\"]):not([inert])',\n  'input:not([disabled]):not([inert])',\n  'select:not([disabled]):not([inert])',\n  'textarea:not([disabled]):not([inert])',\n  'button:not([disabled]):not([inert])',\n  'iframe:not([tabindex^=\"-\"]):not([inert])',\n  'audio:not([tabindex^=\"-\"]):not([inert])',\n  'video:not([tabindex^=\"-\"]):not([inert])',\n  '[contenteditable]:not([tabindex^=\"-\"]):not([inert])',\n  '[tabindex]:not([tabindex^=\"-\"]):not([inert])',\n];\n\n/**\n * Use a trap/untrap tabs logic.\n *\n * @return {Object} An object containing the trap and untrap methods.\n */\nexport default function useTabTrap() {\n  let focusedBefore;\n\n  /**\n   * Trap tab navigation inside the given element\n   *\n   * @param  {HTMLElement} element The element in which to trap the tabulations.\n   * @param  {Event}       event   The keydown or keyup event.\n   * @return {void}\n   */\n  function trap(element, event) {\n    if (event.keyCode !== keyCodes.TAB) {\n      return;\n    }\n\n    // Save the previous focused element\n    if (!focusedBefore) {\n      focusedBefore = document.activeElement;\n      console.log(focusedBefore);\n    }\n\n    const focusableChildren = Array.from(element.querySelectorAll(FOCUSABLE_ELEMENTS.join(', ')));\n    const focusedItemIndex = focusableChildren.indexOf(document.activeElement);\n\n    // If the SHIFT key is being pressed while tabbing (moving backwards) and\n    // the currently focused item is the first one, move the focus to the last\n    // focusable item from the dialog element\n    if (event.shiftKey && focusedItemIndex === 0) {\n      focusableChildren[focusableChildren.length - 1].focus();\n      event.preventDefault();\n    }\n    // If the SHIFT key is not being pressed (moving forwards) and the currently\n    // focused item is the last one, move the focus to the first focusable item\n    // from the dialog element\n    else if (!event.shiftKey && focusedItemIndex === focusableChildren.length - 1) {\n      focusableChildren[0].focus();\n      event.preventDefault();\n    }\n  }\n\n  /**\n   * Untrap the tab navigation.\n   *\n   * @return {void}\n   */\n  function untrap() {\n    if (focusedBefore && typeof focusedBefore.focus === 'function') {\n      focusedBefore.focus();\n      focusedBefore = null;\n    }\n  }\n\n  return { trap, untrap };\n}\n"],"file":"tabTrap.js"}