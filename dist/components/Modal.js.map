{"version":3,"sources":["../../src/components/Modal.js"],"names":["trap","untrap","saveActiveElement","setClasses","element","classNames","method","split","forEach","className","classList","setStyles","styles","Object","entries","prop","value","style","Modal","isOpen","open","Array","isArray","$refs","btn","addEventListener","close","overlay","$options","move","target","document","querySelector","body","appendChild","modal","removeEventListener","setAttribute","documentElement","overflow","keydownHandler","openClass","ref","classes","openStyle","closedClass","closedStyle","autofocus","focus","$emit","event","keyCode","keyCodes","ESC","name","opacity","pointerEvents","visibility","Base"],"mappings":"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","sourcesContent":["import { Base } from '../abstracts';\nimport { isObject, keyCodes, tabTrap } from '../utils';\n\nconst { trap, untrap, saveActiveElement } = tabTrap();\n\n/**\n * Manage a list of classes as string on an element.\n *\n * @param {HTMLElement} element    The element to update.\n * @param {String}      classNames A string of class names.\n * @param {String}      method     The method to use: add, remove or toggle.\n */\nfunction setClasses(element, classNames, method = 'add') {\n  if (!element || !classNames) {\n    return;\n  }\n\n  classNames.split(' ').forEach(className => {\n    element.classList[method](className);\n  });\n}\n\n/**\n * Manage a list of style properties on an element.\n *\n * @param {HTMLElement}         element The element to update.\n * @param {CSSStyleDeclaration} styles  An object of styles properties and values.\n * @param {String}              method  The method to use: add or remove.\n */\nfunction setStyles(element, styles, method = 'add') {\n  if (!element || !styles || !isObject(styles)) {\n    return;\n  }\n\n  Object.entries(styles).forEach(([prop, value]) => {\n    element.style[prop] = method === 'add' ? value : '';\n  });\n}\n\n/**\n * Modal class.\n */\nexport default class Modal extends Base {\n  /**\n   * Modal options.\n   */\n  get config() {\n    return {\n      name: 'Modal',\n      move: false,\n      autofocus: '[autofocus]',\n      openClass: {},\n      openStyle: {},\n      closedClass: {},\n      closedStyle: {\n        modal: {\n          opacity: 0,\n          pointerEvents: 'none',\n          visibility: 'hidden',\n        },\n      },\n    };\n  }\n\n  /**\n   * Initialize the component's behaviours.\n   *\n   * @return {Modal} The current instance.\n   */\n  mounted() {\n    this.isOpen = false;\n\n    const open = Array.isArray(this.$refs.open) ? this.$refs.open : [this.$refs.open];\n    open.forEach(btn => btn.addEventListener('click', this.open));\n\n    const close = Array.isArray(this.$refs.close) ? this.$refs.close : [this.$refs.close];\n    close.forEach(btn => btn.addEventListener('click', this.close));\n\n    this.$refs.overlay.addEventListener('click', this.close);\n\n    this.close();\n\n    if (this.$options.move) {\n      const target = document.querySelector(this.$options.move) || document.body;\n      target.appendChild(this.$refs.modal);\n    }\n\n    return this;\n  }\n\n  /**\n   * Unbind all events on destroy.\n   *\n   * @return {Modal} The Modal instance.\n   */\n  destroyed() {\n    this.close();\n\n    const open = Array.isArray(this.$refs.open) ? this.$refs.open : [this.$refs.open];\n    open.forEach(btn => btn.removeEventListener('click', this.open));\n\n    const close = Array.isArray(this.$refs.close) ? this.$refs.close : [this.$refs.close];\n    close.forEach(btn => btn.removeEventListener('click', this.close));\n\n    this.$refs.overlay.removeEventListener('click', this.close);\n    return this;\n  }\n\n  /**\n   * Open the modal.\n   *\n   * @return {Modal} The Modal instance.\n   */\n  open() {\n    this.$refs.modal.setAttribute('aria-hidden', 'false');\n    document.documentElement.style.overflow = 'hidden';\n    document.addEventListener('keydown', this.keydownHandler);\n\n    // Add \"open\" classes to refs\n    Object.entries(this.$options.openClass).forEach(([ref, classes]) => {\n      setClasses(this.$refs[ref], classes);\n    });\n\n    // Add \"open\" styles to refs\n    Object.entries(this.$options.openStyle).forEach(([ref, styles]) => {\n      setStyles(this.$refs[ref], styles);\n    });\n\n    // Remove \"closed\" classes from refs\n    Object.entries(this.$options.closedClass).forEach(([ref, classes]) => {\n      setClasses(this.$refs[ref], classes, 'remove');\n    });\n\n    // Remove \"closed\" styles from refs\n    Object.entries(this.$options.closedStyle).forEach(([ref, styles]) => {\n      setStyles(this.$refs[ref], styles, 'remove');\n    });\n\n    if (this.$options.autofocus && this.$refs.modal.querySelector(this.$options.autofocus)) {\n      saveActiveElement();\n      this.$refs.modal.querySelector(this.$options.autofocus).focus();\n    }\n\n    this.isOpen = true;\n    this.$emit('open');\n  }\n\n  /**\n   * Close the modal.\n   *\n   * @return {Modal} The Modal instance.\n   */\n  close() {\n    this.$refs.modal.setAttribute('aria-hidden', 'true');\n    document.documentElement.style.overflow = '';\n    document.removeEventListener('keydown', this.keydownHandler);\n\n    // Add \"closed\" classes to refs\n    Object.entries(this.$options.closedClass).forEach(([ref, classes]) => {\n      setClasses(this.$refs[ref], classes);\n    });\n\n    // Add \"closed\" styles to refs\n    Object.entries(this.$options.closedStyle).forEach(([ref, styles]) => {\n      setStyles(this.$refs[ref], styles);\n    });\n\n    // Remove \"open\" classes from refs\n    Object.entries(this.$options.openClass).forEach(([ref, classes]) => {\n      setClasses(this.$refs[ref], classes, 'remove');\n    });\n\n    // Remove \"open\" styles from refs\n    Object.entries(this.$options.openStyle).forEach(([ref, styles]) => {\n      setStyles(this.$refs[ref], styles, 'remove');\n    });\n\n    this.isOpen = false;\n    untrap();\n    this.$emit('close');\n  }\n\n  /**\n   * Manage closing the modal on `ESC` keydown and trapped tabulation.\n   *\n   * @param  {Event} event The event object.\n   * @return {Modal}       The Modal instance.\n   */\n  keydownHandler(event) {\n    if (event.keyCode === keyCodes.ESC) {\n      return this.close();\n    }\n\n    // Trap tab navigation\n    trap(this.$refs.modal, event);\n\n    return this;\n  }\n}\n"],"file":"Modal.js"}