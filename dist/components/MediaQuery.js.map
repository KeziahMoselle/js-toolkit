{"version":3,"sources":["../../src/components/MediaQuery.js"],"names":["MediaQuery","test","isInBreakpoints","activeBreakpoints","includes","currentBreakpoint","child","$isMounted","$mount","$destroy","name","$el","firstElementChild","__base__","Error","props","breakpoint","dataset","split","Base"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;;;;;AAEA;;;;;;;IAOqBA,U;;;;;;;;;;;;;AAYnB;;;8BAGU;AAAA;;AACR,WAAKC,IAAL;AACA,8BAAU;AAAA,eAAM,KAAI,CAACA,IAAL,EAAN;AAAA,OAAV;AACD;AAED;;;;;;8BAGU;AACR,WAAKA,IAAL;AACD;AAED;;;;;;;;;;AAwCA;;;;;;2BAMO;AACL,UAAMC,eAAe,GAAG,KAAKC,iBAAL,CAAuBC,QAAvB,CAAgC,KAAKC,iBAArC,CAAxB;;AAEA,UAAIH,eAAe,IAAI,CAAC,KAAKI,KAAL,CAAWC,UAAnC,EAA+C;AAC7C,aAAKD,KAAL,CAAWE,MAAX;AACA;AACD;;AAED,UAAI,CAACN,eAAD,IAAoB,KAAKI,KAAL,CAAWC,UAAnC,EAA+C;AAC7C,aAAKD,KAAL,CAAWG,QAAX;AACD;AACF;;;;AAnFD;;;;;wBAKa;AACX,aAAO;AACLC,QAAAA,IAAI,EAAE;AADD,OAAP;AAGD;;;wBAuBW;AACV,UAAMJ,KAAK,GAAG,KAAKK,GAAL,CAASC,iBAAT,GAA6B,KAAKD,GAAL,CAASC,iBAAT,CAA2BC,QAAxD,GAAmE,KAAjF;;AAEA,UAAI,CAACP,KAAL,EAAY;AACV,cAAM,IAAIQ,KAAJ,CACJ,sFADI,CAAN;AAGD;;AAED,aAAOR,KAAP;AACD;AAED;;;;;;;;wBAKwB;AACtB,aAAO,uBAAYS,KAAZ,GAAoBC,UAA3B;AACD;AAED;;;;;;;;wBAKwB;AACtB,UAAI,KAAKL,GAAL,CAASM,OAAT,CAAiBd,iBAArB,EAAwC;AACtC,eAAO,KAAKQ,GAAL,CAASM,OAAT,CAAiBd,iBAAjB,CAAmCe,KAAnC,CAAyC,GAAzC,CAAP;AACD;;AAED,aAAO,EAAP;AACD;;;EAjEqCC,c","sourcesContent":["import Base from '../abstracts/Base';\nimport useResize from '../services/resize';\nimport nextFrame from '../utils/nextFrame';\n\n/**\n * MediaQuery component.\n *\n * <div data-component=\"MediaQuery\" data-active-breakpoints=\"l xl\">\n *   <div data-component=\"Foo\"></div>\n * </div>\n */\nexport default class MediaQuery extends Base {\n  /**\n   * Component's configuration.\n   *\n   * @return {Object}\n   */\n  get config() {\n    return {\n      name: 'MediaQuery',\n    };\n  }\n\n  /**\n   * Mounted hook.\n   */\n  mounted() {\n    this.test();\n    nextFrame(() => this.test());\n  }\n\n  /**\n   * Resized hook.\n   */\n  resized() {\n    this.test();\n  }\n\n  /**\n   * Get the first element child of the component, as it must be another Base component that could\n   * be either $mounted or $destroyed.\n   *\n   * @return {Base|Boolean}\n   */\n  get child() {\n    const child = this.$el.firstElementChild ? this.$el.firstElementChild.__base__ : false;\n\n    if (!child) {\n      throw new Error(\n        'The first and only child of the MediaQuery component must be another Base component.'\n      );\n    }\n\n    return child;\n  }\n\n  /**\n   * Get the current active breakpoint from the `useResize` service.\n   *\n   * @return {String}\n   */\n  get currentBreakpoint() {\n    return useResize().props().breakpoint;\n  }\n\n  /**\n   * Get a list of breakpoints in which the child component should be $mounted.\n   *\n   * @return {Array}\n   */\n  get activeBreakpoints() {\n    if (this.$el.dataset.activeBreakpoints) {\n      return this.$el.dataset.activeBreakpoints.split(' ');\n    }\n\n    return [];\n  }\n\n  /**\n   * Test if the child component should be either $mounted or $destroyed based on the current active\n   * breakpoint and the given list of breakpoints.\n   *\n   * @return {void}\n   */\n  test() {\n    const isInBreakpoints = this.activeBreakpoints.includes(this.currentBreakpoint);\n\n    if (isInBreakpoints && !this.child.$isMounted) {\n      this.child.$mount();\n      return;\n    }\n\n    if (!isInBreakpoints && this.child.$isMounted) {\n      this.child.$destroy();\n    }\n  }\n}\n"],"file":"MediaQuery.js"}