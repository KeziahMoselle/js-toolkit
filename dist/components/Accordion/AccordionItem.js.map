{"version":3,"sources":["../../../src/components/Accordion/AccordionItem.js"],"names":["Base","styles","transition","AccordionItem","$parent","$options","item","$refs","btn","setAttribute","$id","contentId","content","isOpen","updateAttributes","add","container","visibility","height","otherStyles","Object","entries","filter","refName","forEach","open","closed","to","close","$log","$emit","remove","Promise","all","from","active","offsetHeight","then","position","resolve","map","name"],"mappings":"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","sourcesContent":["import Base from '../../abstracts/Base';\nimport * as styles from '../../utils/css/styles';\nimport transition from '../../utils/css/transition';\n\n/**\n * AccordionItem class.\n */\nexport default class AccordionItem extends Base {\n  /**\n   * AccordionItem config\n   * @return {Object}\n   */\n  get config() {\n    return {\n      name: 'AccordionItem',\n      isOpen: false,\n      styles: {\n        container: {\n          open: '',\n          active: '',\n          closed: '',\n        },\n      },\n    };\n  }\n\n  /**\n   * Add aria-attributes on mounted.\n   * @return {void}\n   */\n  mounted() {\n    if (this.$parent && this.$parent.$options.item) {\n      this.$options = this.$parent.$options.item;\n    }\n\n    this.$refs.btn.setAttribute('id', this.$id);\n    this.$refs.btn.setAttribute('aria-controls', this.contentId);\n    this.$refs.content.setAttribute('aria-labelledby', this.$id);\n    this.$refs.content.setAttribute('id', this.contentId);\n\n    this.isOpen = this.$options.isOpen;\n    this.updateAttributes(this.isOpen);\n\n    if (!this.isOpen) {\n      styles.add(this.$refs.container, { visibility: 'invisible', height: 0 });\n    }\n\n    // Update refs styles on mount\n    const { container, ...otherStyles } = this.$options.styles;\n    Object.entries(otherStyles)\n      .filter(([refName]) => this.$refs[refName])\n      .forEach(([refName, { open, closed } = {}]) => {\n        transition(this.$refs[refName], { to: this.isOpen ? open : closed }, 'keep');\n      });\n  }\n\n  /**\n   * Handler for the click event on the `btn` ref.\n   * @return {void}\n   */\n  onBtnClick() {\n    if (this.isOpen) {\n      this.close();\n    } else {\n      this.open();\n    }\n  }\n\n  /**\n   * Get the content ID.\n   * @return {String}\n   */\n  get contentId() {\n    return `content-${this.$id}`;\n  }\n\n  /**\n   * Update the refs' attributes according to the given type.\n   *\n   * @param  {Boolean} isOpen The state of the item.\n   * @return {void}\n   */\n  updateAttributes(isOpen) {\n    this.$refs.content.setAttribute('aria-hidden', isOpen ? 'false' : 'true');\n    this.$refs.btn.setAttribute('aria-expanded', isOpen ? 'true' : 'false');\n  }\n\n  /**\n   * Open an item.\n   * @return {void}\n   */\n  async open() {\n    if (this.isOpen) {\n      return;\n    }\n\n    this.$log('open');\n    this.$emit('open');\n\n    this.isOpen = true;\n    this.updateAttributes(this.isOpen);\n\n    styles.remove(this.$refs.container, { visibility: 'invisible' });\n    const { container, ...otherStyles } = this.$options.styles;\n\n    await Promise.all([\n      transition(this.$refs.container, {\n        from: { height: 0 },\n        active: container.active,\n        to: { height: `${this.$refs.content.offsetHeight}px` },\n      }).then(() => {\n        // Remove style only if the item has not been closed before the end\n        if (this.isOpen) {\n          styles.remove(this.$refs.content, { position: 'absolute' });\n        }\n\n        return Promise.resolve();\n      }),\n      ...Object.entries(otherStyles)\n        .filter(([refName]) => this.$refs[refName])\n        .map(([refName, { open, active, closed } = {}]) =>\n          transition(\n            this.$refs[refName],\n            {\n              from: closed,\n              active,\n              to: open,\n            },\n            'keep'\n          )\n        ),\n    ]);\n  }\n\n  /**\n   * Close an item.\n   * @return {void}\n   */\n  async close() {\n    if (!this.isOpen) {\n      return;\n    }\n\n    this.$log('close');\n    this.$emit('close');\n\n    this.isOpen = false;\n\n    const height = this.$refs.container.offsetHeight;\n    styles.add(this.$refs.content, { position: 'absolute' });\n    const { container, ...otherStyles } = this.$options.styles;\n\n    await Promise.all([\n      transition(this.$refs.container, {\n        from: { height: `${height}px` },\n        active: container.active,\n        to: { height: 0 },\n      }).then(() => {\n        // Add end styles only if the item has not been re-opened before the end\n        if (!this.isOpen) {\n          styles.add(this.$refs.container, { height: 0, visibility: 'invisible' });\n          this.updateAttributes(this.isOpen);\n        }\n        return Promise.resolve();\n      }),\n      ...Object.entries(otherStyles)\n        .filter(([refName]) => this.$refs[refName])\n        .map(([refName, { open, active, closed } = {}]) =>\n          transition(\n            this.$refs[refName],\n            {\n              from: open,\n              active,\n              to: closed,\n            },\n            'keep'\n          )\n        ),\n    ]);\n  }\n}\n"],"file":"AccordionItem.js"}