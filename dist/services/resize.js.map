{"version":3,"sources":["../../src/services/resize.js"],"names":["Resize","handler","trigger","props","bind","resizeObserver","ResizeObserver","observe","document","documentElement","disconnect","width","window","innerWidth","height","innerHeight","ratio","orientation","breakpointElement","breakpoint","breakpoints","querySelector","getComputedStyle","getPropertyValue","replace","split","Service","resize","add","remove","has"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;;AACA;;;;;;AAEA;;;;;;;;;;;IAWMA,M;;;;;;;;;;;;;AACJ;;;;;2BAKO;AAAA;;AACL,WAAKC,OAAL,GAAe,uBAAS,YAAM;AAC5B,QAAA,KAAI,CAACC,OAAL,CAAa,KAAI,CAACC,KAAlB;AACD,OAFc,EAEZC,IAFY,CAEP,IAFO,CAAf;AAIA,WAAKC,cAAL,GAAsB,IAAIC,cAAJ,CAAmB,KAAKL,OAAxB,CAAtB;AACA,WAAKI,cAAL,CAAoBE,OAApB,CAA4BC,QAAQ,CAACC,eAArC;AACD;AAED;;;;;;;;2BAKO;AACL,WAAKJ,cAAL,CAAoBK,UAApB;AACA,aAAO,KAAKL,cAAZ;AACD;AAED;;;;;;;;wBAKY;AACV,UAAMF,KAAK,GAAG;AACZQ,QAAAA,KAAK,EAAEC,MAAM,CAACC,UADF;AAEZC,QAAAA,MAAM,EAAEF,MAAM,CAACG,WAFH;AAGZC,QAAAA,KAAK,EAAEJ,MAAM,CAACC,UAAP,GAAoBD,MAAM,CAACG,WAHtB;AAIZE,QAAAA,WAAW,EAAE;AAJD,OAAd;;AAOA,UAAId,KAAK,CAACa,KAAN,GAAc,CAAlB,EAAqB;AACnBb,QAAAA,KAAK,CAACc,WAAN,GAAoB,WAApB;AACD;;AAED,UAAId,KAAK,CAACa,KAAN,GAAc,CAAlB,EAAqB;AACnBb,QAAAA,KAAK,CAACc,WAAN,GAAoB,UAApB;AACD;;AAED,UAAI,KAAKC,iBAAT,EAA4B;AAC1Bf,QAAAA,KAAK,CAACgB,UAAN,GAAmB,KAAKA,UAAxB;AACAhB,QAAAA,KAAK,CAACiB,WAAN,GAAoB,KAAKA,WAAzB;AACD;;AAED,aAAOjB,KAAP;AACD;AAED;;;;;;;wBAIwB;AACtB,aAAOK,QAAQ,CAACa,aAAT,CAAuB,mBAAvB,KAA+C,IAAtD;AACD;AAED;;;;;;;wBAIiB;AACf,aAAOT,MAAM,CACVU,gBADI,CACa,KAAKJ,iBADlB,EACqC,UADrC,EAEJK,gBAFI,CAEa,SAFb,EAGJC,OAHI,CAGI,IAHJ,EAGU,EAHV,CAAP;AAID;AAED;;;;;;;wBAIkB;AAChB,UAAMJ,WAAW,GAAGR,MAAM,CACvBU,gBADiB,CACA,KAAKJ,iBADL,EACwB,SADxB,EAEjBK,gBAFiB,CAEA,SAFA,EAGjBC,OAHiB,CAGT,IAHS,EAGH,EAHG,CAApB;AAKA,aAAOJ,WAAW,CAACK,KAAZ,CAAkB,GAAlB,CAAP;AACD;;;EApFkBC,iB;;AAuFrB,IAAIC,MAAM,GAAG,IAAb;;eAEe,oBAAM;AACnB,MAAI,CAACA,MAAL,EAAa;AACXA,IAAAA,MAAM,GAAG,IAAI3B,MAAJ,EAAT;AACD;;AAED,MAAM4B,GAAG,GAAGD,MAAM,CAACC,GAAP,CAAWxB,IAAX,CAAgBuB,MAAhB,CAAZ;AACA,MAAME,MAAM,GAAGF,MAAM,CAACE,MAAP,CAAczB,IAAd,CAAmBuB,MAAnB,CAAf;AACA,MAAMG,GAAG,GAAGH,MAAM,CAACG,GAAP,CAAW1B,IAAX,CAAgBuB,MAAhB,CAAZ;;AACA,MAAMxB,KAAK,GAAG,SAARA,KAAQ;AAAA,WAAMwB,MAAM,CAACxB,KAAb;AAAA,GAAd;;AAEA,SAAO;AACLyB,IAAAA,GAAG,EAAHA,GADK;AAELC,IAAAA,MAAM,EAANA,MAFK;AAGLC,IAAAA,GAAG,EAAHA,GAHK;AAIL3B,IAAAA,KAAK,EAALA;AAJK,GAAP;AAMD,C","sourcesContent":["import Service from '../abstracts/Service';\nimport debounce from '../utils/debounce';\n\n/**\n * Resize service\n *\n * ```\n * import { useResize } from '@studiometa/js/services';\n * const { add, remove, props } = useResize();\n * add(key, (props) => {});\n * remove(key);\n * props();\n * ```\n */\nclass Resize extends Service {\n  /**\n   * Bind the handler to the resize event.\n   *\n   * @return {void}\n   */\n  init() {\n    this.handler = debounce(() => {\n      this.trigger(this.props);\n    }).bind(this);\n\n    this.resizeObserver = new ResizeObserver(this.handler);\n    this.resizeObserver.observe(document.documentElement);\n  }\n\n  /**\n   * Unbind the handler from the resize event.\n   *\n   * @return {void}\n   */\n  kill() {\n    this.resizeObserver.disconnect();\n    delete this.resizeObserver;\n  }\n\n  /**\n   * Get resize props.\n   *\n   * @type {Object}\n   */\n  get props() {\n    const props = {\n      width: window.innerWidth,\n      height: window.innerHeight,\n      ratio: window.innerWidth / window.innerHeight,\n      orientation: 'square',\n    };\n\n    if (props.ratio > 1) {\n      props.orientation = 'landscape';\n    }\n\n    if (props.ratio < 1) {\n      props.orientation = 'portrait';\n    }\n\n    if (this.breakpointElement) {\n      props.breakpoint = this.breakpoint;\n      props.breakpoints = this.breakpoints;\n    }\n\n    return props;\n  }\n\n  /**\n   * The element holding the breakpoints data.\n   * @return {HTMLElement}\n   */\n  get breakpointElement() {\n    return document.querySelector('[data-breakpoint]') || null;\n  }\n\n  /**\n   * Get the current breakpoint.\n   * @return {String}\n   */\n  get breakpoint() {\n    return window\n      .getComputedStyle(this.breakpointElement, '::before')\n      .getPropertyValue('content')\n      .replace(/\"/g, '');\n  }\n\n  /**\n   * Get all breakpoints.\n   * @return {Array}\n   */\n  get breakpoints() {\n    const breakpoints = window\n      .getComputedStyle(this.breakpointElement, '::after')\n      .getPropertyValue('content')\n      .replace(/\"/g, '');\n\n    return breakpoints.split(',');\n  }\n}\n\nlet resize = null;\n\nexport default () => {\n  if (!resize) {\n    resize = new Resize();\n  }\n\n  const add = resize.add.bind(resize);\n  const remove = resize.remove.bind(resize);\n  const has = resize.has.bind(resize);\n  const props = () => resize.props;\n\n  return {\n    add,\n    remove,\n    has,\n    props,\n  };\n};\n"],"file":"resize.js"}